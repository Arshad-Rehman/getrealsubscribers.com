!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}(this,function(t){"use strict";try{(function(){t=t&&t.hasOwnProperty("default")?t.default:t,function(){function e(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}(t)}}function n(t){return"string"==typeof t}function r(t){return"boolean"==typeof t}function i(){}function o(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function a(t){return null===t}function s(t){return"array"==o(t)}function u(t){var e=o(t);return"array"==e||"object"==e&&"number"==typeof t.length}function c(t){return"function"==o(t)}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function l(t,e,n){return t.call.apply(t.bind,arguments)}function p(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function f(t,e,n){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?l:p).apply(null,arguments)}function d(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function v(t,e){function n(){}n.prototype=e.prototype,t.qb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function y(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function g(t){if(Error.captureStackTrace)Error.captureStackTrace(this,g);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function m(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");g.call(this,n+t[r])}function _(t,e){throw new m("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function b(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function w(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function E(){this.b=this.a=null}function C(){this.next=this.b=this.a=null}function I(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||bs).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(h(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;_("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function T(t,e){return 0<=Ns(t,e)}function S(t,e){var n;return(n=0<=(e=Ns(t,e)))&&Array.prototype.splice.call(t,e,1),n}function N(t,e){!function(t,e){for(var r=n(t)?t.split(""):t,i=t.length-1;0<=i;--i)i in r&&e.call(void 0,r[i],i,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length})}function k(t){return Array.prototype.concat.apply([],arguments)}function P(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function A(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function O(t){for(var e in t)return!1;return!0}function R(t){var e,n={};for(e in t)n[e]=t[e];return n}function D(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Os.length;o++)n=Os[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function x(t,e){this.a=t===Ds&&e||"",this.b=Rs}function L(t){return t instanceof x&&t.constructor===x&&t.b===Rs?t.a:(_("expected object of type Const, got '"+t+"'"),"type_error:Const")}function M(){this.a="",this.b=Fs}function F(t){return t instanceof M&&t.constructor===M&&t.b===Fs?t.a:(_("expected object of type TrustedResourceUrl, got '"+t+"' of type "+o(t)),"type_error:TrustedResourceUrl")}function j(t,e){var n=L(t);if(!Ms.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return U(t=n.replace(Ls,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof x?L(t):encodeURIComponent(String(t))}))}function U(t){var e=new M;return e.a=t,e}function V(t,e){return-1!=t.indexOf(e)}function W(t,e){return t<e?-1:e<t?1:0}function q(){this.a="",this.b=zs}function H(t){return t instanceof q&&t.constructor===q&&t.b===zs?t.a:(_("expected object of type SafeUrl, got '"+t+"' of type "+o(t)),"type_error:SafeUrl")}function B(t){return t instanceof q?t:(t="object"==typeof t&&t.qa?t.pa():String(t),Gs.test(t)||(t="about:invalid#zClosurez"),Q(t))}function Q(t){var e=new q;return e.a=t,e}function K(t){return V(Ks,t)}function G(){this.a="",this.b=$s}function z(t){return t instanceof G&&t.constructor===G&&t.b===$s?t.a:(_("expected object of type SafeHtml, got '"+t+"' of type "+o(t)),"type_error:SafeHtml")}function Y(t){var e=new G;return e.a=t,e}function X(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function $(t){return Qs.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Us,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Vs,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Ws,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(qs,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Hs,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(Bs,"&#0;"))),t}function J(t){bs.setTimeout(function(){throw t},0)}function Z(){var t=bs.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!K("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=U(L(xs));I(t,"HTMLIFrameElement"),t.src=F(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(z(tu)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=f(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0===t||K("Trident")||K("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){bs.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){r.next={yb:t},r=r.next,e.port2.postMessage(0)}}function tt(t,e){Zs||function(){if(bs.Promise&&bs.Promise.resolve){var t=bs.Promise.resolve(void 0);Zs=function(){t.then(et)}}else Zs=function(){var t=et;!c(bs.setImmediate)||bs.Window&&bs.Window.prototype&&!K("Edge")&&bs.Window.prototype.setImmediate==bs.setImmediate?(Js=Js||Z())(t):bs.setImmediate(t)}}(),eu||(Zs(),eu=!0),nu.add(t,e)}function et(){for(var t;n=e=void 0,n=null,(e=nu).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){J(t)}w(Ss,t)}var e,n;eu=!1}function nt(t,e){if(this.a=ru,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=i)try{var n=this;t.call(e,function(t){lt(n,iu,t)},function(t){if(!(t instanceof gt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}lt(n,ou,t)})}catch(t){lt(this,ou,t)}}function rt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function it(t,e,n){var r=au.get();return r.g=t,r.b=e,r.f=n,r}function ot(t){if(t instanceof nt)return t;var e=new nt(i);return lt(e,iu,t),e}function at(t){return new nt(function(e,n){n(t)})}function st(t,e,n){pt(t,e,n,null)||tt(d(e,t))}function ut(t){return new nt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)st(t[o],d(i,o,!0),d(i,o,!1));else e(r)})}function ct(t,e){t.b||t.a!=iu&&t.a!=ou||ft(t),t.f?t.f.next=e:t.b=e,t.f=e}function ht(t,e,n,r){var i=it(null,null,null);return i.a=new nt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(n){o(n)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof gt?o(e):t(i)}catch(e){o(e)}}:o}),ct(i.a.c=t,i),i.a}function lt(t,e,n){t.a==ru&&(t===n&&(e=ou,n=new TypeError("Promise cannot resolve to itself")),t.a=1,pt(n,t.Oc,t.Pc,t)||(t.i=n,t.a=e,t.c=null,ft(t),e!=ou||n instanceof gt||function(t,e){t.g=!0,tt(function(){t.g&&su.call(null,e)})}(t,n)))}function pt(t,e,n,r){if(t instanceof nt)return ct(t,it(e||i,n||null,r)),!0;if(y(t))return t.then(e,n,r),!0;if(h(t))try{var o=t.then;if(c(o))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,o,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function ft(t){t.h||(t.h=!0,tt(t.Zb,t))}function dt(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function vt(t,e,n,r){if(n==ou&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,yt(e,n,r);else try{e.c?e.g.call(e.f):yt(e,n,r)}catch(t){su.call(null,t)}w(au,e)}function yt(t,e,n){e==iu?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function gt(t){g.call(this,t)}function mt(){this.va=this.va,this.la=this.la}function _t(t){t.va||(t.va=!0,t.za(),0==uu)||t[Cs]||(t[Cs]=++Is)}function bt(t){return bt[" "](t),t}function wt(){var t=bs.document;return t?t.documentMode:void 0}function Et(t){return function(e,n){var r=wu;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=function(){for(var e=0,n=js(String(cu)).split("."),r=js(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=W(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||W(0==a[2].length,0==s[2].length)||W(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}()}(t)}function Ct(t,e){this.type=t,this.b=this.target=e,this.Mb=!0}function It(t,e){if(Ct.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var r=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(vu){t:{try{bt(e.nodeName);var o=!0;break t}catch(t){}o=!1}o||(e=null)}}else"mouseover"==r?e=t.fromElement:"mouseout"==r&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=n(t.pointerType)?t.pointerType:Su[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}function Tt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Pa=i,this.key=++ku,this.ta=this.Ka=!1}function St(t){t.ta=!0,t.listener=null,t.proxy=null,t.src=null,t.Pa=null}function Nt(t){this.src=t,this.a={},this.b=0}function kt(t,e){var n=e.type;n in t.a&&S(t.a[n],e)&&(St(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ta&&o.listener==e&&o.capture==!!n&&o.Pa==r)return i}return-1}function At(t,e,n,r,i){if(r&&r.once)Rt(t,e,n,r,i);else if(s(e))for(var o=0;o<e.length;o++)At(t,e[o],n,r,i);else n=Vt(n),t&&t[Nu]?qt(t,e,n,h(r)?!!r.capture:!!r,i):Ot(t,e,n,!1,r,i)}function Ot(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=h(i)?!!i.capture:!!i,s=Ut(t);if(s||(t[Pu]=s=new Nt(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=jt,e=Cu?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)Tu||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Lt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Rt(t,e,n,r,i){if(s(e))for(var o=0;o<e.length;o++)Rt(t,e[o],n,r,i);else n=Vt(n),t&&t[Nu]?Ht(t,e,n,h(r)?!!r.capture:!!r,i):Ot(t,e,n,!0,r,i)}function Dt(t,e,n,r,i){if(s(e))for(var o=0;o<e.length;o++)Dt(t,e[o],n,r,i);else r=h(r)?!!r.capture:!!r,n=Vt(n),t&&t[Nu]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=Pt(o=t.a[e],n,r,i))&&(St(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&Ut(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Pt(e,n,r,i)),(n=-1<t?e[t]:null)&&xt(n))}function xt(t){if("number"!=typeof t&&t&&!t.ta){var e=t.src;if(e&&e[Nu])kt(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Lt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ut(e))?(kt(n,t),0==n.b&&(n.src=null,e[Pu]=null)):St(t)}}}function Lt(t){return t in Au?Au[t]:Au[t]="on"+t}function Mt(t,e,n,r){var i=!0;if((t=Ut(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ta&&(o=Ft(o,r),i=i&&!1!==o)}return i}function Ft(t,e){var n=t.listener,r=t.Pa||t.src;return t.Ka&&xt(t),n.call(r,e)}function jt(t,e){if(t.ta)return!0;if(Cu)return Ft(t,new It(e,this));if(!e)t:{e=["window","event"];for(var n=bs,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new It(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Mt(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Mt(r[i],t,!1,e),n=n&&o}return n}function Ut(t){return(t=t[Pu])instanceof Nt?t:null}function Vt(t){return c(t)?t:(t[Ou]||(t[Ou]=function(e){return t.handleEvent(e)}),t[Ou])}function Wt(){mt.call(this),this.u=new Nt(this),(this.Sb=this).Xa=null}function qt(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function Ht(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function Bt(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ta&&a.capture==n){var s=a.listener,u=a.Pa||a.src;a.Ka&&kt(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function Qt(t,e,n){if(c(t))n&&(t=f(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=f(t.handleEvent,t)}return 2147483647<Number(e)?-1:bs.setTimeout(t,e||0)}function Kt(t){var e=null;return new nt(function(n,r){-1==(e=Qt(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw bs.clearTimeout(e),t})}function Gt(t){if(t.U&&"function"==typeof t.U)return t.U();if(n(t))return t.split("");if(u(t)){for(var e=[],r=t.length,i=0;i<r;i++)e.push(t[i]);return e}for(i in e=[],r=0,t)e[r++]=t[i];return e}function zt(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.U||"function"!=typeof t.U){if(u(t)||n(t)){var e=[];t=t.length;for(var r=0;r<t;r++)e.push(r);return e}for(var i in e=[],r=0,t)e[r++]=i;return e}}function Yt(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Yt)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Xt(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];$t(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)$t(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function $t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jt(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Jt?(this.h=void 0!==e?e:t.h,Zt(this,t.f),this.i=t.i,this.b=t.b,te(this,t.l),this.c=t.c,ee(this,ve(t.a)),this.g=t.g):t&&(n=String(t).match(Ru))?(this.h=!!e,Zt(this,n[1]||"",!0),this.i=ae(n[2]||""),this.b=ae(n[3]||"",!0),te(this,n[4]),this.c=ae(n[5]||"",!0),ee(this,n[6]||"",!0),this.g=ae(n[7]||"")):(this.h=!!e,this.a=new ce(null,this.h))}function Zt(t,e,n){t.f=n?ae(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function te(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function ee(t,e,n){e instanceof ce?(t.a=e,function(t,e){e&&!t.f&&(he(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(pe(this,e),de(this,n,t))},t)),t.f=e}(t.a,t.h)):(n||(e=se(e,Mu)),t.a=new ce(e,t.h))}function ne(t,e,n){t.a.set(e,n)}function re(t,e){return t.a.get(e)}function ie(t){return t instanceof Jt?new Jt(t):new Jt(t,void 0)}function oe(t,e){var n=new Jt(null,void 0);return Zt(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function ae(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function se(t,e,r){return n(t)?(t=encodeURI(t).replace(e,ue),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ue(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}function ce(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function he(t){t.a||(t.a=new Yt,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];!function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c))}function le(t){var e=zt(t);if(void 0===e)throw Error("Keys are undefined");var n=new ce(null,void 0);t=Gt(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];s(o)?de(n,i,o):n.add(i,o)}return n}function pe(t,e){he(t),e=ye(t,e),$t(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,$t((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Xt(t)))}function fe(t,e){return he(t),e=ye(t,e),$t(t.a.b,e)}function de(t,e,n){pe(t,e),0<n.length&&(t.c=null,t.a.set(ye(t,e),P(n)),t.b+=n.length)}function ve(t){var e=new ce;return e.c=t.c,t.a&&(e.a=new Yt(t.a),e.b=t.b),e}function ye(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ge(t){var e=document;return n(t)?e.getElementById(t):t}function me(t,e){A(e,function(e,n){e&&"object"==typeof e&&e.qa&&(e=e.pa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Uu.hasOwnProperty(n)?t.setAttribute(Uu[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}function _e(t,e,r){var i=arguments,o=document,a=String(i[0]),c=i[1];if(!ju&&c&&(c.name||c.type)){if(a=["<",a],c.name&&a.push(' name="',$(c.name),'"'),c.type){a.push(' type="',$(c.type),'"');var l={};D(l,c),delete l.type,c=l}a.push(">"),a=a.join("")}return a=o.createElement(a),c&&(n(c)?a.className=c:s(c)?a.className=c.join(" "):me(a,c)),2<i.length&&function(t,e,r){function i(r){r&&e.appendChild(n(r)?t.createTextNode(r):r)}for(var o=2;o<r.length;o++){var a=r[o];!u(a)||h(a)&&0<a.nodeType?i(a):ks(be(a)?P(a):a,i)}}(o,a,i),a}function be(t){if(t&&"number"==typeof t.length){if(h(t))return"function"==typeof t.item||"string"==typeof t.item;if(c(t))return"function"==typeof t.item}return!1}function we(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(s(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Ce(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Ce(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Ee,t,e),e.join("")}function Ee(){}function Ce(t,e){e.push('"',t.replace(Wu,function(t){var e=Vu[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Vu[t]=e),e}),'"')}function Ie(){var t=je();return pu&&!!bu&&11==bu||/Edge\/\d+/.test(t)}function Te(){return bs.window&&bs.window.location.href||self&&self.location&&self.location.href||""}function Se(t,e){e=e||bs.window;var n="about:blank";t&&(n=H(B(t)).toString()),e.location.href=n}function Ne(t){return!!((t=(t||je()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ke(t){t=t||bs.window;try{t.close()}catch(t){}}function Pe(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=je().toLowerCase(),r&&(e.target=r,V(n,"crios/")&&(e.target="_blank")),Me(je())==Bu&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof q?n:B(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((K("iPhone")&&!K("iPod")&&!K("iPad")||K("iPad")||K("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(I(a=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof q||e instanceof q||(e="object"==typeof e&&e.qa?e.pa():String(e),Gs.test(e)||(e="about:invalid#zClosurez"),e=Q(e)),a.href=H(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=H(e).toString(),a&&(du&&V(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Y('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+$(t)+'">'),a.document.write(z(t)),a.document.close())):(a=r.open(H(e).toString(),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}function Ae(){var t=null;return new nt(function(e){"complete"==bs.document.readyState?e():(t=function(){e()},Rt(window,"load",t))}).s(function(e){throw Dt(window,"load",t),e})}function Oe(t){return t=t||je(),!("file:"!==He()&&"ionic:"!==He()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Re(){var t=bs.window;try{return!(!t||t==t.top)}catch(t){return!1}}function De(){return void 0!==bs.WorkerGlobalScope&&"function"==typeof bs.importScripts}function xe(){return t.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t.INTERNAL.hasOwnProperty("node")?"Node":De()?"Worker":"Browser"}function Le(){var t=xe();return"ReactNative"===t||"Node"===t}function Me(t){var e=t.toLowerCase();return V(e,"opera/")||V(e,"opr/")||V(e,"opios/")?"Opera":V(e,"iemobile")?"IEMobile":V(e,"msie")||V(e,"trident/")?"IE":V(e,"edge/")?"Edge":V(e,"firefox/")?Bu:V(e,"silk/")?"Silk":V(e,"blackberry")?"Blackberry":V(e,"webos")?"Webos":!V(e,"safari/")||V(e,"chrome/")||V(e,"crios/")||V(e,"android")?!V(e,"chrome/")&&!V(e,"crios/")||V(e,"edge/")?V(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Qu:"Safari"}function Fe(t,e){e=e||[];var n,r=[],i={};for(n in Ku)i[Ku[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=xe())?r=Me(i=je()):"Worker"===r&&(r=Me(i=je())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function je(){return bs.navigator&&bs.navigator.userAgent||""}function Ue(t,e){t=t.split("."),e=e||bs;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ve(){try{var t=bs.localStorage,e=ze();if(t)return t.setItem(e,"1"),t.removeItem(e),!Ie()||!!bs.indexedDB}catch(t){return De()&&!!bs.indexedDB}return!1}function We(){return(qe()||"chrome-extension:"===He()||Oe())&&!Le()&&Ve()&&!De()}function qe(){return"http:"===He()||"https:"===He()}function He(){return bs.location&&bs.location.protocol||null}function Be(t){return!Ne(t=t||je())&&Me(t)!=Bu}function Qe(t){return void 0===t?null:we(t)}function Ke(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ge(t){if(null!==t)return JSON.parse(t)}function ze(t){return t||Math.floor(1e9*Math.random()).toString()}function Ye(t){return"Safari"!=Me(t=t||je())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Xe(){var t=bs.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function $e(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=je(),e=xe(),this.b=Ne(t)||"ReactNative"===e}function Je(){var t=bs.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Ze(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function tn(){return!(!Ue("fireauth.oauthhelper",bs)&&!Ue("fireauth.iframe",bs))}function en(t){zu[t]||(zu[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}function nn(t,e,n){Gu?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function rn(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&nn(t,n,e[n])}function on(t){var e={};return rn(e,t),e}function an(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)nn(e,n,an(t[n]));return e}function sn(t){var e={},n=t[$u],r=t[Ju];if(!(t=t[Zu])||t!=Xu&&!n)throw Error("Invalid provider user info!");e[ec]=r||null,e[tc]=n||null,nn(this,rc,t),nn(this,nc,an(e))}function un(t,e){this.code=ic+t,this.message=e||oc[t]||""}function cn(t){var e=t&&t.code;return e?new un(e.substring(ic.length),t.message):null}function hn(t){var e=re(t=ie(t),ac)||null,n=re(t,sc)||null,r=re(t,hc)||null;if(r=r&&pc[r]||null,!e||!n||!r)throw new un("argument-error",ac+", "+sc+"and "+hc+" are required in a valid action code URL.");rn(this,{apiKey:e,operation:r,code:n,continueUrl:re(t,uc)||null,languageCode:re(t,cc)||null,tenantId:re(t,lc)||null})}function ln(t){try{return new hn(t)}catch(t){return null}}function pn(t){var e=t[gc];if(void 0===e)throw new un("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new un("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[fc];if(n&&"object"==typeof n){e=n[bc];var r=n[mc];if(n=n[_c],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new un("argument-error",mc+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new un("argument-error",_c+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new un("argument-error",bc+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new un("missing-android-pkg-name")}}else if(void 0!==n)throw new un("argument-error",fc+" property must be a non null object when specified.");if(this.f=null,(e=t[yc])&&"object"==typeof e){if("string"==typeof(e=e[wc])&&e.length)this.f=e;else if(void 0!==e)throw new un("argument-error",wc+" property must be a non empty string when specified.")}else if(void 0!==e)throw new un("argument-error",yc+" property must be a non null object when specified.");if(void 0!==(e=t[vc])&&"boolean"!=typeof e)throw new un("argument-error",vc+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[dc])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new un("argument-error",dc+" property must be a non empty string when specified.");this.i=t||null}function fn(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}function dn(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Cc[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ec){Ec={},Cc={};for(var t=0;t<65;t++)Ec[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),62<=(Cc[Ec[t]]=t)&&(Cc["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function vn(t){this.f=t.sub,this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.c=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function yn(t){return(t=gn(t))&&t.sub&&t.iss&&t.aud&&t.exp?new vn(t):null}function gn(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(dn(t))}catch(t){}return null}function mn(t){for(var e in Tc)if(Tc[e].id===t)return{firebaseEndpoint:(t=Tc[e]).cb,secureTokenEndpoint:t.ib};return null}function _n(t){for(var e in kc)if(kc[e].Fa==t)return kc[e];return null}function bn(t){var e={};e["facebook.com"]=Cn,e["google.com"]=Tn,e["github.com"]=In,e["twitter.com"]=Sn;var n=t&&t[Ac];try{if(n)return e[n]?new e[n](t):new En(t);if(void 0!==t[Pc])return new wn(t)}catch(t){}return null}function wn(t){var e=t[Ac];if(!e&&t[Pc]){var n=yn(t[Pc]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),nn(this,"providerId",e),nn(this,"isNewUser",n)}function En(t){wn.call(this,t),nn(this,"profile",an((t=Ge(t.rawUserInfo||"{}"))||{}))}function Cn(t){if(En.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function In(t){if(En.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");nn(this,"username",this.profile&&this.profile.login||null)}function Tn(t){if(En.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Sn(t){if(En.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");nn(this,"username",t.screenName||null)}function Nn(t){var e=ie(t),n=re(e,"link"),r=re(ie(n),"link");return re(ie(e=re(e,"deep_link_id")),"link")||e||r||n||t}function kn(){}function Pn(t,e){return t.then(function(t){if(t[zc]){var n=yn(t[zc]);if(!n||e!=n.f)throw new un("user-mismatch");return t}throw new un("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==ic+"user-not-found"?new un("user-mismatch"):t})}function An(t,e){if(!e)throw new un("internal-error","failed to construct a credential");this.a=e,nn(this,"providerId",t),nn(this,"signInMethod",t)}function On(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Rn(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new An(t.providerId,t.pendingToken)}catch(t){}return null}function Dn(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&nn(this,"idToken",e.idToken),e.accessToken&&nn(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&nn(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new un("internal-error","failed to construct a credential");nn(this,"accessToken",e.oauthToken),nn(this,"secret",e.oauthTokenSecret)}nn(this,"providerId",t),nn(this,"signInMethod",n)}function xn(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:le(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Ln(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Dn(t.providerId,e,t.signInMethod)}catch(t){}}return null}function Mn(t,e){this.Fc=e||[],rn(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.eb=(_n(t)||{}).Ea||null,this.bb=null}function Fn(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new un("argument-error",'SAML provider IDs must be prefixed with "saml."');Mn.call(this,t,[])}function jn(t){Mn.call(this,t,Nc),this.a=[]}function Un(){jn.call(this,"facebook.com")}function Vn(t){if(!t)throw new un("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return h(t)&&(e=t.accessToken),(new Un).credential({accessToken:e})}function Wn(){jn.call(this,"github.com")}function qn(t){if(!t)throw new un("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return h(t)&&(e=t.accessToken),(new Wn).credential({accessToken:e})}function Hn(){jn.call(this,"google.com"),this.ya("profile")}function Bn(t,e){var n=t;return h(t)&&(n=t.idToken,e=t.accessToken),(new Hn).credential({idToken:n,accessToken:e})}function Qn(){Mn.call(this,"twitter.com",Sc)}function Kn(t,e){var n=t;if(h(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new un("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Dn("twitter.com",n,"twitter.com")}function Gn(t,e,n){this.a=t,this.c=e,nn(this,"providerId","password"),nn(this,"signInMethod",n===Yn.EMAIL_LINK_SIGN_IN_METHOD?Yn.EMAIL_LINK_SIGN_IN_METHOD:Yn.EMAIL_PASSWORD_SIGN_IN_METHOD)}function zn(t){return t&&t.email&&t.password?new Gn(t.email,t.password,t.signInMethod):null}function Yn(){rn(this,{providerId:"password",isOAuthProvider:!1})}function Xn(t,e){if(!(e=$n(e)))throw new un("argument-error","Invalid email link!");return new Gn(t,e.code,Yn.EMAIL_LINK_SIGN_IN_METHOD)}function $n(t){return(t=ln(t=Nn(t)))&&t.operation===Xu?t:null}function Jn(t){if(!(t.Va&&t.Ua||t.Ha&&t.ba))throw new un("internal-error");this.a=t,nn(this,"providerId","phone"),nn(this,"signInMethod","phone")}function Zn(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return ks(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Jn(e)}return null}function tr(t){return t.a.Ha&&t.a.ba?{temporaryProof:t.a.Ha,phoneNumber:t.a.ba}:{sessionInfo:t.a.Va,code:t.a.Ua}}function er(e){try{this.a=e||t.auth()}catch(e){throw new un("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}rn(this,{providerId:"phone",isOAuthProvider:!1})}function nr(t,e){if(!t)throw new un("missing-verification-id");if(!e)throw new un("missing-verification-code");return new Jn({Va:t,Ua:e})}function rr(t){if(t.temporaryProof&&t.phoneNumber)return new Jn({Ha:t.temporaryProof,ba:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Bn(o,n);case"facebook.com":return Vn(n);case"github.com":return qn(n);case"twitter.com":return Kn(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new An(e,a):new Dn(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new jn(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function ir(t){if(!t.isOAuthProvider)throw new un("invalid-oauth-provider")}function or(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new un("invalid-auth-event");if(this.g&&this.a)throw new un("invalid-auth-event");if(this.g&&!this.f)throw new un("invalid-auth-event")}function ar(t){return(t=t||{}).type?new or(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&cn(t.error),t.postBody,t.tenantId):null}function sr(){this.b=null,this.a=[]}function ur(t){var e="unauthorized-domain",n=void 0,r=ie(t);t=r.b,"chrome-extension"==(r=r.f)?n=X("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=X("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",un.call(this,e,n)}function cr(t,e,n){un.call(this,t,n),(t=e||{}).Ab&&nn(this,"email",t.Ab),t.ba&&nn(this,"phoneNumber",t.ba),t.credential&&nn(this,"credential",t.credential),t.Qb&&nn(this,"tenantId",t.Qb)}function hr(t){if(t.code){var e=t.code||"";0==e.indexOf(ic)&&(e=e.substring(ic.length));var n={credential:rr(t),Qb:t.tenantId};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.ba=t.phoneNumber;else if(!n.credential)return new un(e,t.message||void 0);return new cr(e,n,t.message)}return null}function lr(){}function pr(t){return t.c||(t.c=t.b())}function fr(){}function dr(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function vr(){}function yr(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=f(this.fc,this),this.a.onerror=f(this.Ib,this),this.a.onprogress=f(this.gc,this),this.a.ontimeout=f(this.kc,this)}function gr(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function mr(t,e,n){this.reset(t,e,n,void 0,void 0)}function _r(t){this.f=t,this.b=this.c=this.a=null}function br(t,e){this.name=t,this.value=e}function wr(t){var e;if(Uc||(Uc=new _r(""),(jc[""]=Uc).c=Lc),!(e=jc[t])){e=new _r(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=wr(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,jc[t]=e}return e}function Er(t,e){t&&t.log(Mc,e,void 0)}function Cr(t){this.f=t}function Ir(t){Wt.call(this),this.o=t,this.readyState=Vc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=wr("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}function Tr(t){t.c.read().then(t.ec.bind(t)).catch(t.Oa.bind(t))}function Sr(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,Nr(t)}function Nr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function kr(t){Wt.call(this),this.headers=new Yt,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Wc,this.v=this.P=!1}function Pr(t,e,r,i,o){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);r=r?r.toUpperCase():"GET",t.l=e,t.h="",t.O=r,t.I=!1,t.c=!0,t.a=t.B?t.B.a():Oc.a(),t.w=pr(t.B?t.B:Oc),t.a.onreadystatechange=f(t.Lb,t);try{Er(t.b,jr(t,"Opening Xhr")),t.J=!0,t.a.open(r,String(e),!0),t.J=!1}catch(e){return Er(t.b,jr(t,"Error opening Xhr: "+e.message)),void Or(t,e)}e=i||"";var a=new Yt(t.headers);o&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(u(t)||n(t))ks(t,e,void 0);else for(var r=zt(t),i=Gt(t),o=i.length,a=0;a<o;a++)e.call(void 0,i[a],r&&r[a],t)}(o,function(t,e){a.set(e,t)}),o=function(t){t:{for(var e=Ar,r=t.length,i=n(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&e.call(void 0,i[o],o,t)){e=o;break t}e=-1}return e<0?null:n(t)?t.charAt(e):t[e]}(a.X()),i=bs.FormData&&e instanceof bs.FormData,!T(Hc,r)||o||i||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.P&&(t.a.withCredentials=t.P);try{Lr(t),0<t.g&&(t.v=function(t){return pu&&Et(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Er(t.b,jr(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=f(t.Ia,t)):t.o=Qt(t.Ia,t.g,t)),Er(t.b,jr(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Er(t.b,jr(t,"Send error: "+e.message)),Or(t,e)}}function Ar(t){return"content-type"==t.toLowerCase()}function Or(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Rr(t),xr(t)}function Rr(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Dr(t){if(t.c&&void 0!==_s)if(t.w[1]&&4==Mr(t)&&2==Fr(t))Er(t.b,jr(t,"Local request error detected and ignored"));else if(t.i&&4==Mr(t))Qt(t.Lb,0,t);else if(t.dispatchEvent("readystatechange"),4==Mr(t)){Er(t.b,jr(t,"Request complete")),t.c=!1;try{var e,n=Fr(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Ru)[1]||null;if(!o&&bs.self&&bs.self.location){var a=bs.self.location.protocol;o=a.substr(0,a.length-1)}i=!qc.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var s=2<Mr(t)?t.a.statusText:""}catch(e){Er(t.b,"Can not get status: "+e.message),s=""}t.h=s+" ["+Fr(t)+"]",Rr(t)}}finally{xr(t)}}}function xr(t,e){if(t.a){Lr(t);var n=t.a,r=t.w[0]?i:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Dc,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Lr(t){t.a&&t.v&&(t.a.ontimeout=null),t.o&&(bs.clearTimeout(t.o),t.o=null)}function Mr(t){return t.a?t.a.readyState:0}function Fr(t){try{return 2<Mr(t)?t.a.status:-1}catch(t){return-1}}function jr(t,e){return e+" ["+t.O+" "+t.l+" "+Fr(t)+"]"}function Ur(t){var e=Yr;this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function Vr(t,e,n){t.a=!0,t.c=n,t.f=!e,Br(t)}function Wr(t){if(t.a){if(!t.u)throw new Qr(t);t.u=!1}}function qr(t,e,n,r){t.g.push([e,n,r]),t.a&&Br(t)}function Hr(t){return As(t.g,function(t){return c(t[1])})}function Br(t){if(t.h&&t.a&&Hr(t)){var e=t.h,n=Bc[e];n&&(bs.clearTimeout(n.a),delete Bc[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.o,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(y(e)||"function"==typeof bs.Promise&&e instanceof bs.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Hr(t)||(n=!0)}}t.c=e,r&&(s=f(t.m,t,!0),r=f(t.m,t,!1),e instanceof Ur?(qr(e,s,r),e.w=!0):e.then(s,r)),n&&(e=new Gr(e),Bc[e.a]=e,t.h=e.a)}function Qr(){g.call(this)}function Kr(){g.call(this)}function Gr(t){this.a=bs.setTimeout(f(this.c,this),0),this.b=t}function zr(t){var e,n=document,r=F(t).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ia:void 0},a=new Ur(o);return e=window.setTimeout(function(){Xr(i,!0);var t=new $r(Kc,"Timeout reached for loading script "+r);Wr(a),Vr(a,!1,t)},5e3),o.Ia=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Xr(i,!1,e),Wr(a),Vr(a,!0,null))},i.onerror=function(){Xr(i,!0,e);var t=new $r(Qc,"Error while loading script "+r);Wr(a),Vr(a,!1,t)},D(o={},{type:"text/javascript",charset:"UTF-8"}),me(i,o),function(t,e){I(t,"HTMLScriptElement"),t.src=F(e),null===Es&&(Es=(e=(e=bs.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&ws.test(e)?e:""),(e=Es)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Yr(){if(this&&this.Nb){var t=this.Nb;t&&"SCRIPT"==t.tagName&&Xr(t,!0,this.Ia)}}function Xr(t,e,n){null!=n&&bs.clearTimeout(n),t.onload=i,t.onerror=i,t.onreadystatechange=i,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}function $r(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),g.call(this,n),this.code=t}function Jr(t){this.f=t}function Zr(e,n,r){if(this.c=e,e=n||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||Yc,this.g=R(e.secureTokenHeaders||Xc),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||$c,this.a=R(e.firebaseHeaders||Jc),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==xe(),!(r=bs.XMLHttpRequest||r&&t.INTERNAL.node&&t.INTERNAL.node.XMLHttpRequest)&&!De())throw new un("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,De()?this.f=new Cr(self):Le()?this.f=new Jr(r):this.f=new vr,this.b=null}function ti(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ei(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ni(t,e,n,r,i,o,a){(t=function(){var t=je();return!((t=Me(t)!=Qu?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&t<30||pu&&bu&&!(9<bu))}()||De()?f(t.o,t):(Gc=Gc||new nt(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(bs[th]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){qr(t,null,e,void 0)}(zr(j(Zc,{onload:th})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)}),f(t.m,t)))(e,n,r,i,o,a)}function ri(t){if(!n(t=t.email)||!Hu.test(t))throw new un("invalid-email")}function ii(t){"email"in t&&ri(t)}function oi(t){if(!t[zc])throw new un("internal-error")}function ai(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new un("internal-error")}else{if(!t.sessionInfo)throw new un("missing-verification-id");if(!t.code)throw new un("missing-verification-code")}}function si(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new un("internal-error")}function ui(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&fe(t=new ce(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ci(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=hr(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=hr(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=hr(t)):t.errorMessage&&(e=vi(t.errorMessage)),e)throw e;if(!t[zc])throw new un("internal-error")}function hi(t,e){return e.returnIdpCredential=!0,di(t,wh,e)}function li(t,e){return e.returnIdpCredential=!0,di(t,Ch,e)}function pi(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,di(t,Eh,e)}function fi(t){if(!t.oobCode)throw new un("invalid-action-code")}function di(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.V))return at(new un("internal-error"));var r,i=e.Kb||"POST";return ot(n).then(e.D).then(function(){return e.T&&(n.returnSecureToken=!0),e.F&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o){var a=ie(t.h+e);ne(a,"key",t.c),o&&ne(a,"cb",Ts().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&ne(a,u,r[u]);return new nt(function(e,o){ni(t,a.toString(),function(t){t?t.error?o(yi(t,i||{})):e(t):o(new un("network-request-failed"))},n,s?void 0:we(Ke(r)),t.a,t.i.get())})}(t,e.endpoint,i,n,e.Yb,e.wb||!1)}).then(function(t){return r=t,e.Ra?e.Ra(n,r):r}).then(e.K).then(function(){if(!e.fa)return r;if(!(e.fa in r))throw new un("internal-error");return r[e.fa]})}function vi(t){return yi({error:{errors:[{message:t}],code:400,message:t}})}function yi(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new un(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",D(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new un(r[i],e);return!e&&t&&(e=Qe(t)),new un("internal-error",e)}function gi(t){this.b=t,this.a=null,this.gb=function(t){return(Rh=Rh||new nt(function(t,e){function n(){Xe(),Ue("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Xe(),e(Error("Network Error"))},timeout:Ah.get()})}if(Ue("gapi.iframes.Iframe"))t();else if(Ue("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();bs[r]=function(){Ue("gapi.load")?n():e(Error("Network Error"))},ot(zr(r=j(Ph,{onload:r}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw Rh=null,t})).then(function(){return new nt(function(e,n){Ue("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ue("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Oh.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}function mi(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=oe(this.i,"/__/auth/iframe"),ne(this.a,"apiKey",this.g),ne(this.a,"appName",this.h),this.b=null,this.c=[]}function _i(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function bi(e){try{return t.app(e).auth().Ca()}catch(e){return[]}}function wi(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Ei(t){var e=Te();return function(t){return di(t,dh,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=ie(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(a=0==o.indexOf("chrome-extension://")?ie(o).b==a&&"chrome-extension"==s:("http"==s||"https"==s)&&(qu.test(o)?a==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)))){t=!0;break t}}t=!1}if(!t)throw new ur(Te())})}function Ci(t){return t.l||(t.l=Ae().then(function(){if(!t.o){var e=t.c,n=t.h,r=bi(t.b),i=new mi(t.u,t.f,t.b);i.f=e,i.b=n,i.c=P(r||[]),t.o=i.toString()}t.i=new gi(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.gb.then(function(){t.a.register("authEvent",e,Ue("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=ar(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ot(n)}return n.status="ERROR",ot(n)})}(t)})),t.l}function Ii(t){return t.m||(t.v=t.c?Fe(t.c,bi(t.b)):null,t.m=new Zr(t.f,mn(t.h),t.v)),t.m}function Ti(t,e,n,r,i,o,a,s,u,c,h){return(t=new _i(t,e,n,r,i)).l=o,t.g=a,t.i=s,t.b=R(u||null),t.f=c,t.nb(h).toString()}function Si(e){if(this.a=e||t.INTERNAL.reactNative&&t.INTERNAL.reactNative.AsyncStorage,!this.a)throw new un("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ni(t){this.b=t,this.a={},this.f=f(this.c,this)}function ki(t,e,n){O(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Pi(t){this.a=t}function Ai(t){this.c=t,this.b=!1,this.a=[]}function Oi(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return at(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new nt(function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))}).then(function(e){return Ri(t,c),e}).s(function(e){throw Ri(t,c),e})}function Ri(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),N(t.a,function(t){return t==e})}}function Di(){if(!Mi())throw new un("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=bs.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;De()&&self?(this.l=function(){var t=De()?self:null;if(ks(xh,function(n){n.b==t&&(e=n)}),!e){var e=new Ni(t);xh.push(e)}return e}(),ki(this.l,"keyChanged",function(e,n){return Wi(t).then(function(e){return 0<e.length&&ks(t.a,function(t){t(e)}),{keyProcessed:T(e,n.key)}})}),ki(this.l,"ping",function(){return ot(["keyChanged"])})):function(){var t=bs.navigator;return t&&t.serviceWorker?ot().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):ot(null)}().then(function(e){(t.h=e)&&(t.g=new Ai(new Pi(e)),Oi(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&T(e[0].value,"keyChanged")&&(t.o=!0)}).s(function(){}))})}function xi(t){return new nt(function(e,n){var r=t.u.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new nt(function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return xi(t)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function Li(t){return t.m||(t.m=xi(t)),t.m}function Mi(){try{return!!bs.indexedDB}catch(t){return!1}}function Fi(t){return t.objectStore("firebaseLocalStorage")}function ji(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ui(t){return new nt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Vi(t,e){return t.g&&t.h&&function(){var t=bs.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Oi(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):ot()}function Wi(t){return Li(t).then(function(t){var e=Fi(ji(t,!1));return e.getAll?Ui(e.getAll()):new nt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r})}function qi(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Hi(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ot().then(function(){if(Mi()){var t=ze(),r="__sak"+t;return Dh=Dh||new Di,(n=Dh).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.S(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.$(function(t){ks(e.a,function(e){e(t)})}),t})}function Bi(){this.a={},this.type="inMemory"}function Qi(){if(!function(){var e="Node"==xe();if(!(e=Ki()||e&&t.INTERNAL.node&&t.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==xe())throw new un("internal-error","The LocalStorage compatibility library was not found.");throw new un("web-storage-unsupported")}this.a=Ki()||t.INTERNAL.node.localStorage,this.type="localStorage"}function Ki(){try{var t=bs.localStorage,e=ze();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Gi(){this.type="nullStorage"}function zi(){if(!function(){var e="Node"==xe();if(!(e=Yi()||e&&t.INTERNAL.node&&t.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==xe())throw new un("internal-error","The SessionStorage compatibility library was not found.");throw new un("web-storage-unsupported")}this.a=Yi()||t.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Yi(){try{var t=bs.sessionStorage,e=ze();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Xi(){var t={};t.Browser=Fh,t.Node=jh,t.ReactNative=Uh,t.Worker=Vh,this.a=t[xe()]}function $i(){var t=!(Ye(je())||!Re()),e=Be(),n=Ve();this.m=t,this.h=e,this.l=n,this.a={},t=Lh=Lh||new Xi;try{this.g=!Ie()&&tn()||!bs.indexedDB?new t.a.C:new Hi(De()?new Bi:new t.a.C)}catch(t){this.g=new Bi,this.h=!0}try{this.i=new t.a.Ta}catch(t){this.i=new Bi}this.u=new Bi,this.f=f(this.Pb,this),this.b={}}function Ji(){return Mh=Mh||new $i}function Zi(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function to(t,e){return"firebase:"+t.name+(e?":"+e:"")}function eo(t,e,n){return n=to(e,n),"local"==e.C&&(t.b[n]=null),Zi(t,e.C).S(n)}function no(t){t.c&&(clearInterval(t.c),t.c=null)}function ro(t){this.a=t,this.b=Ji()}function io(){this.a=Ji()}function oo(t,e){this.b=Bh,this.f=bs.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=bs.Int32Array?new Int32Array(64):Array(64),void 0!==qh||(qh=bs.Int32Array?new Int32Array(Yh):Yh),this.reset()}function ao(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|qh[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+p|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function so(t,e,r){void 0===r&&(r=e.length);var i=0,o=t.c;if(n(e))for(;i<r;)t.f[o++]=e.charCodeAt(i++),o==t.b&&(ao(t),o=0);else{if(!u(e))throw Error("message must be string or array");for(;i<r;){var a=e[i++];if(!("number"==typeof a&&0<=a&&a<=255&&a==(0|a)))throw Error("message must be a byte array");t.f[o++]=a,o==t.b&&(ao(t),o=0)}}t.c=o,t.g+=r}function uo(){oo.call(this,8,Xh)}function co(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=i||null,this.h=e+":"+n,this.v=new io,this.g=new ro(this.h),this.f=null,this.b=[],this.a=this.c=null}function ho(t){return new un("invalid-cordova-configuration",t)}function lo(t){var e=new uo;so(e,t),t=[];var n=8*e.g;e.c<56?so(e,zh,56-e.c):so(e,zh,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ao(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return Ps(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function po(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function fo(t){return t.f||(t.f=t.ia().then(function(){return new nt(function(e){t.Aa(function n(r){return e(r),t.Na(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),vo(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Nn(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ge(re(o=ie(i),"firebaseError")||null))?cn(o):null)?new or(r.c,r.b,null,null,o,null,r.R()):new or(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}po(t,i)})}var n=new or("unknown",null,null,null,new un("no-auth-event")),r=!1,i=Kt(500).then(function(){return vo(t).then(function(){r||po(t,n)})}),o=bs.handleOpenURL;bs.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ue("BuildInfo.packageName",bs).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Rc=Rc||new sr,function(t){var e=Rc;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ue("universalLinks.subscribe",bs))&&t(null,e.b))}(e)}(t)})})),t.f}function vo(t){var e=null;return function(t){return t.b.get(Hh,t.a).then(function(t){return ar(t)})}(t.g).then(function(n){return e=n,eo((n=t.g).b,Hh,n.a)}).then(function(){return e})}function yo(t){this.a=t,this.b=Ji()}function go(t){return eo(t.b,$h,t.a)}function mo(t,e,n){this.i={},this.v=0,this.B=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=f(this.o,this),this.b=new Po,this.w=new xo,this.g=new yo(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=_o(this.B,this.u,this.m,Ic)}function _o(e,n,r,i){var o=t.SDK_VERSION||null;return Oe()?new co(e,n,r,o,i):new wi(e,n,r,o,i)}function bo(t){t.f||(t.f=!0,t.a.Aa(t.l));var e=t.a;return t.a.ia().s(function(n){throw t.a==e&&t.reset(),n})}function wo(t){t.a.Ob()&&bo(t).s(function(e){var n=new or("unknown",null,null,null,new un("operation-not-supported-in-this-environment"));To(e)&&t.o(n)}),t.a.Jb()||Ao(t.b)}function Eo(t,e){T(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get($h,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?go(t.g).then(function(){bo(t).s(function(e){var n=new or("unknown",null,null,null,new un("operation-not-supported-in-this-environment"));To(e)&&t.o(n)})}):wo(t)}).s(function(){wo(t)})}function Co(t,e){N(t.h,function(t){return t==e})}function Io(t,e,n,r,i,o,a){return t.a.Db(e,n,r,function(){t.f||(t.f=!0,t.a.Aa(t.l))},function(){t.reset()},i,o,a)}function To(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function So(t,e,n,r,i){var o;return function(t){return t.b.set($h,"pending",t.a)}(t.g).then(function(){return t.a.Eb(e,n,r,i).s(function(e){if(To(e))throw new un("operation-not-supported-in-this-environment");return o=e,go(t.g).then(function(){throw o})}).then(function(){return t.a.Rb()?new nt(function(){}):go(t.g).then(function(){return t.oa()}).then(function(){}).s(function(){})})})}function No(t,e,n,r,i){return t.a.Fb(r,function(t){e.ja(n,null,t,i)},Jh.get())}function ko(t,e,n){var r=e+":"+n;return tl[r]||(tl[r]=new mo(t,e,n)),tl[r]}function Po(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Ao(t){t.g||(t.g=!0,Do(t,!1,null,null))}function Oo(t){t.g&&!t.i&&Do(t,!1,null,null)}function Ro(t,e){if(t.b=function(){return ot(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Do(t,e,n,r){e?r?function(t,e){if(t.b=function(){return at(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Ro(t,n):Ro(t,{user:null}),t.f=[],t.c=[]}function xo(){}function Lo(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(t){this.vb=t},enumerable:!1})}function Mo(t,e){this.a=e,nn(this,"verificationId",t)}function Fo(t,e,n,r){return new er(t).Wa(e,n).then(function(t){return new Mo(t,r)})}function jo(t){var e=gn(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new un("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");rn(this,{token:t,expirationTime:Ze(1e3*e.exp),authTime:Ze(1e3*e.auth_time),issuedAtTime:Ze(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Uo(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Vo(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Wo(t){this.f=t,this.b=this.a=null,this.c=0}function qo(t,e){var n=e[zc],r=e.refreshToken;e=Ho(e.expiresIn),t.b=n,t.c=e,t.a=r}function Ho(t){return Ts()+1e3*parseInt(t,10)}function Bo(t,e){return function(t,e){return new nt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ni(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(yi(t)):t.access_token&&t.refresh_token?n(t):r(new un("internal-error")):r(new un("network-request-failed"))},"POST",le(e).toString(),t.g,t.u.get()):r(new un("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=Ho(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function Qo(t,e){this.a=t||null,this.b=e||null,rn(this,{lastSignInTime:Ze(e||null),creationTime:Ze(t||null)})}function Ko(t,e,n,r,i,o){rn(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Go(t,e){for(var n in Ct.call(this,t),e)this[n]=e[n]}function zo(e,n,r){this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=t.SDK_VERSION?Fe(t.SDK_VERSION):null,this.a=new Zr(this.l,mn(Ic),e),this.b=new Wo(this.a),ea(this,n[zc]),qo(this.b,n),nn(this,"refreshToken",this.b.a),ia(this,r||{}),Wt.call(this),this.J=!1,this.o&&We()&&(this.i=ko(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(t){return new Uo(function(){return t.G(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Ts()-3e5;return 0<e?e:0})}(this),this.W=f(this.Ja,this);var i=this;this.ga=null,this.xa=function(t){i.ua(t.g)},this.Z=null,this.P=[],this.wa=function(t){Xo(i,t.c)},this.Y=null}function Yo(t,e){t.Z&&Dt(t.Z,"languageCodeChanged",t.xa),(t.Z=e)&&At(e,"languageCodeChanged",t.xa)}function Xo(e,n){e.P=n,ei(e.a,t.SDK_VERSION?Fe(t.SDK_VERSION,e.P):null)}function $o(t,e){t.Y&&Dt(t.Y,"frameworkChanged",t.wa),(t.Y=e)&&At(e,"frameworkChanged",t.wa)}function Jo(e){try{return t.app(e.m).auth()}catch(t){throw new un("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Zo(t){t.B||t.w.b||(t.w.start(),Dt(t,"tokenChanged",t.W),At(t,"tokenChanged",t.W))}function ta(t){Dt(t,"tokenChanged",t.W),t.w.stop()}function ea(t,e){t.ma=e,nn(t,"_lat",e)}function na(t){for(var e=[],n=0;n<t.O.length;n++)e.push(t.O[n](t));return ut(e).then(function(){return t})}function ra(t){t.i&&!t.J&&(t.J=!0,Eo(t.i,t))}function ia(t,e){rn(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Qo(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function oa(){}function aa(t){return ot().then(function(){if(t.B)throw new un("app-deleted")})}function sa(t){return Ps(t.providerData,function(t){return t.providerId})}function ua(t,e){e&&(ca(t,e.providerId),t.providerData.push(e))}function ca(t,e){N(t.providerData,function(t){return t.providerId==e})}function ha(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&nn(t,e,n)}function la(t,e){t!=e&&(rn(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?nn(t,"metadata",function(t){return new Qo(t.a,t.b)}(e.metadata)):nn(t,"metadata",new Qo),ks(e.providerData,function(e){ua(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),nn(t,"refreshToken",t.b.a))}function pa(t){return t.G().then(function(e){var n=t.isAnonymous;return function(t,e){return di(t.a,hh,{idToken:e}).then(f(t.zc,t))}(t,e).then(function(){return n||ha(t,"isAnonymous",!1),e})})}function fa(t,e){e[zc]&&t.ma!=e[zc]&&(qo(t.b,e),t.dispatchEvent(new Go("tokenChanged")),ea(t,e[zc]),ha(t,"refreshToken",t.b.a))}function da(t,e){return pa(t).then(function(){if(T(sa(t),e))return na(t).then(function(){throw new un("provider-already-linked")})})}function va(t,e,n){return on({user:t,credential:rr(e),additionalUserInfo:e=bn(e),operationType:n})}function ya(t,e){return fa(t,e),t.reload().then(function(){return t})}function ga(e,n,r,i,o){if(!We())return at(new un("operation-not-supported-in-this-environment"));if(e.h&&!o)return at(e.h);var a=_n(r.providerId),s=ze(e.uid+":::"),u=null;(!Be()||Re())&&e.o&&r.isOAuthProvider&&(u=Ti(e.o,e.l,e.m,n,r,null,s,t.SDK_VERSION||null,null,null,e.tenantId));var c=Pe(u,a&&a.sa,a&&a.ra);return i=i().then(function(){if(_a(e),!o)return e.G().then(function(){})}).then(function(){return Io(e.i,c,n,r,s,!!u,e.tenantId)}).then(function(){return new nt(function(t,r){e.ja(n,null,new un("cancelled-popup-request"),e.g||null),e.f=t,e.v=r,e.g=s,e.c=No(e.i,e,n,c,s)})}).then(function(t){return c&&ke(c),t?on(t):null}).s(function(t){throw c&&ke(c),t}),ba(e,i,o)}function ma(t,e,n,r,i){if(!We())return at(new un("operation-not-supported-in-this-environment"));if(t.h&&!i)return at(t.h);var o=null,a=ze(t.uid+":::");return r=r().then(function(){if(_a(t),!i)return t.G().then(function(){})}).then(function(){return t.ca=a,na(t)}).then(function(e){return t.da&&(e=(e=t.da).b.set(el,t.A(),e.a)),e}).then(function(){return So(t.i,e,n,a,t.tenantId)}).s(function(e){if(o=e,t.da)return Ca(t.da);throw o}).then(function(){if(o)throw o}),ba(t,r,i)}function _a(t){if(!t.i||!t.J){if(t.i&&!t.J)throw new un("internal-error");throw new un("auth-domain-config-required")}}function ba(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),at(t.h)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Go("userInvalidated")),t.h=e),e})}(t,e,n);return t.I.push(r),r.ka(function(){S(t.I,r)}),r}function wa(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[zc]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-Ts())/1e3;var r=new zo(e,n,t);return t.providerData&&ks(t.providerData,function(t){t&&ua(r,on(t))}),t.redirectEventId&&(r.ca=t.redirectEventId),r}function Ea(t){this.a=t,this.b=Ji()}function Ca(t){return eo(t.b,el,t.a)}function Ia(t){this.a=t,this.b=Ji(),this.c=null,this.f=function(t){var e=Sa("local"),n=Sa("session"),r=Sa("none");return function(t,e,n){var r=to(e,n),i=Zi(t,e.C);return t.get(e,n).then(function(o){var a=null;try{a=Ge(bs.localStorage.getItem(r))}catch(o){}if(a&&!o)return bs.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&bs.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(nl,t.a).then(function(t){return t?Sa(t):e})})})}).then(function(e){return t.c=e,Ta(t,e.C)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(Sa("local"),this.a,f(this.g,this))}function Ta(t,e){var n,r=[];for(n in Wh)Wh[n]!==e&&r.push(eo(t.b,Sa(Wh[n]),t.a));return r.push(eo(t.b,nl,t.a)),function(t){return new nt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)st(t[s],d(o,s),a);else e(i)})}(r)}function Sa(t){return{name:"authUser",C:t}}function Na(t,e){return Aa(t,function(){return t.b.set(t.c,e.A(),t.a)})}function ka(t){return Aa(t,function(){return eo(t.b,t.c,t.a)})}function Pa(t,e){return Aa(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),wa(t||{})})})}function Aa(t,e){return t.f=t.f.then(e,e),t.f}function Oa(e){if(this.l=!1,nn(this,"settings",new Lo),nn(this,"app",e),!Ua(this).options||!Ua(this).options.apiKey)throw new un("invalid-api-key");e=t.SDK_VERSION?Fe(t.SDK_VERSION):null,this.b=new Zr(Ua(this).options&&Ua(this).options.apiKey,mn(Ic),e),this.O=[],this.m=[],this.J=[],this.Ub=t.INTERNAL.createSubscribe(f(this.oc,this)),this.W=void 0,this.Vb=t.INTERNAL.createSubscribe(f(this.pc,this)),Fa(this,null),this.h=new Ia(Ua(this).options.apiKey+":"+Ua(this).name),this.w=new Ea(Ua(this).options.apiKey+":"+Ua(this).name),this.Y=Ha(this,function(t){var e=Ua(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(el,t.a).then(function(t){return t&&e&&(t.authDomain=e),wa(t||{})})}(t.w,Ua(t).options.authDomain).then(function(e){return(t.B=e)&&(e.da=t.w),Ca(t.w)});return Ha(t,e)}(t).then(function(){return Pa(t.h,e)}).then(function(e){return e?(e.da=t.w,t.B&&(t.B.ca||null)==(e.ca||null)?e:e.reload().then(function(){return Na(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:ka(t.h)})):null}).then(function(e){Fa(t,e||null)});return Ha(t,n)}(this)),this.i=Ha(this,function(t){return t.Y.then(function(){return La(t)}).s(function(){}).then(function(){if(!t.l)return t.ma()}).s(function(){}).then(function(){if(!t.l){t.ga=!0;var e=t.h;e.b.addListener(Sa("local"),e.a,t.ma)}})}(this)),this.ga=!1,this.ma=f(this.Nc,this),this.ub=f(this.aa,this),this.wa=f(this.bc,this),this.xa=f(this.mc,this),this.Ja=f(this.nc,this),this.a=null,function(t){var e=Ua(t).options.authDomain,n=Ua(t).options.apiKey;e&&We()&&(t.Tb=t.Y.then(function(){if(!t.l){if(t.a=ko(e,n,Ua(t).name),Eo(t.a,t),Va(t)&&ra(Va(t)),t.B){ra(t.B);var r=t.B;r.ua(t.ha()),Yo(r,t),Xo(r=t.B,t.I),$o(r,t),t.B=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=f(this.delete,this),this.INTERNAL.logFramework=f(this.vc,this),this.o=0,Wt.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ha()},set:function(t){this.ua(t)},enumerable:!1}),t.Z=null,Object.defineProperty(t,"ti",{get:function(){return this.R()},set:function(t){this.nb(t)},enumerable:!1}),t.P=null}(this),this.I=[]}function Ra(t){Ct.call(this,"languageCodeChanged"),this.g=t}function Da(t){Ct.call(this,"frameworkChanged"),this.c=t}function xa(t){return t.Tb||at(new un("auth-domain-config-required"))}function La(t){if(!We())return at(new un("operation-not-supported-in-this-environment"));var e=xa(t).then(function(){return t.a.oa()}).then(function(t){return t?on(t):null});return Ha(t,e)}function Ma(t,e){var n={};return n.apiKey=Ua(t).options.apiKey,n.authDomain=Ua(t).options.authDomain,n.appName=Ua(t).name,t.Y.then(function(){return function(t,e,n,r){var i=new zo(t,e);return n&&(i.da=n),r&&Xo(i,r),i.reload().then(function(){return i})}(n,e,t.w,t.Ca())}).then(function(e){return Va(t)&&e.uid==Va(t).uid?la(Va(t),e):(Fa(t,e),ra(e)),t.aa(e)}).then(function(){qa(t)})}function Fa(t,e){Va(t)&&(function(t,e){N(t.O,function(t){return t==e})}(Va(t),t.ub),Dt(Va(t),"tokenChanged",t.wa),Dt(Va(t),"userDeleted",t.xa),Dt(Va(t),"userInvalidated",t.Ja),ta(Va(t))),e&&(e.O.push(t.ub),At(e,"tokenChanged",t.wa),At(e,"userDeleted",t.xa),At(e,"userInvalidated",t.Ja),0<t.o&&Zo(e)),nn(t,"currentUser",e),e&&(e.ua(t.ha()),Yo(e,t),Xo(e,t.I),$o(e,t))}function ja(t,e){var n=null,r=null;return Ha(t,e.then(function(e){return n=rr(e),r=bn(e),Ma(t,e)}).then(function(){return on({user:Va(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function Ua(t){return t.app}function Va(t){return t.currentUser}function Wa(t){return Va(t)&&Va(t)._lat||null}function qa(t){if(t.ga){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Wa(t));if(t.W!==t.getUid()&&t.J.length)for(t.W=t.getUid(),e=0;e<t.J.length;e++)t.J[e]&&t.J[e](Wa(t))}}function Ha(t,e){return t.O.push(e),e.ka(function(){S(t.O,e)}),e}function Ba(){}function Qa(){this.a={},this.b=1e12}function Ka(t,e){return(e=Ga(e))&&t.a[e]||null}function Ga(t){return(t=void 0===t?1e12:t)?t.toString():null}function za(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ge(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():At(this.f,"click",this.i)}function Ya(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Xa(){}function $a(){this.b=bs.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}function Ja(t,e,n,r,i,o,a){if(nn(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=e,this.g=null,a=a?il=il||new Xa:sl=sl||new $a,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[hl])throw new un("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[ll],!bs.document)throw new un("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ge(e)||!this.i&&ge(e).hasChildNodes())throw new un("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Zr(t,o||null,i||null),this.v=r||function(){return null};var s=this;this.l=[];var u=this.a[ul];this.a[ul]=function(t){if(Za(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=Ue(u,bs);"function"==typeof e&&e(t)}};var c=this.a[cl];this.a[cl]=function(){if(Za(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=Ue(c,bs);"function"==typeof t&&t()}}}function Za(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function ts(t,e){return t.h.push(e),e.ka(function(){S(t.h,e)}),e}function es(t){if(t.B)throw new un("internal-error","RecaptchaVerifier instance has been destroyed.")}function ns(e,n,r){var i=!1;try{this.b=r||t.app()}catch(e){throw new un("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new un("invalid-api-key");r=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ca()}catch(e){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}a=t.SDK_VERSION?Fe(t.SDK_VERSION,a):null,Ja.call(this,r,e,n,function(){try{var t=o.b.auth().ha()}catch(e){t=null}return t},a,mn(Ic),i)}function rs(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new un("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].N(n[i])&&!o){if(e=e[i],i<0||i>=pl.length)throw new un("internal-error","Argument validator received an unsupported number of arguments.");n=pl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.M+".";break t}r=null}}if(r)throw new un("argument-error",t+" failed: "+r)}function is(t,e){return{name:t||"",M:"a valid string",optional:!!e,N:n}}function os(t,e){return{name:t||"",M:"a boolean",optional:!!e,N:r}}function as(t,e){return{name:t||"",M:"a valid object",optional:!!e,N:h}}function ss(t,e){return{name:t||"",M:"a function",optional:!!e,N:c}}function us(t,e){return{name:t||"",M:"null",optional:!!e,N:a}}function cs(t){return{name:t?t+"Credential":"credential",M:t?"a valid "+t+" credential":"a valid credential",optional:!1,N:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.na||!n)}}}function hs(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(t){return!!(t&&n(t.type)&&c(t.verify))}}}function ls(t,e,n,r){return{name:n||"",M:t.M+" or "+e.M,optional:!!r,N:function(n){return t.N(n)||e.N(n)}}}function ps(t,e){for(var n in e){var r=e[n].name;t[r]=vs(r,t[n],e[n].j)}}function fs(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:d(function(t){return this[t]},n),set:d(function(t,e,n,r){rs(t,[n],[r],!0),this[e]=r},r,n,e[n].Za),enumerable:!0})}}function ds(t,e,n,r){t[e]=vs(e,n,r)}function vs(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return rs(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}var ys,gs="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},ms=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);!function(t,e){if(e){var n=ms;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&gs(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function n(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function i(t){return t instanceof n?t:new n(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var o=ms.setTimeout;r.prototype.c=function(t){o(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},n.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},n.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof n)this.o(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},n.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.v(e,t):this.h(t)},n.prototype.g=function(t){this.i(2,t)},n.prototype.h=function(t){this.i(1,t)},n.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},n.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return n.prototype.o=function(t){var e=this.f();t.La(e.resolve,e.reject)},n.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},n.prototype.then=function(t,e){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(e){o(e)}}:e}var i,o,a=new n(function(t,e){i=t,o=e});return this.La(r(t,i),r(e,o)),a},n.prototype.catch=function(t){return this.then(void 0,t)},n.prototype.La=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},n.resolve=i,n.reject=function(t){return new n(function(e,n){n(t)})},n.race=function(t){return new n(function(n,r){for(var o=e(t),a=o.next();!a.done;a=o.next())i(a.value).La(n,r)})},n.all=function(t){var r=e(t),o=r.next();return o.done?i([]):new n(function(t,e){for(var n=[],a=0;n.push(void 0),a++,i(o.value).La(function(e){return function(r){n[e]=r,0==--a&&t(n)}}(n.length-1),e),!(o=r.next()).done;);})},n});var _s=_s||{},bs=this||self,ws=/^[\w+/_-]+[=]{0,2}$/,Es=null,Cs="closure_uid_"+(1e9*Math.random()>>>0),Is=0,Ts=Date.now||function(){return+new Date};v(g,Error),g.prototype.name="CustomError",v(m,g),m.prototype.name="AssertionError",b.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Ss=new b(function(){return new C},function(t){t.reset()});E.prototype.add=function(t,e){var n=Ss.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},C.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},C.prototype.reset=function(){this.next=this.b=this.a=null};var Ns=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(n(t))return n(e)&&1==e.length?t.indexOf(e,0):-1;for(var r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},ks=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,r){for(var i=t.length,o=n(t)?t.split(""):t,a=0;a<i;a++)a in o&&e.call(r,o[a],a,t)},Ps=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var r=t.length,i=Array(r),o=n(t)?t.split(""):t,a=0;a<r;a++)a in o&&(i[a]=e.call(void 0,o[a],a,t));return i},As=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var r=t.length,i=n(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&e.call(void 0,i[o],o,t))return!0;return!1},Os="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");x.prototype.qa=!0,x.prototype.pa=function(){return this.a},x.prototype.toString=function(){return"Const{"+this.a+"}"};var Rs={},Ds={},xs=new x(Ds,"");M.prototype.qa=!0,M.prototype.pa=function(){return this.a.toString()},M.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ls=/%{(\w+)}/g,Ms=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Fs={},js=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Us=/&/g,Vs=/</g,Ws=/>/g,qs=/"/g,Hs=/'/g,Bs=/\x00/g,Qs=/[\x00&<>"']/;q.prototype.qa=!0,q.prototype.pa=function(){return this.a.toString()},q.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ks,Gs=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,zs={};Q("about:blank");t:{var Ys=bs.navigator;if(Ys){var Xs=Ys.userAgent;if(Xs){Ks=Xs;break t}}Ks=""}G.prototype.qa=!0,G.prototype.pa=function(){return this.a.toString()},G.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var $s={};Y("<!DOCTYPE html>");var Js,Zs,tu=Y("");Y("<br>");var eu=!1,nu=new E,ru=0,iu=2,ou=3;rt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var au=new b(function(){return new rt},function(t){t.reset()});nt.prototype.then=function(t,e,n){return ht(this,c(t)?t:null,c(e)?e:null,n)},nt.prototype.$goog_Thenable=!0,(ys=nt.prototype).ka=function(t,e){return(t=it(t,t,e)).c=!0,ct(this,t),this},ys.s=function(t,e){return ht(this,null,t,e)},ys.cancel=function(t){this.a==ru&&tt(function(){!function t(e,n){if(e.a==ru)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==ru&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):dt(r),vt(r,o,ou,n)))}e.c=null}else lt(e,ou,n)}(this,new gt(t))},this)},ys.Oc=function(t){this.a=ru,lt(this,iu,t)},ys.Pc=function(t){this.a=ru,lt(this,ou,t)},ys.Zb=function(){for(var t;t=dt(this);)vt(this,t,this.a,this.i);this.h=!1};var su=J;v(gt,g);var uu=0;mt.prototype.va=!(gt.prototype.name="cancel"),mt.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},bt[" "]=i;var cu,hu,lu=K("Opera"),pu=K("Trident")||K("MSIE"),fu=K("Edge"),du=fu||pu,vu=K("Gecko")&&!(V(Ks.toLowerCase(),"webkit")&&!K("Edge"))&&!(K("Trident")||K("MSIE"))&&!K("Edge"),yu=V(Ks.toLowerCase(),"webkit")&&!K("Edge");t:{var gu="",mu=(hu=Ks,vu?/rv:([^\);]+)(\)|;)/.exec(hu):fu?/Edge\/([\d\.]+)/.exec(hu):pu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(hu):yu?/WebKit\/(\S+)/.exec(hu):lu?/(?:Version)[ \/]?(\S+)/.exec(hu):void 0);if(mu&&(gu=mu?mu[1]:""),pu){var _u=wt();if(null!=_u&&_u>parseFloat(gu)){cu=String(_u);break t}}cu=gu}var bu,wu={};bu=bs.document&&pu?wt():void 0;var Eu=Object.freeze||function(t){return t},Cu=!pu||9<=Number(bu),Iu=pu&&!Et("9"),Tu=function(){if(!bs.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{bs.addEventListener("test",i,e),bs.removeEventListener("test",i,e)}catch(t){}return t}();Ct.prototype.preventDefault=function(){this.Mb=!1},v(It,Ct);var Su=Eu({2:"touch",3:"pen",4:"mouse"});It.prototype.preventDefault=function(){It.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Iu)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},It.prototype.f=function(){return this.a};var Nu="closure_listenable_"+(1e6*Math.random()|0),ku=0;Nt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Pt(t,e,r,i);return-1<a?(e=t[a],n||(e.Ka=!1)):((e=new Tt(e,this.src,o,!!r,i)).Ka=n,t.push(e)),e};var Pu="closure_lm_"+(1e6*Math.random()|0),Au={},Ou="__closure_events_fn_"+(1e9*Math.random()>>>0);v(Wt,mt),Wt.prototype[Nu]=!0,Wt.prototype.addEventListener=function(t,e,n,r){At(this,t,e,n,r)},Wt.prototype.removeEventListener=function(t,e,n,r){Dt(this,t,e,n,r)},Wt.prototype.dispatchEvent=function(t){var e,r=this.Xa;if(r)for(e=[];r;r=r.Xa)e.push(r);r=this.Sb;var i=t.type||t;if(n(t))t=new Ct(t,r);else if(t instanceof Ct)t.target=t.target||r;else{var o=t;D(t=new Ct(i,r),o)}if(o=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.b=e[a];o=Bt(s,i,!0,t)&&o}if(o=Bt(s=t.b=r,i,!0,t)&&o,o=Bt(s,i,!1,t)&&o,e)for(a=0;a<e.length;a++)o=Bt(s=t.b=e[a],i,!1,t)&&o;return o},Wt.prototype.za=function(){if(Wt.qb.za.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)St(n[r]);delete e.a[t],e.b--}}this.Xa=null},(ys=Yt.prototype).U=function(){Xt(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ys.X=function(){return Xt(this),this.a.concat()},ys.clear=function(){this.b={},this.c=this.a.length=0},ys.get=function(t,e){return $t(this.b,t)?this.b[t]:e},ys.set=function(t,e){$t(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ys.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ru=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Jt.prototype.toString=function(){var t=[],e=this.f;e&&t.push(se(e,Du,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(se(e,Du,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(se(n,"/"==n.charAt(0)?Lu:xu,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",se(n,Fu)),t.join("")},Jt.prototype.resolve=function(t){var e=new Jt(this),n=!!t.f;n?Zt(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)te(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(V(i,"./")||V(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?ee(e,ve(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Du=/[#\/\?@]/g,xu=/[#\?:]/g,Lu=/[#\?]/g,Mu=/[#\?@]/g,Fu=/#/g;(ys=ce.prototype).add=function(t,e){he(this),this.c=null,t=ye(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ys.clear=function(){this.a=this.c=null,this.b=0},ys.forEach=function(t,e){he(this),this.a.forEach(function(n,r){ks(n,function(n){t.call(e,n,r,this)},this)},this)},ys.X=function(){he(this);for(var t=this.a.U(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ys.U=function(t){he(this);var e=[];if(n(t))fe(this,t)&&(e=k(e,this.a.get(ye(this,t))));else{t=this.a.U();for(var r=0;r<t.length;r++)e=k(e,t[r])}return e},ys.set=function(t,e){return he(this),this.c=null,fe(this,t=ye(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ys.get=function(t,e){return t&&0<(t=this.U(t)).length?String(t[0]):e},ys.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ju=!pu||9<=Number(bu),Uu={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Vu={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Wu=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,qu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hu=/^[^@]+@[^@]+$/,Bu="Firefox",Qu="Chrome",Ku={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};$e.prototype.get=function(){var t=bs.navigator;return!t||"boolean"!=typeof t.onLine||!qe()&&"chrome-extension:"!==He()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Gu,zu={};try{var Yu={};Object.defineProperty(Yu,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Yu,"abcd",{configurable:!0,enumerable:!0,value:2}),Gu=2==Yu.abcd}catch(ys){Gu=!1}var Xu="EMAIL_SIGNIN",$u="email",Ju="newEmail",Zu="requestType",tc="email",ec="fromEmail",nc="data",rc="operation";v(un,Error),un.prototype.A=function(){return{code:this.code,message:this.message}},un.prototype.toJSON=function(){return this.A()};var ic="auth/",oc={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},ac="apiKey",sc="oobCode",uc="continueUrl",cc="languageCode",hc="mode",lc="tenantId",pc={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Xu,verifyEmail:"VERIFY_EMAIL"},fc="android",dc="dynamicLinkDomain",vc="handleCodeInApp",yc="iOS",gc="url",mc="installApp",_c="minimumVersion",bc="packageName",wc="bundleId",Ec=null,Cc=null;vn.prototype.R=function(){return this.c},vn.prototype.g=function(){return this.b};var Ic,Tc={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};Ic=mn("__EID__")?"__EID__":void 0;var Sc="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Nc=["client_id","response_type","scope","redirect_uri","state"],kc={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Nc},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Nc},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Nc},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Sc},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}},Pc="idToken",Ac="providerId";v(En,wn),v(Cn,En),v(In,En),v(Tn,En),v(Sn,En),An.prototype.na=function(t){return hi(t,On(this))},An.prototype.b=function(t,e){var n=On(this);return n.idToken=e,li(t,n)},An.prototype.f=function(t,e){return Pn(pi(t,On(this)),e)},An.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Dn.prototype.na=function(t){return hi(t,xn(this))},Dn.prototype.b=function(t,e){var n=xn(this);return n.idToken=e,li(t,n)},Dn.prototype.f=function(t,e){return Pn(pi(t,xn(this)),e)},Dn.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Mn.prototype.Ga=function(t){return this.zb=R(t),this},v(Fn,Mn),v(jn,Mn),jn.prototype.ya=function(t){return T(this.a,t)||this.a.push(t),this},jn.prototype.Hb=function(){return P(this.a)},jn.prototype.credential=function(t,e){var n;if(!(n=h(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new un("argument-error","credential failed: must provide the ID token and/or the access token.");return new Dn(this.providerId,n,this.providerId)},v(Un,jn),nn(Un,"PROVIDER_ID","facebook.com"),nn(Un,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),v(Wn,jn),nn(Wn,"PROVIDER_ID","github.com"),nn(Wn,"GITHUB_SIGN_IN_METHOD","github.com"),v(Hn,jn),nn(Hn,"PROVIDER_ID","google.com"),nn(Hn,"GOOGLE_SIGN_IN_METHOD","google.com"),v(Qn,Mn),nn(Qn,"PROVIDER_ID","twitter.com"),nn(Qn,"TWITTER_SIGN_IN_METHOD","twitter.com"),Gn.prototype.na=function(t){return this.signInMethod==Yn.EMAIL_LINK_SIGN_IN_METHOD?di(t,uh,{email:this.a,oobCode:this.c}):di(t,Th,{email:this.a,password:this.c})},Gn.prototype.b=function(t,e){return this.signInMethod==Yn.EMAIL_LINK_SIGN_IN_METHOD?di(t,ch,{idToken:e,email:this.a,oobCode:this.c}):di(t,_h,{idToken:e,email:this.a,password:this.c})},Gn.prototype.f=function(t,e){return Pn(this.na(t),e)},Gn.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},rn(Yn,{PROVIDER_ID:"password"}),rn(Yn,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),rn(Yn,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Jn.prototype.na=function(t){return t.Wa(tr(this))},Jn.prototype.b=function(t,e){var n=tr(this);return n.idToken=e,di(t,Nh,n)},Jn.prototype.f=function(t,e){var n=tr(this);return n.operation="REAUTH",Pn(t=di(t,kh,n),e)},Jn.prototype.A=function(){var t={providerId:"phone"};return this.a.Va&&(t.verificationId=this.a.Va),this.a.Ua&&(t.verificationCode=this.a.Ua),this.a.Ha&&(t.temporaryProof=this.a.Ha),this.a.ba&&(t.phoneNumber=this.a.ba),t},er.prototype.Wa=function(t,e){var r=this.a.b;return ot(e.verify()).then(function(i){if(!n(i))throw new un("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return di(t,gh,e)}(r,{phoneNumber:t,recaptchaToken:i}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new un("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},rn(er,{PROVIDER_ID:"phone"}),rn(er,{PHONE_SIGN_IN_METHOD:"phone"}),or.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},or.prototype.R=function(){return this.h},or.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Oc,Rc=null;v(ur,un),v(cr,un),cr.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.A();return e&&D(t,e),t},cr.prototype.toJSON=function(){return this.A()},lr.prototype.c=null,v(fr,lr),fr.prototype.a=function(){var t=dr(this);return t?new ActiveXObject(t):new XMLHttpRequest},fr.prototype.b=function(){var t={};return dr(this)&&(t[0]=!0,t[1]=!0),t},Oc=new fr,v(vr,lr),vr.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new yr;throw Error("Unsupported browser")},vr.prototype.b=function(){return{}},(ys=yr.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},ys.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},ys.abort=function(){this.a.abort()},ys.setRequestHeader=function(){},ys.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},ys.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,gr(this,4)},ys.Ib=function(){this.status=500,this.response=this.responseText="",gr(this,4)},ys.kc=function(){this.Ib()},ys.gc=function(){this.status=200,gr(this,1)},ys.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},mr.prototype.a=null,mr.prototype.reset=function(t,e,n,r,i){delete this.a},br.prototype.toString=function(){return this.name};var Dc=new br("SEVERE",1e3),xc=new br("WARNING",900),Lc=new br("CONFIG",700),Mc=new br("FINE",500);_r.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(_("Root logger has no level set."),null)}(this).value)for(c(e)&&(e=e()),t=new mr(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Fc,jc={},Uc=null;v(Cr,lr),Cr.prototype.a=function(){return new Ir(this.f)},Cr.prototype.b=(Fc={},function(){return Fc}),v(Ir,Wt);var Vc=0;(ys=Ir.prototype).open=function(t,e){if(this.readyState!=Vc)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,Nr(this)},ys.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.Oa.bind(this))},ys.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Sr(this,!1)),this.readyState=Vc},ys.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,Nr(this)),this.a&&(this.readyState=3,Nr(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==bs.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Tr(this)):t.text().then(this.ic.bind(this),this.Oa.bind(this)))))},ys.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Sr(this,!0):Nr(this),3==this.readyState&&Tr(this)}},ys.ic=function(t){this.a&&(this.response=this.responseText=t,Sr(this,!0))},ys.hc=function(t){this.a&&(this.response=t,Sr(this,!0))},ys.Oa=function(t){var e=this.h;e&&e.log(xc,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&Sr(this,!0)},ys.setRequestHeader=function(t,e){this.i.append(t,e)},ys.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(xc,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},ys.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(xc,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},v(kr,Wt);var Wc="";kr.prototype.b=wr("goog.net.XhrIo");var qc=/^https?$/i,Hc=["POST","PUT"];(ys=kr.prototype).Ia=function(){void 0!==_s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Er(this.b,jr(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},ys.abort=function(){this.a&&this.c&&(Er(this.b,jr(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xr(this))},ys.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),xr(this,!0)),kr.qb.za.call(this)},ys.Lb=function(){this.va||(this.J||this.i||this.f?Dr(this):this.yc())},ys.yc=function(){Dr(this)},ys.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Wc:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Dc,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Er(this.b,"Can not get response: "+t.message),null}},Ur.prototype.cancel=function(t){if(this.a)this.c instanceof Ur&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):--e.l<=0&&e.cancel()}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new Kr(this),Wr(this),Vr(this,!1,t))}},Ur.prototype.m=function(t,e){this.i=!1,Vr(this,t,e)},Ur.prototype.then=function(t,e,n){var r,i,o=new nt(function(t,e){r=t,i=e});return qr(this,r,function(t){t instanceof Kr?o.cancel():i(t)}),o.then(t,e,n)},Ur.prototype.$goog_Thenable=!0,v(Qr,g),Qr.prototype.message="Deferred has already fired",Qr.prototype.name="AlreadyCalledError",v(Kr,g),Kr.prototype.message="Deferred was canceled",Kr.prototype.name="CanceledError",Gr.prototype.c=function(){throw delete Bc[this.a],this.b};var Bc={},Qc=0,Kc=1;v($r,g),v(Jr,lr),Jr.prototype.a=function(){return new this.f},Jr.prototype.b=function(){return{}};var Gc,zc="idToken",Yc=new $e(3e4,6e4),Xc={"Content-Type":"application/x-www-form-urlencoded"},$c=new $e(3e4,6e4),Jc={"Content-Type":"application/json"};Zr.prototype.R=function(){return this.b},Zr.prototype.o=function(t,e,n,r,i,o){if(De()&&(void 0===bs.fetch||void 0===bs.Headers||void 0===bs.Request))throw new un("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new kr(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}qt(a,"complete",function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Er(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),Ht(a,"ready",function(){s&&clearTimeout(s),_t(this)}),Ht(a,"timeout",function(){s&&clearTimeout(s),_t(this),e&&e(null)}),Pr(a,t,n,r,i)};var Zc=new x(Ds,"https://apis.google.com/js/client.js?onload=%{onload}"),th="__fcb"+Math.floor(1e6*Math.random()).toString();Zr.prototype.m=function(t,e,n,r,i){var o=this;Gc.then(function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Zr.prototype.ob=function(){return di(this,bh,{})},Zr.prototype.rb=function(t,e){return di(this,mh,{idToken:t,email:e})},Zr.prototype.sb=function(t,e){return di(this,_h,{idToken:t,password:e})};var eh={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};(ys=Zr.prototype).tb=function(t,e){var n={idToken:t},r=[];return A(eh,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),di(this,mh,n)},ys.kb=function(t,e){return D(t={requestType:"PASSWORD_RESET",email:t},e),di(this,fh,t)},ys.lb=function(t,e){return D(t={requestType:"EMAIL_SIGNIN",email:t},e),di(this,lh,t)},ys.jb=function(t,e){return D(t={requestType:"VERIFY_EMAIL",idToken:t},e),di(this,ph,t)},ys.Wa=function(t){return di(this,Sh,t)},ys.ab=function(t,e){return di(this,yh,{oobCode:t,newPassword:e})},ys.Ma=function(t){return di(this,rh,{oobCode:t})},ys.Ya=function(t){return di(this,nh,{oobCode:t})};var nh={endpoint:"setAccountInfo",D:fi,fa:"email",F:!0},rh={endpoint:"resetPassword",D:fi,K:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new un("internal-error")},F:!0},ih={endpoint:"signupNewUser",D:function(t){if(ri(t),!t.password)throw new un("weak-password")},K:oi,T:!0,F:!0},oh={endpoint:"createAuthUri",F:!0},ah={endpoint:"deleteAccount",V:["idToken"]},sh={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(t){if(!s(t.deleteProvider))throw new un("internal-error")}},uh={endpoint:"emailLinkSignin",V:["email","oobCode"],D:ri,K:oi,T:!0,F:!0},ch={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:ri,K:oi,T:!0},hh={endpoint:"getAccountInfo"},lh={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new un("internal-error");ri(t)},fa:"email",F:!0},ph={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new un("internal-error")},fa:"email",F:!0},fh={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new un("internal-error");ri(t)},fa:"email",F:!0},dh={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},vh={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(t){if(!t.recaptchaSiteKey)throw new un("internal-error")}},yh={endpoint:"resetPassword",D:fi,fa:"email",F:!0},gh={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},mh={endpoint:"setAccountInfo",V:["idToken"],D:ii,T:!0},_h={endpoint:"setAccountInfo",V:["idToken"],D:function(t){if(ii(t),!t.password)throw new un("weak-password")},K:oi,T:!0},bh={endpoint:"signupNewUser",K:oi,T:!0,F:!0},wh={endpoint:"verifyAssertion",D:si,Ra:ui,K:ci,T:!0,F:!0},Eh={endpoint:"verifyAssertion",D:si,Ra:ui,K:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new un("user-not-found");if(t.errorMessage)throw vi(t.errorMessage);if(!t[zc])throw new un("internal-error")},T:!0,F:!0},Ch={endpoint:"verifyAssertion",D:function(t){if(si(t),!t.idToken)throw new un("internal-error")},Ra:ui,K:ci,T:!0},Ih={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new un("invalid-custom-token")},K:oi,T:!0,F:!0},Th={endpoint:"verifyPassword",D:function(t){if(ri(t),!t.password)throw new un("wrong-password")},K:oi,T:!0,F:!0},Sh={endpoint:"verifyPhoneNumber",D:ai,K:oi,F:!0},Nh={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new un("internal-error");ai(t)},K:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",hr(t);oi(t)}},kh={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:ai,K:oi,F:!0},Ph=new x(Ds,"https://apis.google.com/js/api.js?onload=%{onload}"),Ah=new $e(3e4,6e4),Oh=new $e(5e3,15e3),Rh=null;mi.prototype.toString=function(){return this.f?ne(this.a,"v",this.f):pe(this.a.a,"v"),this.b?ne(this.a,"eid",this.b):pe(this.a.a,"eid"),this.c.length?ne(this.a,"fw",this.c.join(",")):pe(this.a.a,"fw"),this.a.toString()},_i.prototype.nb=function(t){return this.h=t,this},_i.prototype.toString=function(){var e=oe(this.o,"/__/auth/handler");if(ne(e,"apiKey",this.m),ne(e,"appName",this.c),ne(e,"authType",this.u),this.a.isOAuthProvider){var n=this.a;try{var r=t.app(this.c).auth().ha()}catch(e){r=null}for(var i in n.bb=r,ne(e,"providerId",this.a.providerId),r=Ke((n=this.a).zb))r[i]=r[i].toString();i=n.Fc,r=R(r);for(var o=0;o<i.length;o++){var a=i[o];a in r&&delete r[a]}n.eb&&n.bb&&!r[n.eb]&&(r[n.eb]=n.bb),O(r)||ne(e,"customParameters",Qe(r))}if("function"==typeof this.a.Hb&&(n=this.a.Hb()).length&&ne(e,"scopes",n.join(",")),this.l?ne(e,"redirectUrl",this.l):pe(e.a,"redirectUrl"),this.g?ne(e,"eventId",this.g):pe(e.a,"eventId"),this.i?ne(e,"v",this.i):pe(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!re(e,s)&&ne(e,s,this.b[s]);return this.h?ne(e,"tid",this.h):pe(e.a,"tid"),this.f?ne(e,"eid",this.f):pe(e.a,"eid"),(s=bi(this.c)).length&&ne(e,"fw",s.join(",")),e.toString()},(ys=wi.prototype).Fb=function(t,e,n){var r=new un("popup-closed-by-user"),i=new un("web-storage-unsupported"),o=this,a=!1;return this.ia().then(function(){(function(t){var e={type:"webStorageSupport"};return Ci(t).then(function(){return function(t,e){return t.gb.then(function(){return new nt(function(n){t.a.send(e.type,e,n,Ue("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&ke(t),e(i),a=!0)})}).s(function(){}).then(function(){if(!a)return function(t){return new nt(function(e){return function n(){Kt(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return Kt(n).then(function(){e(r)})})},ys.Ob=function(){var t=je();return!Be(t)&&!Ye(t)},ys.Jb=function(){return!1},ys.Db=function(t,e,n,r,i,o,a,s){if(!t)return at(new un("popup-blocked"));if(a&&!Be())return this.ia().s(function(e){ke(t),i(e)}),r(),ot();this.a||(this.a=Ei(Ii(this)));var u=this;return this.a.then(function(){var e=u.ia().s(function(e){throw ke(t),i(e),e});return r(),e}).then(function(){ir(n),a||Se(Ti(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,s),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},ys.Eb=function(t,e,n,r){this.a||(this.a=Ei(Ii(this)));var i=this;return this.a.then(function(){ir(e),Se(Ti(i.u,i.f,i.b,t,e,Te(),n,i.c,void 0,i.h,r))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},ys.ia=function(){var t=this;return Ci(this).then(function(){return t.i.gb}).s(function(){throw t.a=null,new un("network-request-failed")})},ys.Rb=function(){return!0},ys.Aa=function(t){this.g.push(t)},ys.Na=function(t){N(this.g,function(e){return e==t})},(ys=Si.prototype).get=function(t){return ot(this.a.getItem(t)).then(function(t){return t&&Ge(t)})},ys.set=function(t,e){return ot(this.a.setItem(t,Qe(e)))},ys.S=function(t){return ot(this.a.removeItem(t))},ys.$=function(){},ys.ea=function(){};var Dh,xh=[];Ni.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];ks(r,function(e){i.push(ot().then(function(){return e(t.origin,t.data.data)}))}),ut(i).then(function(r){var i=[];ks(r,function(t){i.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})}),ks(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},Pi.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ai.prototype.close=function(){for(;0<this.a.length;)Ri(this,this.a[0]);this.b=!0},(ys=Di.prototype).set=function(t,e){var n,r=!1,i=this;return Li(this).then(function(e){return Ui((e=Fi(ji(n=e,!0))).get(t))}).then(function(o){var a=Fi(ji(n,!0));return o?(o.value=e,Ui(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,Ui(a.add(o)))}).then(function(){return i.c[t]=e,Vi(i,t)}).ka(function(){r&&i.b--})},ys.get=function(t){return Li(this).then(function(e){return Ui(Fi(ji(e,!1)).get(t))}).then(function(t){return t&&t.value})},ys.S=function(t){var e=!1,n=this;return Li(this).then(function(r){return e=!0,n.b++,Ui(Fi(ji(r,!0)).delete(t))}).then(function(){return delete n.c[t],Vi(n,t)}).ka(function(){e&&n.b--})},ys.$=function(t){0==this.a.length&&function(t){qi(t),function e(){t.f=setTimeout(function(){t.i=Wi(t).then(function(e){0<e.length&&ks(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},ys.ea=function(t){N(this.a,function(e){return e==t}),0==this.a.length&&qi(this)},(ys=Hi.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},ys.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},ys.S=function(t){return this.b.then(function(e){return e.S(t)})},ys.$=function(t){this.a.push(t)},ys.ea=function(t){N(this.a,function(e){return e==t})},(ys=Bi.prototype).get=function(t){return ot(this.a[t])},ys.set=function(t,e){return this.a[t]=e,ot()},ys.S=function(t){return delete this.a[t],ot()},ys.$=function(){},ys.ea=function(){},(ys=Qi.prototype).get=function(t){var e=this;return ot().then(function(){return Ge(e.a.getItem(t))})},ys.set=function(t,e){var n=this;return ot().then(function(){var r=Qe(e);null===r?n.S(t):n.a.setItem(t,r)})},ys.S=function(t){var e=this;return ot().then(function(){e.a.removeItem(t)})},ys.$=function(t){bs.window&&At(bs.window,"storage",t)},ys.ea=function(t){bs.window&&Dt(bs.window,"storage",t)},(ys=Gi.prototype).get=function(){return ot(null)},ys.set=function(){return ot()},ys.S=function(){return ot()},ys.$=function(){},ys.ea=function(){},(ys=zi.prototype).get=function(t){var e=this;return ot().then(function(){return Ge(e.a.getItem(t))})},ys.set=function(t,e){var n=this;return ot().then(function(){var r=Qe(e);null===r?n.S(t):n.a.setItem(t,r)})},ys.S=function(t){var e=this;return ot().then(function(){e.a.removeItem(t)})},ys.$=function(){},ys.ea=function(){};var Lh,Mh,Fh={C:Qi,Ta:zi},jh={C:Qi,Ta:zi},Uh={C:Si,Ta:Gi},Vh={C:Qi,Ta:Gi},Wh={ad:"local",NONE:"none",cd:"session"};(ys=$i.prototype).get=function(t,e){return Zi(this,t.C).get(to(t,e))},ys.set=function(t,e,n){var r=to(t,n),i=this,o=Zi(this,t.C);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.C&&(i.b[r]=e)})},ys.addListener=function(t,e,n){t=to(t,e),this.l&&(this.b[t]=bs.localStorage.getItem(t)),O(this.a)&&(Zi(this,"local").$(this.f),this.h||(Ie()||!tn())&&bs.indexedDB||!this.l||function(t){no(t),t.c=setInterval(function(){for(var e in t.a){var n=bs.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new It({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Pb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},ys.removeListener=function(t,e,n){t=to(t,e),this.a[t]&&(N(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),O(this.a)&&(Zi(this,"local").ea(this.f),no(this))},ys.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=bs.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Zi(this,"local").ea(this.f):no(this),this.m)if(n=bs.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?bs.localStorage.setItem(e,r):bs.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===bs.localStorage.getItem(e)||(o.b[e]=bs.localStorage.getItem(e),o.$a(e))},pu&&bu&&10==bu&&bs.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else ks(t,f(this.$a,this))},ys.$a=function(t){this.a[t]&&ks(this.a[t],function(t){t()})};var qh,Hh={name:"authEvent",C:"local"};v(oo,function(){this.b=-1});for(var Bh=64,Qh=Bh-1,Kh=[],Gh=0;Gh<Qh;Gh++)Kh[Gh]=0;var zh=k(128,Kh);oo.prototype.reset=function(){this.g=this.c=0,this.a=bs.Int32Array?new Int32Array(this.h):P(this.h)};var Yh=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];v(uo,oo);var Xh=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];(ys=co.prototype).ia=function(){return this.Da?this.Da:this.Da=(Oe(void 0)?Ae().then(function(){return new nt(function(t,e){var n=bs.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):at(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Ue("universalLinks.subscribe",bs))throw ho("cordova-universal-links-plugin-fix is not installed");if(void 0===Ue("BuildInfo.packageName",bs))throw ho("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ue("cordova.plugins.browsertab.openUrl",bs))throw ho("cordova-plugin-browsertab is not installed");if("function"!=typeof Ue("cordova.InAppBrowser.open",bs))throw ho("cordova-plugin-inappbrowser is not installed")},function(){throw new un("cordova-not-ready")})},ys.Fb=function(t,e){return e(new un("operation-not-supported-in-this-environment")),ot()},ys.Db=function(){return at(new un("operation-not-supported-in-this-environment"))},ys.Rb=function(){return!1},ys.Ob=function(){return!0},ys.Jb=function(){return!0},ys.Eb=function(t,e,n,r){if(this.c)return at(new un("redirect-operation-pending"));var i=this,o=bs.document,a=null,s=null,u=null,c=null;return this.c=ot().then(function(){return ir(e),fo(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new or(e,r,null,o,new un("no-auth-event"),null,i),s=Ue("BuildInfo.packageName",bs);if("string"!=typeof s)throw new un("invalid-cordova-configuration");var u=Ue("BuildInfo.displayName",bs),c={};if(je().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!je().toLowerCase().match(/android/))return at(new un("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=lo(o),c.sessionId=o;var h=Ti(t.u,t.i,t.l,e,n,null,r,t.m,c,t.o,i);return t.ia().then(function(){var e=t.h;return t.v.a.set(Hh,a.A(),e)}).then(function(){var e=Ue("cordova.plugins.browsertab.isAvailable",bs);if("function"!=typeof e)throw new un("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Ue("cordova.plugins.browsertab.openUrl",bs)))throw new un("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ue("cordova.InAppBrowser.open",bs)))throw new un("invalid-cordova-configuration");e=je(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new nt(function(t,e){s=function(){var e=Ue("cordova.plugins.browsertab.close",bs);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(s),u=function(){a=a||Kt(2e3).then(function(){e(new un("redirect-cancelled-by-user"))})},c=function(){Je()&&u()},o.addEventListener("resume",u,!1),je().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return vo(i).then(function(){throw t})})}).ka(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Na(s),i.c=null})},ys.Aa=function(t){this.b.push(t),fo(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new or("unknown",null,null,null,new un("no-auth-event")),t(e))})},ys.Na=function(t){N(this.b,function(e){return e==t})};var $h={name:"pendingRedirect",C:"session"};mo.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=_o(this.B,this.u,this.m),this.i={}},mo.prototype.o=function(t){if(!t)throw new un("invalid-auth-event");if(6e5<=Ts()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=Ts())),e=!0;break}}return Ao(this.b),e};var Jh=new $e(2e3,1e4),Zh=new $e(3e4,6e4);mo.prototype.oa=function(){return this.b.oa()};var tl={};Po.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Po.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Do(this,!0,null,t.a),ot()):e.Ba(n,r)?function(t,e,n){n=n.Ba(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.R(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then(function(e){Do(t,s,e,null)}).s(function(e){Do(t,s,null,e)})}(this,t,e):at(new un("invalid-auth-event")):(Do(this,!1,null,null),ot())}else at(new un("invalid-auth-event"))},Po.prototype.oa=function(){var t=this;return new nt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new un("timeout");t.a&&t.a.cancel(),t.a=Kt(Zh.get()).then(function(){t.b||(t.g=!0,Do(t,!0,null,e))})}(t))})},xo.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ja(t.c,null,t.a,t.b),ot()):e.Ba(n,r)?function(t,e){var n=t.b,r=t.c;e.Ba(r,n)(t.g,t.f,t.R(),t.i).then(function(t){e.ja(r,t,null,n)}).s(function(t){e.ja(r,null,t,n)})}(t,e):at(new un("invalid-auth-event"))}else at(new un("invalid-auth-event"))},Mo.prototype.confirm=function(t){return t=nr(this.verificationId,t),this.a(t)},Uo.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=Kt(Vo(e,n)).then(function(){return t=bs.document,e=null,Je()||!t?ot():new nt(function(n){e=function(){Je()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)})}(this,!0)},Uo.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Wo.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Wo.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?at(new un("user-token-expired")):t||!this.b||Ts()>this.c-3e4?this.a?Bo(this,{grant_type:"refresh_token",refresh_token:this.a}):ot(null):ot({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Qo.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},v(Go,Ct),v(zo,Wt),zo.prototype.ua=function(t){this.ga=t,ti(this.a,t)},zo.prototype.ha=function(){return this.ga},zo.prototype.Ca=function(){return P(this.P)},zo.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},nn(zo.prototype,"providerId","firebase"),(ys=zo.prototype).reload=function(){var t=this;return ba(this,aa(this).then(function(){return pa(t).then(function(){return na(t)}).then(oa)}))},ys.dc=function(t){return this.G(t).then(function(t){return new jo(t)})},ys.G=function(t){var e=this;return ba(this,aa(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new un("internal-error");return t.accessToken!=e.ma&&(ea(e,t.accessToken),e.dispatchEvent(new Go("tokenChanged"))),ha(e,"refreshToken",t.refreshToken),t.accessToken}))},ys.zc=function(t){if(!(t=t.users)||!t.length)throw new un("internal-error");ia(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?Ps(t,function(t){return new Ko(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)ua(this,e[n]);ha(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},ys.Ac=function(t){return en("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(t)},ys.hb=function(t){var e=this,n=null;return ba(this,t.f(this.a,this.uid).then(function(t){return fa(e,t),n=va(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},ys.rc=function(t){return en("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(t)},ys.fb=function(t){var e=this,n=null;return ba(this,da(this,t.providerId).then(function(){return e.G()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=va(e,t,"link"),ya(e,t)}).then(function(){return n}))},ys.sc=function(t,e){var n=this;return ba(this,da(this,"phone").then(function(){return Fo(Jo(n),t,e,f(n.fb,n))}))},ys.Bc=function(t,e){var n=this;return ba(this,ot().then(function(){return Fo(Jo(n),t,e,f(n.hb,n))}),!0)},ys.rb=function(t){var e=this;return ba(this,this.G().then(function(n){return e.a.rb(n,t)}).then(function(t){return fa(e,t),e.reload()}))},ys.Sc=function(t){var e=this;return ba(this,this.G().then(function(n){return t.b(e.a,n)}).then(function(t){return fa(e,t),e.reload()}))},ys.sb=function(t){var e=this;return ba(this,this.G().then(function(n){return e.a.sb(n,t)}).then(function(t){return fa(e,t),e.reload()}))},ys.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return aa(this);var e=this;return ba(this,this.G().then(function(n){return e.a.tb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return fa(e,t),ha(e,"displayName",t.displayName||null),ha(e,"photoURL",t.photoUrl||null),ks(e.providerData,function(t){"password"===t.providerId&&(nn(t,"displayName",e.displayName),nn(t,"photoURL",e.photoURL))}),na(e)}).then(oa))},ys.Qc=function(t){var e=this;return ba(this,pa(this).then(function(n){return T(sa(e),t)?function(t,e,n){return di(t,sh,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return ks(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),ks(sa(e),function(t){n[t]||ca(e,t)}),n[er.PROVIDER_ID]||nn(e,"phoneNumber",null),na(e)}):na(e).then(function(){throw new un("no-such-provider")})}))},ys.delete=function(){var t=this;return ba(this,this.G().then(function(e){return di(t.a,ah,{idToken:e})}).then(function(){t.dispatchEvent(new Go("userDeleted"))})).then(function(){for(var e=0;e<t.I.length;e++)t.I[e].cancel("app-deleted");Yo(t,null),$o(t,null),t.I=[],t.B=!0,ta(t),nn(t,"refreshToken",null),t.i&&Co(t.i,t)})},ys.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ca||null)==e||"reauthViaRedirect"==t&&(this.ca||null)==e)},ys.ja=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},ys.Ba=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?f(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?f(this.Cb,this):"linkViaRedirect"==t&&(this.ca||null)==e?f(this.Bb,this):"reauthViaRedirect"==t&&(this.ca||null)==e?f(this.Cb,this):null},ys.tc=function(t){var e=this;return ga(this,"linkViaPopup",t,function(){return da(e,t.providerId).then(function(){return na(e)})},!1)},ys.Cc=function(t){return ga(this,"reauthViaPopup",t,function(){return ot()},!0)},ys.uc=function(t){var e=this;return ma(this,"linkViaRedirect",t,function(){return da(e,t.providerId)},!1)},ys.Dc=function(t){return ma(this,"reauthViaRedirect",t,function(){return ot()},!0)},ys.Bb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.G().then(function(n){return li(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=va(i,t,"link"),ya(i,t)}).then(function(){return o}),ba(this,n)},ys.Cb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ba(this,ot().then(function(){return Pn(pi(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=va(i,t,"reauthenticate"),fa(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},ys.jb=function(t){var e=this,n=null;return ba(this,this.G().then(function(e){return n=e,void 0===t||O(t)?{}:fn(new pn(t))}).then(function(t){return e.a.jb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},ys.toJSON=function(){return this.A()},ys.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&D(t,this.metadata.A()),ks(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var el={name:"redirectUser",C:"session"};Ia.prototype.g=function(){var t=this,e=Sa("local");Aa(this,function(){return ot().then(function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null}).then(function(n){if(n)return Ta(t,"local").then(function(){t.c=e})})})};var nl={name:"persistence",C:"session"};Ia.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new un("invalid-persistence-type"),n=new un("unsupported-persistence-type");t:{for(r in Wh)if(Wh[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(xe()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!Ve()&&"none"!==t)throw n}}(t),Aa(this,function(){return t!=n.c.C?n.b.get(n.c,n.a).then(function(r){return e=r,Ta(n,t)}).then(function(){if(n.c=Sa(t),e)return n.b.set(n.c,e,n.a)}):ot()})},v(Oa,Wt),v(Ra,Ct),v(Da,Ct),(ys=Oa.prototype).mb=function(t){return t=this.h.mb(t),Ha(this,t)},ys.ua=function(t){this.Z===t||this.l||(this.Z=t,ti(this.b,this.Z),this.dispatchEvent(new Ra(this.ha())))},ys.ha=function(){return this.Z},ys.Tc=function(){var t=bs.navigator;this.ua(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},ys.vc=function(e){this.I.push(e),ei(this.b,t.SDK_VERSION?Fe(t.SDK_VERSION,this.I):null),this.dispatchEvent(new Da(this.I))},ys.Ca=function(){return P(this.I)},ys.nb=function(t){this.P===t||this.l||(this.P=t,this.b.b=this.P)},ys.R=function(){return this.P},ys.toJSON=function(){return{apiKey:Ua(this).options.apiKey,authDomain:Ua(this).options.authDomain,appName:Ua(this).name,currentUser:Va(this)&&Va(this).A()}},ys.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},ys.ja=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},ys.Ba=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?f(this.ac,this):null},ys.ac=function(t,e,n,r){var i=this;t={requestUri:t,postBody:r,sessionId:e,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=hi(i.b,t).then(function(t){return o=rr(t),a=bn(t),t});return Ha(this,t=i.Y.then(function(){return s}).then(function(t){return Ma(i,t)}).then(function(){return on({user:Va(i),credential:o,additionalUserInfo:a,operationType:"signIn"})}))},ys.Lc=function(e){if(!We())return at(new un("operation-not-supported-in-this-environment"));var n=this,r=_n(e.providerId),i=ze(),o=null;(!Be()||Re())&&Ua(this).options.authDomain&&e.isOAuthProvider&&(o=Ti(Ua(this).options.authDomain,Ua(this).options.apiKey,Ua(this).name,"signInViaPopup",e,null,i,t.SDK_VERSION||null,null,null,this.R()));var a=Pe(o,r&&r.sa,r&&r.ra);return Ha(this,r=xa(this).then(function(t){return Io(t,a,"signInViaPopup",e,i,!!o,n.R())}).then(function(){return new nt(function(t,e){n.ja("signInViaPopup",null,new un("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=No(n.a,n,"signInViaPopup",a,i)})}).then(function(t){return a&&ke(a),t?on(t):null}).s(function(t){throw a&&ke(a),t}))},ys.Mc=function(t){if(!We())return at(new un("operation-not-supported-in-this-environment"));var e=this;return Ha(this,xa(this).then(function(){return function(t){return Aa(t,function(){return t.b.set(nl,t.c.C,t.a)})}(e.h)}).then(function(){return So(e.a,"signInViaRedirect",t,void 0,e.R())}))},ys.oa=function(){var t=this;return La(this).then(function(e){return t.a&&Oo(t.a.b),e}).s(function(e){throw t.a&&Oo(t.a.b),e})},ys.Rc=function(t){if(!t)return at(new un("null-user"));if(this.P!=t.tenantId)return at(new un("tenant-id-mismatch"));var e=this,n={};n.apiKey=Ua(this).options.apiKey,n.authDomain=Ua(this).options.authDomain,n.appName=Ua(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.o,appName:t.m};var i=t.b,o={};return o[zc]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-Ts())/1e3,e=new zo(e,o),n&&(e.da=n),r&&Xo(e,r),la(e,t),e}(t,n,e.w,e.Ca());return Ha(this,this.i.then(function(){if(Ua(e).options.apiKey!=t.l)return r.reload()}).then(function(){return Va(e)&&t.uid==Va(e).uid?(la(Va(e),t),e.aa(t)):(Fa(e,r),ra(r),e.aa(r))}).then(function(){qa(e)}))},ys.pb=function(){var t=this;return Ha(this,this.i.then(function(){return t.a&&Oo(t.a.b),Va(t)?(Fa(t,null),ka(t.h).then(function(){qa(t)})):ot()}))},ys.Nc=function(){var t=this;return Pa(this.h,Ua(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=Va(t)&&e){n=Va(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return la(Va(t),e),Va(t).G();(Va(t)||e)&&(Fa(t,e),e&&(ra(e),e.da=t.w),t.a&&Eo(t.a,t),qa(t))}})},ys.aa=function(t){return Na(this.h,t)},ys.bc=function(){qa(this),this.aa(Va(this))},ys.mc=function(){this.pb()},ys.nc=function(){this.pb()},ys.oc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Va(e))})},ys.pc=function(t){var e=this;!function(t,e){t.J.push(e),Ha(t,t.i.then(function(){!t.l&&T(t.J,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Wa(t)))}))}(this,function(){t.next(Va(e))})},ys.xc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then(function(){c(t)?t(Va(r)):c(t.next)&&t.next(Va(r))}),this.Ub(t,e,n)},ys.wc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then(function(){r.W=r.getUid(),c(t)?t(Va(r)):c(t.next)&&t.next(Va(r))}),this.Vb(t,e,n)},ys.cc=function(t){var e=this;return Ha(this,this.i.then(function(){return Va(e)?Va(e).G(t).then(function(t){return{accessToken:t}}):null}))},ys.Hc=function(t){var e=this;return this.i.then(function(){return ja(e,di(e.b,Ih,{token:t}))}).then(function(t){var n=t.user;return ha(n,"isAnonymous",!1),e.aa(n),t})},ys.Ic=function(t,e){var n=this;return this.i.then(function(){return ja(n,di(n.b,Th,{email:t,password:e}))})},ys.Xb=function(t,e){var n=this;return this.i.then(function(){return ja(n,di(n.b,ih,{email:t,password:e}))})},ys.Sa=function(t){var e=this;return this.i.then(function(){return ja(e,t.na(e.b))})},ys.Gc=function(t){return en("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(t)},ys.ob=function(){var t=this;return this.i.then(function(){var e=Va(t);return e&&e.isAnonymous?on({user:e,credential:null,additionalUserInfo:on({providerId:null,isNewUser:!1}),operationType:"signIn"}):ja(t,t.b.ob()).then(function(e){var n=e.user;return ha(n,"isAnonymous",!0),t.aa(n),e})})},ys.getUid=function(){return Va(this)&&Va(this).uid||null},ys.Wb=function(t){this.addAuthTokenListener(t),0<++this.o&&Va(this)&&Zo(Va(this))},ys.Ec=function(t){var e=this;ks(this.m,function(n){n==t&&e.o--}),this.o<0&&(this.o=0),0==this.o&&Va(this)&&ta(Va(this)),this.removeAuthTokenListener(t)},ys.addAuthTokenListener=function(t){var e=this;this.m.push(t),Ha(this,this.i.then(function(){e.l||T(e.m,t)&&t(Wa(e))}))},ys.removeAuthTokenListener=function(t){N(this.m,function(e){return e==t})},ys.delete=function(){this.l=!0;for(var t=0;t<this.O.length;t++)this.O[t].cancel("app-deleted");return this.O=[],this.h&&(t=this.h).b.removeListener(Sa("local"),t.a,this.ma),this.a&&(Co(this.a,this),Oo(this.a.b)),Promise.resolve()},ys.$b=function(t){return Ha(this,function(t,e){return di(t,oh,{identifier:e,continueUri:qe()?Te():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},ys.qc=function(t){return!!$n(t)},ys.lb=function(t,e){var n=this;return Ha(this,ot().then(function(){var t=new pn(e);if(!t.c)throw new un("argument-error",vc+" must be true when sending sign in link to email");return fn(t)}).then(function(e){return n.b.lb(t,e)}).then(function(){}))},ys.Uc=function(t){return this.Ma(t).then(function(t){return t.data.email})},ys.ab=function(t,e){return Ha(this,this.b.ab(t,e).then(function(){}))},ys.Ma=function(t){return Ha(this,this.b.Ma(t).then(function(t){return new sn(t)}))},ys.Ya=function(t){return Ha(this,this.b.Ya(t).then(function(){}))},ys.kb=function(t,e){var n=this;return Ha(this,ot().then(function(){return void 0===e||O(e)?{}:fn(new pn(e))}).then(function(e){return n.b.kb(t,e)}).then(function(){}))},ys.Kc=function(t,e){return Ha(this,Fo(this,t,e,f(this.Sa,this)))},ys.Jc=function(t,e){var n=this;return Ha(this,ot().then(function(){var r=e||Te(),i=Xn(t,r);if(!(r=$n(r)))throw new un("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new un("tenant-id-mismatch");return n.Sa(i)}))},Ba.prototype.render=function(){},Ba.prototype.reset=function(){},Ba.prototype.getResponse=function(){},Ba.prototype.execute=function(){};var rl=null;Qa.prototype.render=function(t,e){return this.a[this.b.toString()]=new za(t,e),this.b++},Qa.prototype.reset=function(t){var e=Ka(this,t);t=Ga(t),e&&t&&(e.delete(),delete this.a[t])},Qa.prototype.getResponse=function(t){return(t=Ka(this,t))?t.getResponse():null},Qa.prototype.execute=function(t){(t=Ka(this,t))&&t.execute()},za.prototype.getResponse=function(){return Ya(this),this.b},za.prototype.execute=function(){Ya(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(e){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()},6e4)},500))},za.prototype.delete=function(){Ya(this),this.g=!0,clearTimeout(this.a),this.a=null,Dt(this.f,"click",this.i)},Xa.prototype.g=function(){return ot(rl=rl||new Qa)},Xa.prototype.c=function(){};var il=null,ol=new x(Ds,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),al=new $e(3e4,6e4);$a.prototype.g=function(t){var e=this;return new nt(function(n,r){var i=setTimeout(function(){r(new un("network-request-failed"))},al.get());!bs.grecaptcha||t!==e.f&&!e.b?(bs[e.a]=function(){if(bs.grecaptcha){e.f=t;var o=bs.grecaptcha.render;bs.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(bs.grecaptcha)}else clearTimeout(i),r(new un("internal-error"));delete bs[e.a]},ot(zr(j(ol,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(i),r(new un("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(bs.grecaptcha))})},$a.prototype.c=function(){this.b--};var sl=null,ul="callback",cl="expired-callback",hl="sitekey",ll="size";(ys=Ja.prototype).Da=function(){var t=this;return this.f?this.f:this.f=ts(this,ot().then(function(){if(qe()&&!De())return Ae();throw new un("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.v())}).then(function(e){return t.g=e,di(t.o,vh,{})}).then(function(e){t.a[hl]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},ys.render=function(){es(this);var t=this;return ts(this,this.Da().then(function(){if(null===t.c){var e=t.u;if(!t.i){var n=ge(e);e=_e("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},ys.verify=function(){es(this);var t=this;return ts(this,this.render().then(function(e){return new nt(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){N(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},ys.reset=function(){es(this),null!==this.c&&this.g.reset(this.c)},ys.clear=function(){es(this),this.B=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ge(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},v(ns,Ja);var pl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");ps(Oa.prototype,{Ya:{name:"applyActionCode",j:[is("code")]},Ma:{name:"checkActionCode",j:[is("code")]},ab:{name:"confirmPasswordReset",j:[is("code"),is("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[is("email"),is("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[is("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[is("emailLink")]},wc:{name:"onAuthStateChanged",j:[ls(as(),ss(),"nextOrObserver"),ss("opt_error",!0),ss("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[ls(as(),ss(),"nextOrObserver"),ss("opt_error",!0),ss("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[is("email"),ls(as("opt_actionCodeSettings",!0),us(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[is("email"),as("actionCodeSettings")]},mb:{name:"setPersistence",j:[is("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[cs()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[cs()]},Hc:{name:"signInWithCustomToken",j:[is("token")]},Ic:{name:"signInWithEmailAndPassword",j:[is("email"),is("password")]},Jc:{name:"signInWithEmailLink",j:[is("email"),is("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[is("phoneNumber"),hs()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[ls({name:"user",M:"an instance of Firebase User",optional:!1,N:function(t){return!!(t&&t instanceof zo)}},us(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[is(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[is("code")]}}),fs(Oa.prototype,{lc:{name:"languageCode",Za:ls(is(),us(),"languageCode")},ti:{name:"tenantId",Za:ls(is(),us(),"tenantId")}}),(Oa.Persistence=Wh).LOCAL="local",Oa.Persistence.SESSION="session",Oa.Persistence.NONE="none",ps(zo.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[os("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[os("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[cs()]},fb:{name:"linkWithCredential",j:[cs()]},sc:{name:"linkWithPhoneNumber",j:[is("phoneNumber"),hs()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[cs()]},hb:{name:"reauthenticateWithCredential",j:[cs()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[is("phoneNumber"),hs()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[ls(as("opt_actionCodeSettings",!0),us(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[is(null,!0)]},Qc:{name:"unlink",j:[is("provider")]},rb:{name:"updateEmail",j:[is("email")]},sb:{name:"updatePassword",j:[is("password")]},Sc:{name:"updatePhoneNumber",j:[cs("phone")]},tb:{name:"updateProfile",j:[as("profile")]}}),ps(Qa.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ps(Ba.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ps(nt.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),fs(Lo.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:os("appVerificationDisabledForTesting")}}),ps(Mo.prototype,{confirm:{name:"confirm",j:[is("verificationCode")]}}),ds(kn,"fromJSON",function(t){t=n(t)?JSON.parse(t):t;for(var e,r=[Ln,zn,Zn,Rn],i=0;i<r.length;i++)if(e=r[i](t))return e;return null},[ls(is(),as(),"json")]),ds(Yn,"credential",function(t,e){return new Gn(t,e)},[is("email"),is("password")]),ps(Gn.prototype,{A:{name:"toJSON",j:[is(null,!0)]}}),ps(Un.prototype,{ya:{name:"addScope",j:[is("scope")]},Ga:{name:"setCustomParameters",j:[as("customOAuthParameters")]}}),ds(Un,"credential",Vn,[ls(is(),as(),"token")]),ds(Yn,"credentialWithLink",Xn,[is("email"),is("emailLink")]),ps(Wn.prototype,{ya:{name:"addScope",j:[is("scope")]},Ga:{name:"setCustomParameters",j:[as("customOAuthParameters")]}}),ds(Wn,"credential",qn,[ls(is(),as(),"token")]),ps(Hn.prototype,{ya:{name:"addScope",j:[is("scope")]},Ga:{name:"setCustomParameters",j:[as("customOAuthParameters")]}}),ds(Hn,"credential",Bn,[ls(is(),ls(as(),us()),"idToken"),ls(is(),us(),"accessToken",!0)]),ps(Qn.prototype,{Ga:{name:"setCustomParameters",j:[as("customOAuthParameters")]}}),ds(Qn,"credential",Kn,[ls(is(),as(),"token"),is("secret",!0)]),ps(jn.prototype,{ya:{name:"addScope",j:[is("scope")]},credential:{name:"credential",j:[ls(is(),ls(as(),us()),"optionsOrIdToken"),ls(is(),us(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[as("customOAuthParameters")]}}),ps(Dn.prototype,{A:{name:"toJSON",j:[is(null,!0)]}}),ps(An.prototype,{A:{name:"toJSON",j:[is(null,!0)]}}),ds(er,"credential",nr,[is("verificationId"),is("verificationCode")]),ps(er.prototype,{Wa:{name:"verifyPhoneNumber",j:[is("phoneNumber"),hs()]}}),ps(Jn.prototype,{A:{name:"toJSON",j:[is(null,!0)]}}),ps(un.prototype,{toJSON:{name:"toJSON",j:[is(null,!0)]}}),ps(cr.prototype,{toJSON:{name:"toJSON",j:[is(null,!0)]}}),ps(ur.prototype,{toJSON:{name:"toJSON",j:[is(null,!0)]}}),ps(ns.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ds(hn,"parseLink",ln,[is("link")]),function(){if(void 0===t||!t.INTERNAL||!t.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Xu,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Oa,AuthCredential:kn,Error:un};ds(e,"EmailAuthProvider",Yn,[]),ds(e,"FacebookAuthProvider",Un,[]),ds(e,"GithubAuthProvider",Wn,[]),ds(e,"GoogleAuthProvider",Hn,[]),ds(e,"TwitterAuthProvider",Qn,[]),ds(e,"OAuthProvider",jn,[is("providerId")]),ds(e,"SAMLAuthProvider",Fn,[is("providerId")]),ds(e,"PhoneAuthProvider",er,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(t){return!!(t&&t instanceof Oa)}}]),ds(e,"RecaptchaVerifier",ns,[ls(is(),{name:"",M:"an HTML element",optional:!1,N:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),as("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof t.app.App)}}]),ds(e,"ActionCodeURL",hn,[]),t.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Oa(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),t.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:f((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:f(t.cc,t),addAuthTokenListener:f(t.Wb,t),removeAuthTokenListener:f(t.Ec,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),t.registerVersion("@firebase/auth","0.13.5"),t.INTERNAL.extendNamespace({User:zo})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-auth.js - be sure to load firebase-app.js first.")}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}(this,function(t){"use strict";try{(function(){function e(t,e,n,r){return new(n=n||Promise)(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function n(t,e){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function r(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function o(){this.constructor=tt}function a(t,e){var n=nt.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,a.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,at.prototype.create),n}function s(t,e,n){this.service=t,this.serviceName=e,this.errors=n}function u(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}function c(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function h(t,e,n){var r,i=new Promise(function(i,o){c(r=t[e].apply(t,n)).then(i,o)});return i.request=r,i}function l(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function p(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return h(this[e],r,arguments)})})}function f(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function d(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return function(t,e,n){var r=h(t,e,n);return r.then(function(t){if(t)return new y(t,r.request)})}(this[e],r,arguments)})})}function v(t){this._index=t}function y(t,e){this._cursor=t,this._request=e}function g(t){this._store=t}function m(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function _(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new m(n)}function b(t){this._db=t}function w(t){return t instanceof ot&&t.code.includes("request-failed")}function E(t){var e=t.projectId;return vt+"/projects/"+e+"/installations"}function C(t){return{token:t.token,requestStatus:2,expiresIn:function(t){return Number(t.replace("s","000"))}(t.expiresIn),creationTime:Date.now()}}function I(t,r){return e(this,void 0,void 0,function(){var e,i;return n(this,function(n){switch(n.label){case 0:return[4,r.json()];case 1:return e=n.sent(),i=e.error,[2,mt.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})]}})})}function T(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function S(t,e){var n=e.refreshToken,r=T(t);return r.append("Authorization",function(t){return dt+" "+t}(n)),r}function N(t){return e(this,void 0,void 0,function(){var e;return n(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return 500<=(e=n.sent()).status&&e.status<600?[2,t()]:[2,e]}})})}function k(t){return new Promise(function(e){setTimeout(e,t)})}function P(t){return btoa(String.fromCharCode.apply(String,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}(t))).replace(/\+/g,"-").replace(/\//g,"_")}function A(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return P(t).substr(0,22)}(t);return _t.test(e)?e:bt}catch(t){return bt}}function O(t){return t.appName+"!"+t.appId}function R(t,e){var n=O(t);D(n,e),function(t,e){var n=x();n&&n.postMessage({key:t,fid:e}),L()}(n,e)}function D(t,e){var n,i,o=wt.get(t);if(o)try{for(var a=r(o),s=a.next();!s.done;s=a.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}function x(){return!Et&&"BroadcastChannel"in self&&((Et=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){D(t.data.key,t.data.fid)}),Et}function L(){0===wt.size&&Et&&(Et.close(),Et=null)}function M(){return St=St||function(t,e,n){var r=h(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new _(i.result,t.oldVersion,i.transaction))}),r.then(function(t){return new b(t)})}(Ct,It,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Tt)}})}function F(t,r){return e(this,void 0,void 0,function(){var e,i,o,a,s;return n(this,function(n){switch(n.label){case 0:return e=O(t),[4,M()];case 1:return i=n.sent(),o=i.transaction(Tt,"readwrite"),[4,(a=o.objectStore(Tt)).get(e)];case 2:return s=n.sent(),[4,a.put(r,e)];case 3:return n.sent(),[4,o.complete];case 4:return n.sent(),s&&s.fid===r.fid||R(t,r.fid),[2,r]}})})}function j(t){return e(this,void 0,void 0,function(){var e,r,i;return n(this,function(n){switch(n.label){case 0:return e=O(t),[4,M()];case 1:return r=n.sent(),[4,(i=r.transaction(Tt,"readwrite")).objectStore(Tt).delete(e)];case 2:return n.sent(),[4,i.complete];case 3:return n.sent(),[2]}})})}function U(t,r){return e(this,void 0,void 0,function(){var e,i,o,a,s,u;return n(this,function(n){switch(n.label){case 0:return e=O(t),[4,M()];case 1:return i=n.sent(),o=i.transaction(Tt,"readwrite"),[4,(a=o.objectStore(Tt)).get(e)];case 2:return s=n.sent(),void 0!==(u=r(s))?[3,4]:[4,a.delete(e)];case 3:return n.sent(),[3,6];case 4:return[4,a.put(u,e)];case 5:n.sent(),n.label=6;case 6:return[4,o.complete];case 7:return n.sent(),!u||s&&s.fid===u.fid||R(t,u.fid),[2,u]}})})}function V(t){return e(this,void 0,void 0,function(){var r,i,o;return n(this,function(a){switch(a.label){case 0:return[4,U(t,function(i){var o=function(t){return q(t||{fid:A(),registrationStatus:0})}(i),a=function(t,r){if(0!==r.registrationStatus)return 1===r.registrationStatus?{installationEntry:r,registrationPromise:function(t){return e(this,void 0,void 0,function(){var e,r,i,o;return n(this,function(n){switch(n.label){case 0:return[4,W(t)];case 1:e=n.sent(),n.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,k(100)];case 3:return n.sent(),[4,W(t)];case 4:return e=n.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,V(t)];case 6:return r=n.sent(),i=r.installationEntry,(o=r.registrationPromise)?[2,o]:[2,i];case 7:return[2,e]}})})}(t)}:{installationEntry:r};if(!navigator.onLine)return{installationEntry:r,registrationPromise:Promise.reject(mt.create("app-offline"))};var i={fid:r.fid,registrationStatus:1,registrationTime:Date.now()},o=function(t,r){return e(this,void 0,void 0,function(){var i,o;return n(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,7]),[4,function(t,r){var i=r.fid;return e(this,void 0,void 0,function(){var e,r,o,a,s,u;return n(this,function(n){switch(n.label){case 0:return e=E(t),r=T(t),o={fid:i,authVersion:dt,appId:t.appId,sdkVersion:ft},a={method:"POST",headers:r,body:JSON.stringify(o)},[4,N(function(){return fetch(e,a)})];case 1:return(s=n.sent()).ok?[4,s.json()]:[3,3];case 2:return u=n.sent(),[2,{fid:u.fid||i,registrationStatus:2,refreshToken:u.refreshToken,authToken:C(u.authToken)}];case 3:return[4,I("Create Installation",s)];case 4:throw n.sent()}})})}(t,r)];case 1:return i=a.sent(),[2,F(t,i)];case 2:return w(o=a.sent())&&409===o.serverCode?[4,j(t)]:[3,4];case 3:return a.sent(),[3,6];case 4:return[4,F(t,{fid:r.fid,registrationStatus:0})];case 5:a.sent(),a.label=6;case 6:throw o;case 7:return[2]}})})}(t,i);return{installationEntry:i,registrationPromise:o}}(t,o);return r=a.registrationPromise,a.installationEntry})];case 1:return(i=a.sent()).fid!==bt?[3,3]:(o={},[4,r]);case 2:return[2,(o.installationEntry=a.sent(),o)];case 3:return[2,{installationEntry:i,registrationPromise:r}]}})})}function W(t){return U(t,function(t){if(!t)throw mt.create("installation-not-found");return q(t)})}function q(t){return function(t){return 1===t.registrationStatus&&t.registrationTime+pt<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function H(t,r){var i=t.appConfig,o=t.platformLoggerProvider;return e(this,void 0,void 0,function(){var t,e,a,s,u,c,h;return n(this,function(n){switch(n.label){case 0:return t=function(t,e){var n=e.fid;return E(t)+"/"+n+"/authTokens:generate"}(i,r),e=S(i,r),(a=o.getImmediate({optional:!0}))&&e.append("x-firebase-client",a.getPlatformInfoString()),s={installation:{sdkVersion:ft}},u={method:"POST",headers:e,body:JSON.stringify(s)},[4,N(function(){return fetch(t,u)})];case 1:return(c=n.sent()).ok?[4,c.json()]:[3,3];case 2:return h=n.sent(),[2,C(h)];case 3:return[4,I("Generate Auth Token",c)];case 4:throw n.sent()}})})}function B(t,r){return void 0===r&&(r=!1),e(this,void 0,void 0,function(){var i,o,a;return n(this,function(s){switch(s.label){case 0:return[4,U(t.appConfig,function(o){if(!K(o))throw mt.create("not-registered");var a=o.authToken;if(!r&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+yt}(t)}(a))return o;if(1===a.requestStatus)return i=function(t,r){return e(this,void 0,void 0,function(){var e,i;return n(this,function(n){switch(n.label){case 0:return[4,Q(t.appConfig)];case 1:e=n.sent(),n.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,k(100)];case 3:return n.sent(),[4,Q(t.appConfig)];case 4:return e=n.sent(),[3,2];case 5:return 0===(i=e.authToken).requestStatus?[2,B(t,r)]:[2,i]}})})}(t,r),o;if(!navigator.onLine)throw mt.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return it(it({},t),{authToken:e})}(o);return i=function(t,r){return e(this,void 0,void 0,function(){var e,i,o;return n(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,8]),[4,H(t,r)];case 1:return e=n.sent(),o=it(it({},r),{authToken:e}),[4,F(t.appConfig,o)];case 2:return n.sent(),[2,e];case 3:return!w(i=n.sent())||401!==i.serverCode&&404!==i.serverCode?[3,5]:[4,j(t.appConfig)];case 4:return n.sent(),[3,7];case 5:return o=it(it({},r),{authToken:{requestStatus:0}}),[4,F(t.appConfig,o)];case 6:n.sent(),n.label=7;case 7:throw i;case 8:return[2]}})})}(t,s),s})];case 1:return o=s.sent(),i?[4,i]:[3,3];case 2:return a=s.sent(),[3,4];case 3:a=o.authToken,s.label=4;case 4:return[2,a]}})})}function Q(t){return U(t,function(t){if(!K(t))throw mt.create("not-registered");return function(t){return 1===t.requestStatus&&t.requestTime+pt<Date.now()}(t.authToken)?it(it({},t),{authToken:{requestStatus:0}}):t})}function K(t){return void 0!==t&&2===t.registrationStatus}function G(t,r){return void 0===r&&(r=!1),e(this,void 0,void 0,function(){return n(this,function(i){switch(i.label){case 0:return[4,function(t){return e(this,void 0,void 0,function(){var e;return n(this,function(n){switch(n.label){case 0:return[4,V(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}(t.appConfig)];case 1:return i.sent(),[4,B(t,r)];case 2:return[2,i.sent().token]}})})}function z(t,r){return e(this,void 0,void 0,function(){var e,i,o,a;return n(this,function(n){switch(n.label){case 0:return e=function(t,e){var n=e.fid;return E(t)+"/"+n}(t,r),i=S(t,r),o={method:"DELETE",headers:i},[4,N(function(){return fetch(e,o)})];case 1:return(a=n.sent()).ok?[3,3]:[4,I("Delete Installation",a)];case 2:throw n.sent();case 3:return[2]}})})}function Y(t,e){var n=t.appConfig;return function(t,e){x();var n=O(t),r=wt.get(n);r||(r=new Set,wt.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=O(t),r=wt.get(n);r&&(r.delete(e),0===r.size&&wt.delete(n),L())}(n,e)}}function X(t){return mt.create("missing-app-config-values",{valueName:t})}function $(t,e,n){var r=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];window[e].push(arguments)};return window[n]&&"function"==typeof window[n]&&(r=window[n]),window[n]=function(t,e){return function(n,r,i){if(n===Nt.EVENT){var o=[];if(i&&i.send_to){var a=i.send_to;Array.isArray(a)||(a=[a]);for(var s=0,u=a;s<u.length;s++){var c=u[s],h=e[c];if(!h){o=[];break}o.push(h)}}if(0===o.length)for(var l=0,p=Object.values(e);l<p.length;l++){var f=p[l];o.push(f)}Promise.all(o).then(function(){return t(Nt.EVENT,r,i||{})}).catch(function(t){return console.error(t)})}else n===Nt.CONFIG?(e[r]||Promise.resolve()).then(function(){t(Nt.CONFIG,r,i)}).catch(function(t){return console.error(t)}):t(Nt.SET,r)}}(r,t),{gtagCore:r,wrappedGtag:window[n]}}function J(t){if(Bt)throw Vt.create("already-initialized");t.dataLayerName&&(qt=t.dataLayerName),t.gtagName&&(Ht=t.gtagName)}function Z(t,r){var i=t.options[Rt];if(!i)throw Vt.create("no-ga-id");if(null!=Wt[i])throw Vt.create("already-exists",{id:i});if(!Bt){!function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Lt))return r}return null}()&&function(t){var e=document.createElement("script");e.src=Lt+"?l="+t,e.async=!0,document.head.appendChild(e)}(qt),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(qt);var o=$(Wt,qt,Ht),a=o.wrappedGtag,s=o.gtagCore;Ft=a,Mt=s,Bt=!0}return Wt[i]=function(t,r,i){return e(this,void 0,void 0,function(){var e,o;return n(this,function(n){switch(n.label){case 0:return[4,r.getId()];case 1:return e=n.sent(),i("js",new Date),i(Nt.CONFIG,t.options[Rt],((o={})[Dt]=e,o[xt]="firebase",o.update=!0,o)),[2]}})})}(t,r,Mt),{app:t,logEvent:function(t,e,n){return function(t,e,n,r,i){var o=r||{};i&&i.global||(o=it(it({},r),{send_to:e})),t(Nt.EVENT,n,o||{})}(Ft,i,t,e,n)},setCurrentScreen:function(t,e){return function(t,e,n,r){r&&r.global?t(Nt.SET,{screen_name:n}):t(Nt.CONFIG,e,{update:!0,screen_name:n})}(Ft,i,t,e)},setUserId:function(t,e){return function(t,e,n,r){r&&r.global?t(Nt.SET,{user_id:n}):t(Nt.CONFIG,e,{update:!0,user_id:n})}(Ft,i,t,e)},setUserProperties:function(t,e){return function(t,e,n,r){if(r&&r.global){for(var i={},o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];i["user_properties."+s]=n[s]}t(Nt.SET,i)}else t(Nt.CONFIG,e,{update:!0,user_properties:n})}(Ft,i,t,e)},setAnalyticsCollectionEnabled:function(t){return function(t,e){window["ga-disable-"+t]=!e}(i,t)}}}t=t&&t.hasOwnProperty("default")?t.default:t;var tt,et,nt,rt=function(t,e){return(rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},it=function(){return(it=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ot=(nt=Error,rt(tt=a,et=nt),tt.prototype=null===et?Object.create(et):(o.prototype=et.prototype,new o),a),at=(s.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,e){return t.replace(st,function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"})}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new ot(i,s),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},s),st=/\{\$([^}]+)}/g,ut=(u.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},u.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},u.prototype.setServiceProps=function(t){return this.serviceProps=t,this},u);l(v,"_index",["name","keyPath","multiEntry","unique"]),p(v,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),d(v,"_index",IDBIndex,["openCursor","openKeyCursor"]),l(y,"_cursor",["direction","key","primaryKey","value"]),p(y,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(y.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,n),c(e._request).then(function(t){if(t)return new y(t,e._request)})})})}),g.prototype.createIndex=function(){return new v(this._store.createIndex.apply(this._store,arguments))},g.prototype.index=function(){return new v(this._store.index.apply(this._store,arguments))},l(g,"_store",["name","keyPath","indexNames","autoIncrement"]),p(g,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),d(g,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),f(g,"_store",IDBObjectStore,["deleteIndex"]),m.prototype.objectStore=function(){return new g(this._tx.objectStore.apply(this._tx,arguments))},l(m,"_tx",["objectStoreNames","mode"]),f(m,"_tx",IDBTransaction,["abort"]),_.prototype.createObjectStore=function(){return new g(this._db.createObjectStore.apply(this._db,arguments))},l(_,"_db",["name","version","objectStoreNames"]),f(_,"_db",IDBDatabase,["deleteObjectStore","close"]),b.prototype.transaction=function(){return new m(this._db.transaction.apply(this._db,arguments))},l(b,"_db",["name","version","objectStoreNames"]),f(b,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[g,v].forEach(function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=function(t){return Array.prototype.slice.call(t)}(arguments),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})})}),[v,g].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})});var ct,ht,lt="0.4.2",pt=1e4,ft="w:"+lt,dt="FIS_v2",vt="https://firebaseinstallations.googleapis.com/v1",yt=36e5,gt=((ct={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ct["not-registered"]="Firebase Installation is not registered.",ct["installation-not-found"]="Firebase Installation not found.",ct["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',ct["app-offline"]="Could not process request. Application offline.",ct["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",ct),mt=new at("installations","Installations",gt),_t=/^[cdef][\w-]{21}$/,bt="",wt=new Map,Et=null,Ct="firebase-installations-database",It=1,Tt="firebase-installations-store",St=null;(ht=t).INTERNAL.registerComponent(new ut("installations",function(t){var i=t.getProvider("app").getImmediate(),o={appConfig:function(t){var e,n;if(!t||!t.options)throw X("App Configuration");if(!t.name)throw X("App Name");try{for(var i=r(["projectId","apiKey","appId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!t.options[a])throw X(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(i),platformLoggerProvider:t.getProvider("platform-logger")};return{app:i,getId:function(){return function(t){return e(this,void 0,void 0,function(){var e,r,i;return n(this,function(n){switch(n.label){case 0:return[4,V(t.appConfig)];case 1:return e=n.sent(),r=e.installationEntry,(i=e.registrationPromise)?i.catch(console.error):B(t).catch(console.error),[2,r.fid]}})})}(o)},getToken:function(t){return G(o,t)},delete:function(){return function(t){return e(this,void 0,void 0,function(){var e,r;return n(this,function(n){switch(n.label){case 0:return[4,U(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(r=n.sent()))return[3,6];if(1!==r.registrationStatus)return[3,2];throw mt.create("delete-pending-registration");case 2:if(2!==r.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw mt.create("app-offline");case 3:return[4,z(e,r)];case 4:return n.sent(),[4,j(e)];case 5:n.sent(),n.label=6;case 6:return[2]}})})}(o)},onIdChange:function(t){return Y(o,t)}}},"PUBLIC")),ht.registerVersion("@firebase/installations",lt);var Nt,kt,Pt,At,Ot,Rt="measurementId",Dt="firebase_id",xt="origin",Lt="https://www.googletagmanager.com/gtag/js";(kt=Nt=Nt||{}).EVENT="event",kt.SET="set",kt.CONFIG="config",(At=Pt=Pt||{}).ADD_PAYMENT_INFO="add_payment_info",At.ADD_TO_CART="add_to_cart",At.ADD_TO_WISHLIST="add_to_wishlist",At.BEGIN_CHECKOUT="begin_checkout",At.CHECKOUT_PROGRESS="checkout_progress",At.EXCEPTION="exception",At.GENERATE_LEAD="generate_lead",At.LOGIN="login",At.PAGE_VIEW="page_view",At.PURCHASE="purchase",At.REFUND="refund",At.REMOVE_FROM_CART="remove_from_cart",At.SCREEN_VIEW="screen_view",At.SEARCH="search",At.SELECT_CONTENT="select_content",At.SET_CHECKOUT_OPTION="set_checkout_option",At.SHARE="share",At.SIGN_UP="sign_up",At.TIMING_COMPLETE="timing_complete",At.VIEW_ITEM="view_item",At.VIEW_ITEM_LIST="view_item_list",At.VIEW_PROMOTION="view_promotion",At.VIEW_SEARCH_RESULTS="view_search_results";var Mt,Ft,jt,Ut=((Ot={})["no-ga-id"]='"'+Rt+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',Ot["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",Ot["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Ot["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",Ot),Vt=new at("analytics","Analytics",Ut),Wt={},qt="dataLayer",Ht="gtag",Bt=!1,Qt="analytics";(jt=t).INTERNAL.registerComponent(new ut(Qt,function(t){return Z(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:J,EventName:Pt})),jt.INTERNAL.registerComponent(new ut("analytics-internal",function(t){try{return{logEvent:t.getProvider(Qt).getImmediate().logEvent}}catch(t){throw Vt.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),jt.registerVersion("@firebase/analytics","0.2.13")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-analytics.js - be sure to load firebase-app.js first.")}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()}(this,function(){"use strict";function t(t,e){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function e(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function n(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function r(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=r(t[n],e[n]));return t}function i(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}function o(){this.constructor=w}function a(t,e){var n=C.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,a.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,A.prototype.create),n}function s(t,e,n){this.service=t,this.serviceName=e,this.errors=n}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){var n=new R(t,e);return n.subscribe.bind(n)}function h(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function l(){}function p(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}function f(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}function d(t){this.name=t,this.providers=new Map}function v(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case I.DEBUG:case I.VERBOSE:console.log.apply(console,v(["["+i+"]  "+t.name+":"],n));break;case I.INFO:console.info.apply(console,v(["["+i+"]  "+t.name+":"],n));break;case I.WARN:console.warn.apply(console,v(["["+i+"]  "+t.name+":"],n));break;case I.ERROR:console.error.apply(console,v(["["+i+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}function g(t){this.name=t,this._logLevel=U,this._logHandler=y}function m(t,n,i){var o,a,s=this;this.firebase_=i,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=function(t){return r(void 0,t)}(t),this.container=new M(n.name),this._addComponent(new D("app",function(){return s},"PUBLIC"));try{for(var u=e(this.firebase_.INTERNAL.components.values()),c=u.next();!c.done;c=u.next()){var h=c.value;this._addComponent(h)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}}function _(t){function n(t){if(!u(o,t=t||B))throw q.create("no-app",{appName:t});return o[t]}function i(i){var u,c,h=i.name;if(a.has(h))return K.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===i.type?s[h]:null;if(a.set(h,i),"PUBLIC"===i.type){var l=function(t){if(void 0===t&&(t=n()),"function"!=typeof t[h])throw q.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==i.serviceProps&&r(l,i.serviceProps),s[h]=l,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,i.multipleInstances?t:[])}}try{for(var p=e(Object.keys(o)),f=p.next();!f.done;f=p.next()){var d=f.value;o[d]._addComponent(i)}}catch(c){u={error:c}}finally{try{f&&!f.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===i.type?s[h]:null}var o={},a=new Map,s={__esModule:!0,initializeApp:function(e,n){void 0===n&&(n={}),"object"==typeof n&&null!==n||(n={name:n});var r=n;void 0===r.name&&(r.name=B);var i=r.name;if("string"!=typeof i||!i)throw q.create("bad-app-name",{appName:String(i)});if(u(o,i))throw q.create("duplicate-app",{appName:i});var a=new t(e,r,s);return o[i]=a},app:n,registerVersion:function(t,e,n){var r,o=null!==(r=Q[t])&&void 0!==r?r:t;n&&(o+="-"+n);var a=o.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+o+'" with version "'+e+'":'];return a&&u.push('library name "'+o+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void K.warn(u.join(" "))}i(new D(o+"-version",function(){return{library:o,version:e}},"VERSION"))},apps:null,SDK_VERSION:z,INTERNAL:{registerComponent:i,removeApp:function(t){delete o[t]},components:a,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};return s.default=s,Object.defineProperty(s,"apps",{get:function(){return Object.keys(o).map(function(t){return o[t]})}}),n.App=t,s}function b(t){this.container=t}var w,E,C,I,T,S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},N=function(){return(N=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},k=(i.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},i),P=(C=Error,S(w=a,E=C),w.prototype=null===E?Object.create(E):(o.prototype=E.prototype,new o),a),A=(s.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,e){return t.replace(O,function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"})}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new P(i,s),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},s),O=/\{\$([^}]+)}/g,R=(h.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},h.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},h.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},h.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=l),void 0===r.error&&(r.error=l),void 0===r.complete&&(r.complete=l);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},h.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},h.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},h.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},h.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},h),D=(p.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},p.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},p.prototype.setServiceProps=function(t){return this.serviceProps=t,this},p),x="[DEFAULT]",L=(f.prototype.get=function(t){void 0===t&&(t=x);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new k;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},f.prototype.getImmediate=function(t){var e=N({identifier:x,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},f.prototype.getComponent=function(){return this.component},f.prototype.setComponent=function(t){var r,i;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(function(t){return"EAGER"===t.instantiationMode}(this.component=t))try{this.getOrInitializeService(x)}catch(t){}try{for(var o=e(this.instancesDeferred.entries()),a=o.next();!a.done;a=o.next()){var s=n(a.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);try{var l=this.getOrInitializeService(h);c.resolve(l)}catch(t){}}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},f.prototype.clearInstance=function(t){void 0===t&&(t=x),this.instancesDeferred.delete(t),this.instances.delete(t)},f.prototype.delete=function(){return function(t,e,n,r){return new(n=n||Promise)(function(e,i){function o(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(o,a)}s((r=r.apply(t,[])).next())})}(this,0,void 0,function(){var e;return t(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},f.prototype.isComponentSet=function(){return null!=this.component},f.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===x?void 0:t}(t)),this.instances.set(t,e)),e||null},f.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:x:t},f),M=(d.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},d.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},d.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new L(t,this);return this.providers.set(t,e),e},d.prototype.getProviders=function(){return Array.from(this.providers.values())},d);(T=I=I||{})[T.DEBUG=0]="DEBUG",T[T.VERBOSE=1]="VERBOSE",T[T.INFO=2]="INFO",T[T.WARN=3]="WARN",T[T.ERROR=4]="ERROR",T[T.SILENT=5]="SILENT";var F,j,U=I.INFO,V=(Object.defineProperty(g.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in I))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),g.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,v([this,I.DEBUG],t))},g.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,v([this,I.VERBOSE],t))},g.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,v([this,I.INFO],t))},g.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,v([this,I.WARN],t))},g.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,v([this,I.ERROR],t))},g),W=((F={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",F["bad-app-name"]="Illegal App name: '{$appName}",F["duplicate-app"]="Firebase App named '{$appName}' already exists",F["app-deleted"]="Firebase App named '{$appName}' already deleted",F["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",F),q=new A("app","Firebase",W),H="@firebase/app",B="[DEFAULT]",Q=((j={})[H]="fire-core",j["@firebase/analytics"]="fire-analytics",j["@firebase/auth"]="fire-auth",j["@firebase/database"]="fire-rtdb",j["@firebase/functions"]="fire-fn",j["@firebase/installations"]="fire-iid",j["@firebase/messaging"]="fire-fcm",j["@firebase/performance"]="fire-perf",j["@firebase/remote-config"]="fire-rc",j["@firebase/storage"]="fire-gcs",j["@firebase/firestore"]="fire-fst",j["fire-js"]="fire-js",j["firebase-wrapper"]="fire-js-all",j),K=new V("@firebase/app"),G=(Object.defineProperty(m.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),m.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},m.prototype._getService=function(t,e){return void 0===e&&(e=B),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},m.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=B),this.container.getProvider(t).clearInstance(e)},m.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){K.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},m.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},m.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw q.create("app-deleted",{appName:this.name_})},m);G.prototype.name&&G.prototype.options||G.prototype.delete||console.log("dc");var z="7.9.1",Y=function t(){var e=_(G);return e.INTERNAL=N(N({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){r(e,t)},createSubscribe:c,ErrorFactory:A,deepExtend:r}),e}(),X=(b.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e;return"VERSION"===(null===(e=t.getComponent())||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},b);if("object"==typeof self&&self.self===self&&void 0!==self.firebase){K.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var $=self.firebase.SDK_VERSION;$&&0<=$.indexOf("LITE")&&K.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var J=Y.initializeApp;Y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&K.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),J.apply(void 0,t)};var Z,tt=Y;return(Z=tt).INTERNAL.registerComponent(new D("platform-logger",function(t){return new X(t)},"PRIVATE")),Z.registerVersion(H,"0.5.4",void 0),Z.registerVersion("fire-js",""),tt.registerVersion("firebase","7.9.1","app"),tt}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}(this,function(t){"use strict";try{(function(){function e(t,e){function n(){this.constructor=t}Ue(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function n(t,e){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function r(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function o(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}function a(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function s(t){try{return Be.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}function u(t){return function t(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:var r=n;return new Date(r.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return n}for(var i in n)n.hasOwnProperty(i)&&(e[i]=t(e[i],n[i]));return e}(void 0,t)}function c(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}function h(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function l(){return!0===We.NODE_ADMIN}function p(t,e){var n=Me.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,p.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,Ge.prototype.create),n}function f(t,e,n){this.service=t,this.serviceName=e,this.errors=n}function d(t){return JSON.parse(t)}function v(t){return JSON.stringify(t)}function y(t){var e={},n={},r={},i="";try{var o=t.split(".");e=d(s(o[0])||""),n=d(s(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function g(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function m(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function _(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function b(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function w(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function E(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function I(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")}function T(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")}function S(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}function N(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function k(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case Fe.DEBUG:case Fe.VERBOSE:console.log.apply(console,N(["["+i+"]  "+t.name+":"],n));break;case Fe.INFO:console.info.apply(console,N(["["+i+"]  "+t.name+":"],n));break;case Fe.WARN:console.warn.apply(console,N(["["+i+"]  "+t.name+":"],n));break;case Fe.ERROR:console.error.apply(console,N(["["+i+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}function P(t){this.name=t,this._logLevel=ln,this._logHandler=k}function A(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}function O(t){this.domStorage_=t,this.prefix_="firebase:"}function R(){this.cache_={},this.isInMemoryStorage=!0}function D(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dn(e)}}catch(t){}return new vn}function x(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;qe(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}(t),n=new Ye;n.update(e);var r=n.digest();return Be.encodeByteArray(r)}function L(t,e){qe(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(mn.logLevel=Fe.VERBOSE,wn=mn.log.bind(mn),e&&gn.set("logging_enabled",!0)):"function"==typeof t?wn=t:(wn=null,gn.remove("logging_enabled"))}function M(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===En&&(En=!1,null===wn&&!0===gn.get("logging_enabled")&&L(!0)),wn){var n=bn.apply(null,t);wn(n)}}function F(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];M.apply(void 0,o([t],e))}}function j(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+bn.apply(void 0,o(t));mn.error(n)}function U(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+bn.apply(void 0,o(t));throw mn.error(n),new Error(n)}function V(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+bn.apply(void 0,o(t));mn.warn(n)}function W(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function q(t,e){return t===e?0:t<e?-1:1}function H(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+v(e))}function B(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}function Q(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function K(t){var e,n,r,i,o;qe(!W(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var s=a.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function G(t){try{t()}catch(t){setTimeout(function(){throw V("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}}function z(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}function Y(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function X(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=S(this.parts_[n]);this.checkValid_()}function $(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=yn.get("host:"+t)||this.host}function J(t){var e=Ln(t),n=e.namespace;"firebase"===e.domain&&U(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||U("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&V("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new xn(e.host,e.secure,n,r,"",n!==e.subdomain),path:new Pn(e.pathString)}}function Z(t){return"string"==typeof t&&0!==t.length&&!Mn.test(t)}function tt(t){return"string"==typeof t&&0!==t.length&&!Fn.test(t)}function et(t){return null===t||"string"==typeof t||"number"==typeof t&&!W(t)||t&&"object"==typeof t&&g(t,".sv")}function nt(t,e,n,r,i){i&&void 0===n||Un(C(t,e,i),n,r)}function rt(t,e,n,r,i){if(!i||void 0!==n){var o=C(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];Q(n,function(t,e){var n=new Pn(t);if(Un(o,e,r.child(n)),".priority"===n.getBack()&&!et(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Z(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Pn.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}}function it(t,e,n,r){if(!r||void 0!==n){if(W(n))throw new Error(C(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!et(n))throw new Error(C(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function ot(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(C(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function at(t,e,n,r){if(!(r&&void 0===n||Z(n)))throw new Error(C(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function st(t,e,n,r){if(!(r&&void 0===n||tt(n)))throw new Error(C(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function ut(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function ct(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Z(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t=t&&t.replace(/^\/*\.info(\/|$)/,"/"),tt(t)}(r))throw new Error(C(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}function ht(t,e){this.repo_=t,this.path_=e}function lt(t,e){this.committed=t,this.snapshot=e}function pt(t,e){this.name=t,this.node=e}function ft(){}function dt(){return null!==en&&en.apply(this,arguments)||this}function vt(t){return"number"==typeof t?"number:"+K(t):"string:"+t}function yt(t){if(t.isLeafNode()){var e=t.val();qe("string"==typeof e||"number"==typeof e||"object"==typeof e&&g(e,".sv"),"Priority must be a string or number.")}else qe(t===nn||t.isEmpty(),"priority of unexpected type.");qe(t===nn||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}function gt(t,e){void 0===e&&(e=gt.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,qe(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),yt(this.priorityNode_)}function mt(){return null!==sn&&sn.apply(this,arguments)||this}function _t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}function bt(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:bt.RED,this.left=null!=r?r:Jn.EMPTY_NODE,this.right=null!=i?i:Jn.EMPTY_NODE}function wt(){}function Et(t,e){void 0===e&&(e=Et.EMPTY_NODE),this.comparator_=t,this.root_=e}function Ct(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Zn,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}function It(t,e){this.indexes_=t,this.indexSet_=e}function Tt(t,e){return Tn(t.name,e.name)}function St(t,e){return Tn(t,e)}function Nt(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&yt(this.priorityNode_),this.children_.isEmpty()&&qe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function kt(){return hn.call(this,new Jn(St),ir.EMPTY_NODE,rr.Default)||this}function Pt(t,e){if(void 0===e&&(e=null),null===t)return ir.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),qe(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Gn(t,Pt(e));if(t instanceof Array||!sr){var n=ir.EMPTY_NODE;return Q(t,function(e,r){if(g(t,e)&&"."!==e.substring(0,1)){var i=Pt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(Pt(e))}var r=[],i=!1;if(Q(t,function(t,e){if("."!==t.substring(0,1)){var n=Pt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Hn(t,n)))}}),0===r.length)return ir.EMPTY_NODE;var o=er(r,Tt,function(t){return t.name},St);if(i){var a=er(r,zn.getCompare());return new ir(o,Pt(e),new rr({".priority":a},{".priority":zn}))}return new ir(o,Pt(e),rr.Default)}function At(){return null!==ar&&ar.apply(this,arguments)||this}function Ot(t){var e=ur.call(this)||this;return e.indexPath_=t,qe(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}function Rt(t,e,n){this.node_=t,this.ref_=e,this.index_=n}function Dt(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}function xt(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}function Lt(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}function Mt(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}function Ft(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}function jt(){this.value=null,this.children=new Map}function Ut(t,e){return t&&"object"==typeof t?(qe(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}function Vt(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,qe(!r||e,"Tagged queries must be from server.")}function Wt(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=hr.ACK_USER_WRITE,this.source=Sr.User}function qt(t,e){void 0===e&&(e=Er=Er||new Jn(q)),this.value=t,this.children=e}function Ht(t,e){this.source=t,this.path=e,this.type=hr.LISTEN_COMPLETE}function Bt(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=hr.OVERWRITE}function Qt(t,e,n){this.source=t,this.path=e,this.children=n,this.type=hr.MERGE}function Kt(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}function Gt(t,e){this.eventCache_=t,this.serverCache_=e}function zt(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}function Yt(t){this.index_=t}function Xt(){this.changeMap=new Map}function $t(){}function Jt(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function Zt(t){this.filter_=t}function te(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}function ee(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Lr(n.getIndex()),i=n.getNodeFilter();this.processor_=new Vr(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(ir.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(ir.EMPTY_NODE,a.getNode(),null),c=new Rr(s,o.isFullyInitialized(),r.filtersNodes()),h=new Rr(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Dr(h,c),this.eventGenerator_=new Wr(this.query_)}function ne(){this.views=new Map}function re(t){this.writeTree_=t}function ie(){this.visibleWrites_=Br.Empty,this.allWrites_=[],this.lastWriteId_=-1}function oe(t,e){this.treePath_=t,this.writeTree_=e}function ae(t){this.listenProvider_=t,this.syncPointTree_=kr.Empty,this.pendingWriteTree_=new Qr,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}function se(){this.rootNode_=ir.EMPTY_NODE}function ue(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}function ce(){this.counters_={}}function he(){}function le(t){this.collection_=t,this.last_=null}function pe(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Jr(t);var n=1e4+2e4*Math.random();z(this.reportStats_.bind(this),Math.floor(n))}function fe(){this.eventLists_=[],this.recursionDepth_=0}function de(t){this.path_=t,this.events_=[]}function ve(t){this.allowedEvents_=t,this.listeners_={},qe(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}function ye(){var t,e,n=Ir.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))},!1),n}function ge(){var t=Tr.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||h()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}function me(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}function _e(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=F(t),this.stats_=$r.getCollection(e),this.urlFn=function(t){return e.connectionURL(Dn,t)}}function be(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=_n(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=be.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){M("frame writing exception"),t.stack&&M(t.stack),M(t)}}function we(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=F(this.connId),this.stats_=$r.getCollection(e),this.connURL=we.connectionURL_(e,n,r)}function Ee(t){this.initTransports_(t)}function Ce(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=F("c:"+this.id+":"),this.transportManager_=new di(e),this.log_("Connection created"),this.start_()}function Ie(){}function Te(t,e,n,r,i,o){var a=hi.call(this)||this;if(a.repoInfo_=t,a.onDataUpdate_=e,a.onConnectStatus_=n,a.onServerInfoUpdate_=r,a.authTokenProvider_=i,a.authOverride_=o,a.id=Te.nextPersistentConnectionId_++,a.log_=F("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=1e3,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,o&&!l())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),ri.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&ii.getInstance().on("online",a.onOnline_,a),a}function Se(t,e,n){var r=li.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=F("p:rest:"),r.listens_={},r}function Ne(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ti,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new br,this.persistentConnection_=null;var o=new Yr(n,r);if(this.stats_=$r.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new mi(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{v(a)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new gi(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,a),this.server_=this.persistentConnection_}o.addTokenChangeListener(function(t){i.server_.refreshAuthToken(t)}),this.statsReporter_=$r.getOrCreateReporter(t,function(){return new Zr(i.stats_,i.server_)}),this.transactionsInit_(),this.infoData_=new zr,this.infoSyncTree_=new Gr({startListening:function(t,e,n,r){var o=[],a=i.infoData_.getNode(t.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){r("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Gr({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}function ke(t){this.indexedFilter_=new Lr(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ke.getStartPost_(t),this.endPost_=ke.getEndPost_(t)}function Pe(t){this.rangedFilter_=new wi(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}function Ae(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zn}function Oe(t,e){if(!(t instanceof bi))throw new Error("new Reference() no longer supported - use app.database().");return pi.call(this,t,e,Ci.DEFAULT,!1)||this}function Re(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Ni),this.name_=t,this.parent_=e,this.node_=n}function De(){this.repos_={},this.useRestClient_=!1}function xe(t){(this.repo_=t)instanceof bi||U("Don't call new Database() directly - please use firebase.database()."),this.root_=new Ii(t,Pn.Empty),this.INTERNAL=new Di(this)}function Le(t){this.database=t}t=t&&t.hasOwnProperty("default")?t.default:t;var Me,Fe,je,Ue=function(t,e){return(Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Ve=function(){return(Ve=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},We={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},qe=function(t,e){if(!t)throw He(e)},He=function(t){return new Error("Firebase Database ("+We.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,p=(15&s)<<2|c>>6,f=63&c;u||(f=64,a||(p=64)),r.push(n[h],n[l],n[p],n[f])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Qe=(c.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},c),Ke=(e(p,Me=Error),p),Ge=(f.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?function(t,e){return t.replace(ze,function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"})}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new Ke(i,s),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},f),ze=/\{\$([^}]+)}/g,Ye=(w.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},w.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)a=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},w.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},w.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},w);(je=Fe=Fe||{})[je.DEBUG=0]="DEBUG",je[je.VERBOSE=1]="VERBOSE",je[je.INFO=2]="INFO",je[je.WARN=3]="WARN",je[je.ERROR=4]="ERROR",je[je.SILENT=5]="SILENT";var Xe,$e,Je,Ze,tn,en,nn,rn,on,an,sn,un,cn,hn,ln=Fe.INFO,pn=(Object.defineProperty(P.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Fe))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),P.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,N([this,Fe.DEBUG],t))},P.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,N([this,Fe.VERBOSE],t))},P.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,N([this,Fe.INFO],t))},P.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,N([this,Fe.WARN],t))},P.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,N([this,Fe.ERROR],t))},P),fn=(A.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},A.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},A.prototype.setServiceProps=function(t){return this.serviceProps=t,this},A),dn=(O.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),v(e))},O.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:d(e)},O.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},O.prototype.prefixedName_=function(t){return this.prefix_+t},O.prototype.toString=function(){return this.domStorage_.toString()},O),vn=(R.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},R.prototype.get=function(t){return g(this.cache_,t)?this.cache_[t]:null},R.prototype.remove=function(t){delete this.cache_[t]},R),yn=D("localStorage"),gn=D("sessionStorage"),mn=new pn("@firebase/database"),_n=(Xe=1,function(){return Xe++}),bn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=bn.apply(null,i):n+="object"==typeof i?v(i):i,n+=" "}return n},wn=null,En=!0,Cn="[MIN_NAME]",In="[MAX_NAME]",Tn=function(t,e){if(t===e)return 0;if(t===Cn||e===In)return-1;if(e===Cn||t===In)return 1;var n=kn(t),r=kn(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Sn=function(t){if("object"!=typeof t||null===t)return v(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=v(e[i]),r+=":",r+=Sn(t[e[i]]);return r+="}"},Nn=new RegExp("^-?(0*)\\d{1,10}$"),kn=function(t){if(Nn.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},Pn=(Object.defineProperty(Y,"Empty",{get:function(){return new Y("")},enumerable:!0,configurable:!0}),Y.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Y.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Y.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new Y(this.pieces_,t)},Y.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Y.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},Y.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},Y.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},Y.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new Y(t,0)},Y.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof Y)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new Y(e,0)},Y.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Y.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return Y.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},Y.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Tn(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Y.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},Y.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},Y),An=(Object.defineProperty(X,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(X,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),X.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=S(t),this.checkValid_()},X.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=S(t),0<this.parts_.length&&(this.byteLength_-=1)},X.prototype.checkValid_=function(){if(this.byteLength_>X.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+X.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>X.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+X.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},X.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},X),On="firebaseio.com",Rn="websocket",Dn="long_polling",xn=($.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},$.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},$.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},$.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},$.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&yn.set("host:"+this.host,this.internalHost))},$.prototype.connectionURL=function(t,e){var n;if(qe("string"==typeof t,"typeof type must == string"),qe("object"==typeof e,"typeof params must == object"),t===Rn)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Dn)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Q(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},$.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},$.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},$),Ln=function(t){var e="",n="",i="",o="",a="",s=!0,u="https",c=443;if("string"==typeof t){var h=t.indexOf("//");0<=h&&(u=t.substring(0,h-1),t=t.substring(h+2));var l=t.indexOf("/");-1===l&&(l=t.length);var p=t.indexOf("?");-1===p&&(p=t.length),e=t.substring(0,Math.min(l,p)),l<p&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,p)));var f=function(t){var e,n,i={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=r(t.split("&")),a=o.next();!a.done;a=o.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?i[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):V("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}(t.substring(Math.min(t.length,p)));0<=(h=e.indexOf(":"))?(s="https"===u||"wss"===u,c=parseInt(e.substring(h+1),10)):h=t.length;var d=e.split(".");3===d.length?(n=d[1],a=i=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,h).toLowerCase()&&(n="localhost"),"ns"in f&&(a=f.ns)}return{host:e,port:c,domain:n,subdomain:i,secure:s,scheme:u,pathString:o,namespace:a}},Mn=/[\[\].#$\/\u0000-\u001F\u007F]/,Fn=/[\[\].#$\u0000-\u001F\u007F]/,jn=10485760,Un=function(t,e,n){var r=n instanceof Pn?new An(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(W(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>jn/3&&S(e)>jn)throw new Error(t+"contains a string greater than "+jn+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Q(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Z(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Un(t,n,r),r.pop()}),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Vn=(ht.prototype.cancel=function(t){E("OnDisconnect.cancel",0,1,arguments.length),I("OnDisconnect.cancel",1,t,!0);var e=new Qe;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},ht.prototype.remove=function(t){E("OnDisconnect.remove",0,1,arguments.length),ut("OnDisconnect.remove",this.path_),I("OnDisconnect.remove",1,t,!0);var e=new Qe;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},ht.prototype.set=function(t,e){E("OnDisconnect.set",1,2,arguments.length),ut("OnDisconnect.set",this.path_),nt("OnDisconnect.set",1,t,this.path_,!1),I("OnDisconnect.set",2,e,!0);var n=new Qe;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},ht.prototype.setWithPriority=function(t,e,n){E("OnDisconnect.setWithPriority",2,3,arguments.length),ut("OnDisconnect.setWithPriority",this.path_),nt("OnDisconnect.setWithPriority",1,t,this.path_,!1),it("OnDisconnect.setWithPriority",2,e,!1),I("OnDisconnect.setWithPriority",3,n,!0);var r=new Qe;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},ht.prototype.update=function(t,e){if(E("OnDisconnect.update",1,2,arguments.length),ut("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,V("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rt("OnDisconnect.update",1,t,this.path_,!1),I("OnDisconnect.update",2,e,!0);var i=new Qe;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},ht),Wn=(lt.prototype.toJSON=function(){return E("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},lt),qn=($e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Je=0,Ze=[],function(t){var e,n=t===Je;Je=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=$e.charAt(t%64),t=Math.floor(t/64);qe(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===Ze[e];e--)Ze[e]=0;Ze[e]++}else for(e=0;e<12;e++)Ze[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=$e.charAt(Ze[e]);return qe(20===i.length,"nextPushId: Length should be 20."),i}),Hn=(pt.Wrap=function(t,e){return new pt(t,e)},pt),Bn=(ft.prototype.getCompare=function(){return this.compare.bind(this)},ft.prototype.indexedValueChanged=function(t,e){var n=new Hn(Cn,t),r=new Hn(Cn,e);return 0!==this.compare(n,r)},ft.prototype.minPost=function(){return Hn.MIN},ft),Qn=(e(dt,en=Bn),Object.defineProperty(dt,"__EMPTY_NODE",{get:function(){return tn},set:function(t){tn=t},enumerable:!0,configurable:!0}),dt.prototype.compare=function(t,e){return Tn(t.name,e.name)},dt.prototype.isDefinedOn=function(t){throw He("KeyIndex.isDefinedOn not expected to be called.")},dt.prototype.indexedValueChanged=function(t,e){return!1},dt.prototype.minPost=function(){return Hn.MIN},dt.prototype.maxPost=function(){return new Hn(In,tn)},dt.prototype.makePost=function(t,e){return qe("string"==typeof t,"KeyIndex indexValue must always be a string."),new Hn(t,tn)},dt.prototype.toString=function(){return".key"},dt),Kn=new Qn,Gn=(Object.defineProperty(gt,"__childrenNodeConstructor",{get:function(){return rn},set:function(t){rn=t},enumerable:!0,configurable:!0}),gt.prototype.isLeafNode=function(){return!0},gt.prototype.getPriority=function(){return this.priorityNode_},gt.prototype.updatePriority=function(t){return new gt(this.value_,t)},gt.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:gt.__childrenNodeConstructor.EMPTY_NODE},gt.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:gt.__childrenNodeConstructor.EMPTY_NODE},gt.prototype.hasChild=function(){return!1},gt.prototype.getPredecessorChildName=function(t,e){return null},gt.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:gt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},gt.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(qe(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,gt.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},gt.prototype.isEmpty=function(){return!1},gt.prototype.numChildren=function(){return 0},gt.prototype.forEachChild=function(t,e){return!1},gt.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},gt.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+vt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"==e?K(this.value_):this.value_,this.lazyHash_=x(t)}return this.lazyHash_},gt.prototype.getValue=function(){return this.value_},gt.prototype.compareTo=function(t){return t===gt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof gt.__childrenNodeConstructor?-1:(qe(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},gt.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=gt.VALUE_TYPE_ORDER.indexOf(e),i=gt.VALUE_TYPE_ORDER.indexOf(n);return qe(0<=r,"Unknown leaf type: "+e),qe(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},gt.prototype.withIndex=function(){return this},gt.prototype.isIndexed=function(){return!0},gt.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},gt.VALUE_TYPE_ORDER=["object","boolean","number","string"],gt),zn=new(e(mt,sn=Bn),mt.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Tn(t.name,e.name):i},mt.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},mt.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},mt.prototype.minPost=function(){return Hn.MIN},mt.prototype.maxPost=function(){return new Hn(In,new Gn("[PRIORITY-POST]",an))},mt.prototype.makePost=function(t,e){var n=on(t);return new Hn(e,new Gn("[PRIORITY-POST]",n))},mt.prototype.toString=function(){return".priority"},mt),Yn=(_t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},_t.prototype.hasNext=function(){return 0<this.nodeStack_.length},_t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},_t),Xn=(bt.prototype.copy=function(t,e,n,r,i){return new bt(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},bt.prototype.count=function(){return this.left.count()+1+this.right.count()},bt.prototype.isEmpty=function(){return!1},bt.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},bt.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},bt.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},bt.prototype.minKey=function(){return this.min_().key},bt.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},bt.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},bt.prototype.removeMin_=function(){if(this.left.isEmpty())return Jn.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},bt.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Jn.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},bt.prototype.isRed_=function(){return this.color},bt.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},bt.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},bt.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},bt.prototype.rotateLeft_=function(){var t=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},bt.prototype.rotateRight_=function(){var t=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},bt.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},bt.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},bt.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},bt.RED=!0,bt.BLACK=!1,bt),$n=(wt.prototype.copy=function(t,e,n,r,i){return this},wt.prototype.insert=function(t,e,n){return new Xn(t,e,null)},wt.prototype.remove=function(t,e){return this},wt.prototype.count=function(){return 0},wt.prototype.isEmpty=function(){return!0},wt.prototype.inorderTraversal=function(t){return!1},wt.prototype.reverseTraversal=function(t){return!1},wt.prototype.minKey=function(){return null},wt.prototype.maxKey=function(){return null},wt.prototype.check_=function(){return 0},wt.prototype.isRed_=function(){return!1},wt),Jn=(Et.prototype.insert=function(t,e){return new Et(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Xn.BLACK,null,null))},Et.prototype.remove=function(t){return new Et(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Xn.BLACK,null,null))},Et.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Et.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Et.prototype.isEmpty=function(){return this.root_.isEmpty()},Et.prototype.count=function(){return this.root_.count()},Et.prototype.minKey=function(){return this.root_.minKey()},Et.prototype.maxKey=function(){return this.root_.maxKey()},Et.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Et.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Et.prototype.getIterator=function(t){return new Yn(this.root_,null,this.comparator_,!1,t)},Et.prototype.getIteratorFrom=function(t,e){return new Yn(this.root_,t,this.comparator_,!1,e)},Et.prototype.getReverseIteratorFrom=function(t,e){return new Yn(this.root_,t,this.comparator_,!0,e)},Et.prototype.getReverseIterator=function(t){return new Yn(this.root_,null,this.comparator_,!0,t)},Et.EMPTY_NODE=new $n,Et),Zn=Math.log(2),tr=(Ct.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Ct),er=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0==s)return null;if(1==s)return o=t[e],a=n?n(o):o,new Xn(a,o.node,Xn.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],a=n?n(o):o,new Xn(a,o.node,Xn.BLACK,c,h)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(1+o,s),h=t[o],l=n?n(h):h;u(new Xn(l,h.node,r,null,c))},u=function(t){r=r?r.left=t:o=t},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?s(l,Xn.BLACK):(s(l,Xn.BLACK),s(l,Xn.RED))}return o}(new tr(t.length));return new Jn(r||e,o)},nr={},rr=(Object.defineProperty(It,"Default",{get:function(){return qe(zn,"ChildrenNode.ts has not been loaded"),un=un||new It({".priority":nr},{".priority":zn})},enumerable:!0,configurable:!0}),It.prototype.get=function(t){var e=m(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Jn?e:null},It.prototype.hasIndex=function(t){return g(this.indexSet_,t.toString())},It.prototype.addIndex=function(t,e){qe(t!==Kn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(Hn.Wrap),a=o.getNext();a;)i=i||t.isDefinedOn(a.node),r.push(a),a=o.getNext();n=i?er(r,t.getCompare()):nr;var s=t.toString(),u=Ve({},this.indexSet_);u[s]=t;var c=Ve({},this.indexes_);return c[s]=n,new It(c,u)},It.prototype.addToIndexes=function(t,e){var n=this;return new It(b(this.indexes_,function(r,i){var o=m(n.indexSet_,i);if(qe(o,"Missing index implementation for "+i),r===nr){if(o.isDefinedOn(t.node)){for(var a=[],s=e.getIterator(Hn.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),er(a,o.getCompare())}return nr}var c=e.get(t.name),h=r;return c&&(h=h.remove(new Hn(t.name,c))),h.insert(t,t.node)}),this.indexSet_)},It.prototype.removeFromIndexes=function(t,e){return new It(b(this.indexes_,function(n){if(n===nr)return n;var r=e.get(t.name);return r?n.remove(new Hn(t.name,r)):n}),this.indexSet_)},It),ir=(Object.defineProperty(Nt,"EMPTY_NODE",{get:function(){return cn=cn||new Nt(new Jn(St),null,rr.Default)},enumerable:!0,configurable:!0}),Nt.prototype.isLeafNode=function(){return!1},Nt.prototype.getPriority=function(){return this.priorityNode_||cn},Nt.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Nt(this.children_,t,this.indexMap_)},Nt.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?cn:e},Nt.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Nt.prototype.hasChild=function(t){return null!==this.children_.get(t)},Nt.prototype.updateImmediateChild=function(t,e){if(qe(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new Hn(t,e),r=void 0,i=void 0;return i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),new Nt(r,r.isEmpty()?cn:this.priorityNode_,i)},Nt.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;qe(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},Nt.prototype.isEmpty=function(){return this.children_.isEmpty()},Nt.prototype.numChildren=function(){return this.children_.count()},Nt.prototype.val=function(t){if(this.isEmpty())return null;var e={},n=0,r=0,i=!0;if(this.forEachChild(zn,function(o,a){e[o]=a.val(t),n++,i&&Nt.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!t&&i&&r<2*n){var o=[];for(var a in e)o[a]=e[a];return o}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e},Nt.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+vt(this.getPriority().val())+":"),this.forEachChild(zn,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":x(t)}return this.lazyHash_},Nt.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Hn(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},Nt.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},Nt.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Hn(e,this.children_.get(e)):null},Nt.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},Nt.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Hn(e,this.children_.get(e)):null},Nt.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Nt.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Nt.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Hn.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Nt.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Nt.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Hn.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Nt.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===or?-1:0},Nt.prototype.withIndex=function(t){if(t===Kn||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new Nt(this.children_,this.priorityNode_,e)},Nt.prototype.isIndexed=function(t){return t===Kn||this.indexMap_.hasIndex(t)},Nt.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(zn),r=e.getIterator(zn),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},Nt.prototype.resolveIndex_=function(t){return t===Kn?null:this.indexMap_.get(t.toString())},Nt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Nt),or=new(e(kt,hn=ir),kt.prototype.compareTo=function(t){return t===this?0:1},kt.prototype.equals=function(t){return t===this},kt.prototype.getPriority=function(){return this},kt.prototype.getImmediateChild=function(t){return ir.EMPTY_NODE},kt.prototype.isEmpty=function(){return!1},kt);Object.defineProperties(Hn,{MIN:{value:new Hn(Cn,ir.EMPTY_NODE)},MAX:{value:new Hn(In,or)}}),Qn.__EMPTY_NODE=ir.EMPTY_NODE,Gn.__childrenNodeConstructor=ir,nn=or,an=or;var ar,sr=!0;on=Pt;var ur,cr,hr,lr,pr=new(e(At,ar=Bn),At.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Tn(t.name,e.name):n},At.prototype.isDefinedOn=function(t){return!0},At.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},At.prototype.minPost=function(){return Hn.MIN},At.prototype.maxPost=function(){return Hn.MAX},At.prototype.makePost=function(t,e){var n=Pt(t);return new Hn(e,n)},At.prototype.toString=function(){return".value"},At),fr=(e(Ot,ur=Bn),Ot.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Ot.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Ot.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Tn(t.name,e.name):i},Ot.prototype.makePost=function(t,e){var n=Pt(t),r=ir.EMPTY_NODE.updateChild(this.indexPath_,n);return new Hn(e,r)},Ot.prototype.maxPost=function(){var t=ir.EMPTY_NODE.updateChild(this.indexPath_,or);return new Hn(In,t)},Ot.prototype.toString=function(){return this.indexPath_.slice().join("/")},Ot),dr=(Rt.prototype.val=function(){return E("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Rt.prototype.exportVal=function(){return E("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Rt.prototype.toJSON=function(){return E("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Rt.prototype.exists=function(){return E("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Rt.prototype.child=function(t){E("DataSnapshot.child",0,1,arguments.length),st("DataSnapshot.child",1,t=String(t),!1);var e=new Pn(t),n=this.ref_.child(e);return new Rt(this.node_.getChild(e),n,zn)},Rt.prototype.hasChild=function(t){E("DataSnapshot.hasChild",1,1,arguments.length),st("DataSnapshot.hasChild",1,t,!1);var e=new Pn(t);return!this.node_.getChild(e).isEmpty()},Rt.prototype.getPriority=function(){return E("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Rt.prototype.forEach=function(t){var e=this;return E("DataSnapshot.forEach",1,1,arguments.length),I("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(n,r){return t(new Rt(r,e.ref_.child(n),zn))})},Rt.prototype.hasChildren=function(){return E("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Rt.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),Rt.prototype.numChildren=function(){return E("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Rt.prototype.getRef=function(){return E("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Rt.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Rt),vr=(Dt.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},Dt.prototype.getEventType=function(){return this.eventType},Dt.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Dt.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+v(this.snapshot.exportVal())},Dt),yr=(xt.prototype.getPath=function(){return this.path},xt.prototype.getEventType=function(){return"cancel"},xt.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},xt.prototype.toString=function(){return this.path.toString()+":cancel"},xt),gr=(Lt.prototype.respondsTo=function(t){return"value"===t},Lt.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new vr("value",this,new dr(t.snapshotNode,e.getRef(),n))},Lt.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){qe(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Lt.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new yr(this,t,e):null},Lt.prototype.matches=function(t){return t instanceof Lt&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Lt.prototype.hasAnyCallback=function(){return null!==this.callback_},Lt),mr=(Mt.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,g(this.callbacks_,e)},Mt.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new yr(this,t,e):null},Mt.prototype.createEvent=function(t,e){qe(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new vr(t.type,this,new dr(t.snapshotNode,n,r),t.prevName)},Mt.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){qe(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Mt.prototype.matches=function(t){var e=this;if(t instanceof Mt){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var n=Object.keys(t.callbacks_),r=Object.keys(this.callbacks_),i=n.length;if(i===r.length){if(1!==i)return r.every(function(n){return t.callbacks_[n]===e.callbacks_[n]});var o=n[0],a=r[0];return!(a!==o||t.callbacks_[o]&&this.callbacks_[a]&&t.callbacks_[o]!==this.callbacks_[a])}}}return!1},Mt.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Mt),_r=(Object.defineProperty(Ft,"__referenceConstructor",{get:function(){return qe(cr,"Reference.ts has not been loaded"),cr},set:function(t){cr=t},enumerable:!0,configurable:!0}),Ft.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Kn){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Cn)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==In)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===zn){if(null!=e&&!et(e)||null!=n&&!et(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(qe(t.getIndex()instanceof fr||t.getIndex()===pr,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},Ft.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},Ft.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},Ft.prototype.getQueryParams=function(){return this.queryParams_},Ft.prototype.getRef=function(){return E("Query.ref",0,0,arguments.length),new Ft.__referenceConstructor(this.repo,this.path)},Ft.prototype.on=function(t,e,n,r){E("Query.on",2,4,arguments.length),ot("Query.on",1,t,!1),I("Query.on",2,e,!1);var i=Ft.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},Ft.prototype.onValueEvent=function(t,e,n){var r=new gr(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},Ft.prototype.onChildEvent=function(t,e,n){var r=new mr(t,e,n);this.repo.addEventCallbackForQuery(this,r)},Ft.prototype.off=function(t,e,n){E("Query.off",0,3,arguments.length),ot("Query.off",1,t,!0),I("Query.off",2,e,!0),T("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new gr(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new mr(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},Ft.prototype.once=function(t,e,n,r){var i=this;E("Query.once",1,4,arguments.length),ot("Query.once",1,t,!1),I("Query.once",2,e,!0);var o=Ft.getCancelAndContextArgs_("Query.once",n,r),a=!0,s=new Qe;s.promise.catch(function(){});var u=function(n){a&&(a=!1,i.off(t,u),e&&e.bind(o.context)(n),s.resolve(n))};return this.on(t,u,function(e){i.off(t,u),o.cancel&&o.cancel.bind(o.context)(e),s.reject(e)}),s.promise},Ft.prototype.limitToFirst=function(t){if(E("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Ft(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},Ft.prototype.limitToLast=function(t){if(E("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Ft(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},Ft.prototype.orderByChild=function(t){if(E("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');st("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new Pn(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new fr(e),r=this.queryParams_.orderBy(n);return Ft.validateQueryEndpoints_(r),new Ft(this.repo,this.path,r,!0)},Ft.prototype.orderByKey=function(){E("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Kn);return Ft.validateQueryEndpoints_(t),new Ft(this.repo,this.path,t,!0)},Ft.prototype.orderByPriority=function(){E("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(zn);return Ft.validateQueryEndpoints_(t),new Ft(this.repo,this.path,t,!0)},Ft.prototype.orderByValue=function(){E("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(pr);return Ft.validateQueryEndpoints_(t),new Ft(this.repo,this.path,t,!0)},Ft.prototype.startAt=function(t,e){void 0===t&&(t=null),E("Query.startAt",0,2,arguments.length),nt("Query.startAt",1,t,this.path,!0),at("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(Ft.validateLimit_(n),Ft.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new Ft(this.repo,this.path,n,this.orderByCalled_)},Ft.prototype.endAt=function(t,e){void 0===t&&(t=null),E("Query.endAt",0,2,arguments.length),nt("Query.endAt",1,t,this.path,!0),at("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(Ft.validateLimit_(n),Ft.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Ft(this.repo,this.path,n,this.orderByCalled_)},Ft.prototype.equalTo=function(t,e){if(E("Query.equalTo",1,2,arguments.length),nt("Query.equalTo",1,t,this.path,!1),at("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},Ft.prototype.toString=function(){return E("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},Ft.prototype.toJSON=function(){return E("Query.toJSON",0,1,arguments.length),this.toString()},Ft.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},Ft.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Sn(t);return"{}"===e?"default":e},Ft.prototype.isEqual=function(t){if(E("Query.isEqual",1,1,arguments.length),!(t instanceof Ft))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},Ft.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,I(t,3,r.cancel,!0),r.context=n,T(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(C(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Ft.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Ft),br=(jt.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},jt.prototype.remember=function(t,e){if(t.isEmpty())this.value=e,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,e);else{var n=t.getFront();this.children.has(n)||this.children.set(n,new jt);var r=this.children.get(n);t=t.popFront(),r.remember(t,e)}},jt.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(zn,function(t,e){n.remember(new Pn(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),!this.children.has(r)||this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},jt.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new Pn(t.toString()+"/"+n);r.forEachTree(i,e)})},jt.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},jt),wr=function(t,e){var n,r=Ut(t.getPriority().val(),e);if(t.isLeafNode()){var i=t,o=Ut(i.getValue(),e);return o!==i.getValue()||r!==i.getPriority().val()?new Gn(o,Pt(r)):t}var a=t;return r!==(n=a).getPriority().val()&&(n=n.updatePriority(new Gn(r))),a.forEachChild(zn,function(t,r){var i=wr(r,e);i!==r&&(n=n.updateImmediateChild(t,i))}),n};(lr=hr=hr||{})[lr.OVERWRITE=0]="OVERWRITE",lr[lr.MERGE=1]="MERGE",lr[lr.ACK_USER_WRITE=2]="ACK_USER_WRITE",lr[lr.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Er,Cr,Ir,Tr,Sr=(Vt.User=new Vt(!0,!1,null,!1),Vt.Server=new Vt(!1,!0,null,!1),Vt.forServerTaggedQuery=function(t){return new Vt(!1,!0,t,!0)},Vt),Nr=(Wt.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return qe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Pn(t));return new Wt(Pn.Empty,e,this.revert)}return qe(this.path.getFront()===t,"operationForChild called for unrelated child."),new Wt(this.path.popFront(),this.affectedTree,this.revert)},Wt),kr=(qt.fromObject=function(t){var e=qt.Empty;return Q(t,function(t,n){e=e.set(new Pn(t),n)}),e},qt.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},qt.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Pn.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new Pn(n).child(i.path),value:i.value}},qt.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},qt.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):qt.Empty},qt.prototype.set=function(t,e){if(t.isEmpty())return new qt(e,this.children);var n=t.getFront(),r=(this.children.get(n)||qt.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new qt(this.value,i)},qt.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?qt.Empty:new qt(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?qt.Empty:new qt(this.value,i)}return this},qt.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},qt.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||qt.Empty).setTree(t.popFront(),e),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new qt(this.value,i)},qt.prototype.fold=function(t){return this.fold_(Pn.Empty,t)},qt.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},qt.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Pn.Empty,e)},qt.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},qt.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Pn.Empty,e)},qt.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):qt.Empty},qt.prototype.foreach=function(t){this.foreach_(Pn.Empty,t)},qt.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},qt.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},qt.Empty=new qt(null),qt),Pr=(Ht.prototype.operationForChild=function(t){return this.path.isEmpty()?new Ht(this.source,Pn.Empty):new Ht(this.source,this.path.popFront())},Ht),Ar=(Bt.prototype.operationForChild=function(t){return this.path.isEmpty()?new Bt(this.source,Pn.Empty,this.snap.getImmediateChild(t)):new Bt(this.source,this.path.popFront(),this.snap)},Bt),Or=(Qt.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new Pn(t));return e.isEmpty()?null:e.value?new Ar(this.source,Pn.Empty,e.value):new Qt(this.source,Pn.Empty,e)}return qe(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Qt(this.source,this.path.popFront(),this.children)},Qt.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Qt),Rr=(Kt.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Kt.prototype.isFiltered=function(){return this.filtered_},Kt.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},Kt.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Kt.prototype.getNode=function(){return this.node_},Kt),Dr=(Gt.prototype.updateEventSnap=function(t,e,n){return new Gt(new Rr(t,e,n),this.serverCache_)},Gt.prototype.updateServerSnap=function(t,e,n){return new Gt(this.eventCache_,new Rr(t,e,n))},Gt.prototype.getEventCache=function(){return this.eventCache_},Gt.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Gt.prototype.getServerCache=function(){return this.serverCache_},Gt.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Gt.Empty=new Gt(new Rr(ir.EMPTY_NODE,!1,!1),new Rr(ir.EMPTY_NODE,!1,!1)),Gt),xr=(zt.valueChange=function(t){return new zt(zt.VALUE,t)},zt.childAddedChange=function(t,e){return new zt(zt.CHILD_ADDED,e,t)},zt.childRemovedChange=function(t,e){return new zt(zt.CHILD_REMOVED,e,t)},zt.childChangedChange=function(t,e,n){return new zt(zt.CHILD_CHANGED,e,t,n)},zt.childMovedChange=function(t,e){return new zt(zt.CHILD_MOVED,e,t)},zt.CHILD_ADDED="child_added",zt.CHILD_REMOVED="child_removed",zt.CHILD_CHANGED="child_changed",zt.CHILD_MOVED="child_moved",zt.VALUE="value",zt),Lr=(Yt.prototype.updateChild=function(t,e,n,r,i,o){qe(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(xr.childRemovedChange(e,a)):qe(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(xr.childAddedChange(e,n)):o.trackChildChange(xr.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Yt.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(zn,function(t,r){e.hasChild(t)||n.trackChildChange(xr.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(zn,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(xr.childChangedChange(e,r,i))}else n.trackChildChange(xr.childAddedChange(e,r))})),e.withIndex(this.index_)},Yt.prototype.updatePriority=function(t,e){return t.isEmpty()?ir.EMPTY_NODE:t.updatePriority(e)},Yt.prototype.filtersNodes=function(){return!1},Yt.prototype.getIndexedFilter=function(){return this},Yt.prototype.getIndex=function(){return this.index_},Yt),Mr=(Xt.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;qe(e===xr.CHILD_ADDED||e===xr.CHILD_CHANGED||e===xr.CHILD_REMOVED,"Only child changes supported for tracking"),qe(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===xr.CHILD_ADDED&&i===xr.CHILD_REMOVED)this.changeMap.set(n,xr.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===xr.CHILD_REMOVED&&i===xr.CHILD_ADDED)this.changeMap.delete(n);else if(e===xr.CHILD_REMOVED&&i===xr.CHILD_CHANGED)this.changeMap.set(n,xr.childRemovedChange(n,r.oldSnap));else if(e===xr.CHILD_CHANGED&&i===xr.CHILD_ADDED)this.changeMap.set(n,xr.childAddedChange(n,t.snapshotNode));else{if(e!==xr.CHILD_CHANGED||i!==xr.CHILD_CHANGED)throw He("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,xr.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Xt.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Xt),Fr=new($t.prototype.getCompleteChild=function(t){return null},$t.prototype.getChildAfterChild=function(t,e,n){return null},$t),jr=(Jt.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Rr(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},Jt.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},Jt),Ur=function(t,e){this.viewCache=t,this.changes=e},Vr=(Zt.prototype.assertIndexed=function(t){qe(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),qe(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Zt.prototype.applyOperation=function(t,e,n,r){var i,o,a=new Mr;if(e.type===hr.OVERWRITE){var s=e;i=s.source.fromUser?this.applyUserOverwrite_(t,s.path,s.snap,n,r,a):(qe(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(t,s.path,s.snap,n,r,o,a))}else if(e.type===hr.MERGE){var u=e;i=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,a):(qe(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,o,a))}else if(e.type===hr.ACK_USER_WRITE){var c=e;i=c.revert?this.revertUserWrite_(t,c.path,n,r,a):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,a)}else{if(e.type!==hr.LISTEN_COMPLETE)throw He("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,a)}var h=a.getChanges();return Zt.maybeAddValueEvent_(t,i,h),new Ur(i,h)},Zt.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(xr.valueChange(e.getCompleteEventSnap()))}},Zt.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(qe(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof ir?u:ir.EMPTY_NODE,h=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var p=e.getFront();if(".priority"===p){qe(1===e.getLength(),"Can't have a priority with additional path components");var f=o.getNode();s=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,f,s);a=null!=d?this.filter_.updatePriority(f,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(p)){s=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);y=null!=g?o.getNode().getImmediateChild(p).updateChild(v,g):o.getNode().getImmediateChild(p)}else y=n.calcCompleteChild(p,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),p,y,v,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},Zt.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var p=e.popFront(),f=u.getNode().getImmediateChild(l).updateChild(p,n);s=".priority"===l?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),l,f,p,Fr,null)}var d=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new jr(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,a)},Zt.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new jr(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),p=u.getNode().getImmediateChild(h),f=void 0;if(l.isEmpty())f=n;else{var d=c.getCompleteChild(h);f=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):ir.EMPTY_NODE}if(p.equals(f))a=t;else{var v=this.filter_.updateChild(u.getNode(),h,f,l,c,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},Zt.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Zt.prototype.applyUserMerge_=function(t,e,n,r,i,o){var a=this,s=t;return n.foreach(function(n,u){var c=e.child(n);Zt.cacheHasChild_(t,c.getFront())&&(s=a.applyUserOverwrite_(s,c,u,r,i,o))}),n.foreach(function(n,u){var c=e.child(n);Zt.cacheHasChild_(t,c.getFront())||(s=a.applyUserOverwrite_(s,c,u,r,i,o))}),s},Zt.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},Zt.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:kr.Empty.setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new Pn(e),l,r,i,o,a)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),p=s.applyMerge_(l,n);c=s.applyServerOverwrite_(c,new Pn(e),p,r,i,o,a)}}),c},Zt.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=kr.Empty;return s.getNode().forEachChild(Kn,function(t,e){u=u.set(new Pn(t),e)}),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=kr.Empty;return n.foreach(function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,a,o)},Zt.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Fr,r)},Zt.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new jr(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();qe(h instanceof ir,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var l=e.getFront(),p=n.calcCompleteChild(l,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(l)&&(p=s.getImmediateChild(l)),(u=null!=p?this.filter_.updateChild(s,l,p,e.popFront(),a,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(s,l,ir.EMPTY_NODE,e.popFront(),a,i):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Pn.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},Zt),Wr=(te.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===xr.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(xr.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,xr.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,xr.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,xr.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,xr.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,xr.VALUE,t,n,e),i},te.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},te.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},te.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw He("Should only compare child_ events.");var n=new Hn(t.childName,t.snapshotNode),r=new Hn(e.childName,e.snapshotNode);return this.index_.compare(n,r)},te),qr=(ee.prototype.getQuery=function(){return this.query_},ee.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},ee.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},ee.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},ee.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},ee.prototype.removeEventRegistration=function(t,e){var n=[];if(e){qe(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},ee.prototype.applyOperation=function(t,e,n){t.type===hr.MERGE&&null!==t.source.queryId&&(qe(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),qe(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),qe(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},ee.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(zn,function(t,e){n.push(xr.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(xr.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},ee.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},ee),Hr=(Object.defineProperty(ne,"__referenceConstructor",{get:function(){return qe(Cr,"Reference.ts has not been loaded"),Cr},set:function(t){qe(!Cr,"__referenceConstructor has already been defined"),Cr=t},enumerable:!0,configurable:!0}),ne.prototype.isEmpty=function(){return 0===this.views.size},ne.prototype.applyOperation=function(t,e,n){var i,o,a=t.source.queryId;if(null!==a){var s=this.views.get(a);return qe(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var u=[];try{for(var c=r(this.views.values()),h=c.next();!h.done;h=c.next())s=h.value,u=u.concat(s.applyOperation(t,e,n))}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u},ne.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;u=!!s||(s=r instanceof ir?n.calcCompleteEventChildren(r):ir.EMPTY_NODE,!1);var c=new Dr(new Rr(s,u,!1),new Rr(r,i,!1));a=new qr(t,c),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},ne.prototype.removeEventRegistration=function(t,e,n){var o,a,s=t.queryIdentifier(),u=[],c=[],h=this.hasCompleteView();if("default"===s)try{for(var l=r(this.views.entries()),p=l.next();!p.done;p=l.next()){var f=i(p.value,2),d=f[0],v=f[1];c=c.concat(v.removeEventRegistration(e,n)),v.isEmpty()&&(this.views.delete(d),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery()))}}catch(t){o={error:t}}finally{try{p&&!p.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}else(v=this.views.get(s))&&(c=c.concat(v.removeEventRegistration(e,n)),v.isEmpty()&&(this.views.delete(s),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery())));return h&&!this.hasCompleteView()&&u.push(new ne.__referenceConstructor(t.repo,t.path)),{removed:u,events:c}},ne.prototype.getQueryViews=function(){var t,e,n=[];try{for(var i=r(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.getQuery().getQueryParams().loadsAllData()||n.push(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},ne.prototype.getCompleteServerCache=function(t){var e,n,i=null;try{for(var o=r(this.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},ne.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},ne.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},ne.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},ne.prototype.getCompleteView=function(){var t,e;try{for(var n=r(this.views.values()),i=n.next();!i.done;i=n.next()){var o=i.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},ne),Br=(re.prototype.addWrite=function(t,e){if(t.isEmpty())return new re(new kr(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=Pn.relativePath(r,t);return i=i.updateChild(o,e),new re(this.writeTree_.set(r,i))}var a=new kr(e);return new re(this.writeTree_.setTree(t,a))},re.prototype.addWrites=function(t,e){var n=this;return Q(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},re.prototype.removeWrite=function(t){return t.isEmpty()?re.Empty:new re(this.writeTree_.setTree(t,kr.Empty))},re.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},re.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Pn.relativePath(e.path,t)):null},re.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(zn,function(e,n){t.push(new Hn(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Hn(e,n.value))}),t},re.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new re(null!=e?new kr(e):this.writeTree_.subtree(t))},re.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},re.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal(function(n,o){".priority"===n?(qe(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(Pn.Empty,this.writeTree_,t)},re.Empty=new re(new kr(null)),re),Qr=(ie.prototype.childWrites=function(t){return new Kr(t,this)},ie.prototype.addOverwrite=function(t,e,n,r){qe(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},ie.prototype.addMerge=function(t,e,n){qe(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},ie.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},ie.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});qe(0<=n,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&0<=a;){var s=this.allWrites_[a];s.visible&&(n<=a&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Q(r.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}),!0)},ie.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},ie.prototype.calcCompleteEventCache=function(t,e,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(t);if(!r&&i.isEmpty())return e;if(r||null!=e||i.hasCompleteWrite(Pn.Empty)){var o=ie.layerTree_(this.allWrites_,function(e){return(e.visible||r)&&(!n||!~n.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},t);return u=e||ir.EMPTY_NODE,o.apply(u)}return null}var a=this.visibleWrites_.getCompleteNode(t);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(t);if(s.isEmpty())return e;if(null!=e||s.hasCompleteWrite(Pn.Empty)){var u=e||ir.EMPTY_NODE;return s.apply(u)}return null},ie.prototype.calcCompleteEventChildren=function(t,e){var n=ir.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(zn,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(zn,function(t,e){var r=i.childCompoundWrite(new Pn(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},ie.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){qe(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},ie.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},ie.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},ie.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(Pn.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),p=l.getNext();p&&c.length<r;)0!==h(p,n)&&c.push(p),p=l.getNext();return c},ie.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},ie.prototype.resetTree_=function(){this.visibleWrites_=ie.layerTree_(this.allWrites_,ie.DefaultFilter_,Pn.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},ie.DefaultFilter_=function(t){return t.visible},ie.layerTree_=function(t,e,n){for(var r=Br.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=Pn.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=Pn.relativePath(a,n),r=r.addWrite(Pn.Empty,o.snap.getChild(s)));else{if(!o.children)throw He("WriteRecord should have .snap or .children");if(n.contains(a))s=Pn.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=Pn.relativePath(a,n)).isEmpty())r=r.addWrites(Pn.Empty,o.children);else{var u=m(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(Pn.Empty,c)}}}}}return r},ie),Kr=(oe.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},oe.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},oe.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},oe.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},oe.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},oe.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},oe.prototype.child=function(t){return new oe(this.treePath_.child(t),this.writeTree_)},oe),Gr=(ae.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ar(Sr.User,t,e)):[]},ae.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=kr.fromObject(e);return this.applyOperationToSyncPoints_(new Or(Sr.User,t,r))},ae.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=kr.Empty;return null!=n.snap?r=r.set(Pn.Empty,!0):Q(n.children,function(t,e){r=r.set(new Pn(t),e)}),this.applyOperationToSyncPoints_(new Nr(n.path,r,e))}return[]},ae.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ar(Sr.Server,t,e))},ae.prototype.applyServerMerge=function(t,e){var n=kr.fromObject(e);return this.applyOperationToSyncPoints_(new Or(Sr.Server,t,n))},ae.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Pr(Sr.Server,t))},ae.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=ae.parseQueryKey_(r),o=i.path,a=i.queryId,s=Pn.relativePath(o,t),u=new Ar(Sr.forServerTaggedQuery(a),s,e);return this.applyTaggedOperation_(o,u)},ae.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=ae.parseQueryKey_(r),o=i.path,a=i.queryId,s=Pn.relativePath(o,t),u=kr.fromObject(e),c=new Or(Sr.forServerTaggedQuery(a),s,u);return this.applyTaggedOperation_(o,c)}return[]},ae.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=ae.parseQueryKey_(n),i=r.path,o=r.queryId,a=Pn.relativePath(i,t),s=new Pr(Sr.forServerTaggedQuery(o),a);return this.applyTaggedOperation_(i,s)}return[]},ae.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,function(t,e){var o=Pn.relativePath(t,n);r=r||e.getCompleteServerCache(o),i=i||e.hasCompleteView()});var o,a=this.syncPointTree_.get(n);a?(i=i||a.hasCompleteView(),r=r||a.getCompleteServerCache(Pn.Empty)):(a=new Hr,this.syncPointTree_=this.syncPointTree_.set(n,a)),null!=r?o=!0:(o=!1,r=ir.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(t,e){var n=e.getCompleteServerCache(Pn.Empty);n&&(r=r.updateImmediateChild(t,n))}));var s=a.viewExistsForQuery(t);if(!s&&!t.getQueryParams().loadsAllData()){var u=ae.makeQueryKey_(t);qe(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=ae.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var h=this.pendingWriteTree_.childWrites(n),l=a.addEventRegistration(t,e,h,r,o);if(!s&&!i){var p=a.viewForQuery(t);l=l.concat(this.setupListener_(t,p))}return l},ae.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),a=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var s=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(l),f=0;f<p.length;++f){var d=p[f],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(ae.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(ae.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(ae.makeQueryKey_(t));r.listenProvider_.stopListening(ae.queryForListening_(t),e)})),this.removeTags_(u)}return a},ae.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=Pn.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},ae.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Q(n,function(t,e){r=r.concat(e)}),r})},ae.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=ae.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},ae.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},ae.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(ae.queryForListening_(t),r,i.hashFn,i.onComplete),a=this.syncPointTree_.subtree(n);if(r)qe(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var s=a.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Q(n,function(t,e){r=r.concat(e)}),r}),u=0;u<s.length;++u){var c=s[u];this.listenProvider_.stopListening(ae.queryForListening_(c),this.tagForQuery_(c))}return o},ae.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||ir.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},ae.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},ae.parseQueryKey_=function(t){var e=t.indexOf("$");return qe(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Pn(t.substr(0,e))}},ae.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},ae.prototype.tagForQuery_=function(t){var e=ae.makeQueryKey_(t);return this.queryToTagMap.get(e)},ae.getNextQueryTag_=function(){return ae.nextQueryTag_++},ae.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);qe(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},ae.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Pn.Empty))},ae.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Pn.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Pn.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,h=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},ae.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Pn.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Pn.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(t,r,n))),a},ae.nextQueryTag_=1,ae),zr=(se.prototype.getNode=function(t){return this.rootNode_.getChild(t)},se.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},se),Yr=(ue.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(M("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},ue.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},ue.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},ue.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',V(t)},ue),Xr=(ce.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),g(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},ce.prototype.get=function(){return u(this.counters_)},ce),$r=(he.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Xr),this.collections_[e]},he.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},he.collections_={},he.reporters_={},he),Jr=(le.prototype.get=function(){var t=this.collection_.get(),e=Ve({},t);return this.last_&&Q(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},le),Zr=(pe.prototype.includeStat=function(t){this.statsToReport_[t]=!0},pe.prototype.reportStats_=function(){var t=this,e={},n=!1;Q(this.statsListener_.get(),function(r,i){0<i&&g(t.statsToReport_,r)&&(e[r]=i,n=!0)}),n&&this.server_.reportStats(e),z(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},pe),ti=(fe.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new ei(i)),e.add(r)}e&&this.eventLists_.push(e)},fe.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},fe.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},fe.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},fe),ei=(de.prototype.add=function(t){this.events_.push(t)},de.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();wn&&M("event: "+e.toString()),G(n)}}},de.prototype.getPath=function(){return this.path_},de),ni=(ve.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=o(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},ve.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},ve.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},ve.prototype.validateEventType_=function(t){qe(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},ve),ri=(e(ye,Ir=ni),ye.getInstance=function(){return new ye},ye.prototype.getInitialEvent=function(t){return qe("visible"===t,"Unknown event type: "+t),[this.visible_]},ye),ii=(e(ge,Tr=ni),ge.getInstance=function(){return new ge},ge.prototype.getInitialEvent=function(t){return qe("online"===t,"Unknown event type: "+t),[this.online_]},ge.prototype.currentlyOnline=function(){return this.online_},ge),oi=(me.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},me.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=0;e<t.length;++e)!function(e){t[e]&&G(function(){n.onMessage_(t[e])})}(e);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},me),ai=(_e.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new oi(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new si(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=i(t,5),o=r[0],a=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=a,n.password=s;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=i(t,2),o=r[0],a=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,a)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(On)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},_e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},_e.forceAllow=function(){_e.forceAllow_=!0},_e.forceDisallow=function(){_e.forceDisallow_=!0},_e.isAvailable=function(){return!!_e.forceAllow_||!(_e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},_e.prototype.markConnectionHealthy=function(){},_e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},_e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},_e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},_e.prototype.send=function(t){var e=v(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=B(function(t){var e=a(t);return Be.encodeByteArray(e,!0)}(e),1840),r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++},_e.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},_e.prototype.incrementIncomingBytes_=function(t){var e=v(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},_e),si=(be.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||M("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},be.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},be.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},be.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},be.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},be.prototype.addLongPollTag_=function(t,e){function n(){r.outstandingRequests.delete(e),r.newRequest_()}var r=this;this.outstandingRequests.add(e);var i=setTimeout(n,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),n()})},be.prototype.addTag=function(t,e){var n=this;setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){M("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}},Math.floor(1))},be),ui="",ci=null;"undefined"!=typeof MozWebSocket?ci=MozWebSocket:"undefined"!=typeof WebSocket&&(ci=WebSocket);var hi,li,pi,fi=(we.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(On)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Rn,r)},we.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yn.set("previous_websocket_failure",!0);try{if(l()){var r=We.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+ui+"/"+process.platform+"/"+r}},o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new ci(this.connURL,[],i)}else this.mySock=new ci(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},we.prototype.start=function(){},we.forceDisallow=function(){we.forceDisallow_=!0},we.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==ci&&!we.forceDisallow_},we.previouslyFailed=function(){return yn.isInMemoryStorage||!0===yn.get("previous_websocket_failure")},we.prototype.markConnectionHealthy=function(){yn.remove("previous_websocket_failure")},we.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=d(e);this.onMessage(n)}},we.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},we.prototype.extractFrameCount_=function(t){if(qe(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},we.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},we.prototype.send=function(t){this.resetKeepAlive();var e=v(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=B(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},we.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},we.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},we.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},we.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},we.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},we.responsesRequiredToBeHealthy=2,we.healthyTimeout=3e4,we),di=(Object.defineProperty(Ee,"ALL_TRANSPORTS",{get:function(){return[ai,fi]},enumerable:!0,configurable:!0}),Ee.prototype.initTransports_=function(t){var e,n,i=fi&&fi.isAvailable(),o=i&&!fi.previouslyFailed();if(t.webSocketOnly&&(i||V("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[fi];else{var a=this.transports_=[];try{for(var s=r(Ee.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Ee.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Ee.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Ee),vi=(Ce.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=z(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},Ce.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Ce.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},Ce.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},Ce.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},Ce.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Ce.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},Ce.prototype.onSecondaryMessageReceived_=function(t){var e=H("t",t),n=H("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},Ce.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Ce.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Ce.prototype.onPrimaryMessageReceived_=function(t){var e=H("t",t),n=H("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},Ce.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Ce.prototype.onPrimaryResponse_=function(){this.isHealthy_||--this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy())},Ce.prototype.onControl_=function(t){var e=H("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?j("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):j("Unknown control packet command: "+e)}},Ce.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&V("Protocol version mismatch detected"),this.tryStartUpgrade_())},Ce.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Ce.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),z(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},Ce.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Ce.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):z(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Ce.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Ce.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Ce.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Ce.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Ce.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Ce.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Ce.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Ce),yi=(Ie.prototype.put=function(t,e,n,r){},Ie.prototype.merge=function(t,e,n,r){},Ie.prototype.refreshAuthToken=function(t){},Ie.prototype.onDisconnectPut=function(t,e,n){},Ie.prototype.onDisconnectMerge=function(t,e,n){},Ie.prototype.onDisconnectCancel=function(t,e){},Ie.prototype.reportStats=function(t){},Ie),gi=(e(Te,hi=yi),Te.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(v(i)),qe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},Te.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),qe(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),qe(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},Te.prototype.sendListen_=function(t){var e=this,n=t.query,r=n.path.toString(),i=n.queryIdentifier();this.log_("Listen on "+r+" for "+i);var o={p:r};t.tag&&(o.q=n.queryObject(),o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,function(o){var a=o.d,s=o.s;Te.warnOnListenWarnings_(a,n),(e.listens.get(r)&&e.listens.get(r).get(i))===t&&(e.log_("listen response",o),"ok"!==s&&e.removeListen_(r,i),t.onComplete&&t.onComplete(s,a))})},Te.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&g(t,"w")){var n=m(t,"w");Array.isArray(n)&&~n.indexOf("no_index")&&V("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+('".indexOn": "'+e.getQueryParams().getIndex().toString()+'"')+" at "+e.path.toString()+" to your security rules for better performance.")}},Te.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},Te.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){var e=y(t).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Te.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=function(t){var e=y(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},Te.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),qe(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},Te.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},Te.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Te.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Te.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Te.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},Te.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Te.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Te.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},Te.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],0===--e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},Te.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}})}},Te.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+v(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Te.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):j("Unrecognized action received from server: "+v(t)+"\nAre you using the latest client?")},Te.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Te.prototype.scheduleConnect_=function(t){var e=this;qe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},Te.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Te.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Te.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},Te.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Te.nextConnectionId_++,i=this,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,n())};this.realtime_={close:u,sendRequest:function(t){qe(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(t)}};var c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then(function(u){a?M("getToken() completed but was canceled"):(M("getToken() completed. Creating connection."),i.authToken_=u&&u.accessToken,s=new vi(r,i.repoInfo_,t,e,n,function(t){V(t+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")},o))}).then(null,function(t){i.log_("Failed to get token: "+t),a||u()})}},Te.prototype.interrupt=function(t){M("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Te.prototype.resume=function(t){M("Resuming connection for reason: "+t),delete this.interruptReasons_[t],_(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},Te.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},Te.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Te.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return Sn(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},Te.prototype.removeListen_=function(t,e){var n,r=new Pn(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},Te.prototype.onAuthRevoked_=function(t,e){M("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||3<=++this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken())},Te.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Te.prototype.restoreState_=function(){var t,e,n,i;this.tryAuth();try{for(var o=r(this.listens.values()),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,r(s.values())),c=u.next();!c.done;c=u.next()){var h=c.value;this.sendListen_(h)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var p=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(p.action,p.pathString,p.data,p.onComplete)}},Te.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+ui.replace(/\./g,"-")]=1,h()?t["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)},Te.prototype.shouldReconnect_=function(){var t=ii.getInstance().currentlyOnline();return _(this.interruptReasons_)&&t},Te.nextPersistentConnectionId_=0,Te.nextConnectionId_=0,Te),mi=(e(Se,li=yi),Se.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Se.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(qe(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},Se.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var a=Se.getListenId_(t,n),s={};this.listens_[a]=s;var u=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",u,function(t,e){var u=e;404===t&&(t=u=null),null===t&&i.onDataUpdate_(o,u,!1,n),m(i.listens_,a)===s&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},Se.prototype.unlisten=function(t,e){var n=Se.getListenId_(t,e);delete this.listens_[n]},Se.prototype.refreshAuthToken=function(t){},Se.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var i=r[n];!function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}(i[0],i[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(200<=s.status&&s.status<300){try{t=d(s.responseText)}catch(t){V("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&V("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()})},Se),_i="repo_interrupt",bi=(Ne.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Ne.prototype.name=function(){return this.repoInfo_.namespace},Ne.prototype.serverTime=function(){var t=this.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},Ne.prototype.generateServerValues=function(){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:this.serverTime()})},Ne.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Pn(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=b(e,function(t){return Pt(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=Pt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=b(e,function(t){return Pt(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Pt(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;0<o.length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},Ne.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},Ne.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},Ne.prototype.onServerInfoUpdate_=function(t){var e=this;Q(t,function(t,n){e.updateInfo_(t,n)})},Ne.prototype.updateInfo_=function(t,e){var n=new Pn("/.info/"+t),r=Pt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},Ne.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Ne.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=Pt(e,n),s=wr(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),a.val(!0),function(e,n){var o="ok"===e;o||V("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},Ne.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(Q(e,function(t,e){i=!1;var n=Pt(e);a[t]=wr(n,o)}),i)M("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||V("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=0<a.length?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)}),Q(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},Ne.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=[];(function(t,e){var n=new br;return t.forEachTree(new Pn(""),function(t,r){n.remember(t,wr(r,e))}),n})(this.onDisconnect_,e).forEachTree(Pn.Empty,function(e,r){n=n.concat(t.serverSyncTree_.applyServerOverwrite(e,r));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new br,this.eventQueue_.raiseEventsForChangedPath(Pn.Empty,n)},Ne.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},Ne.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Pt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},Ne.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Pt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},Ne.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(_(e))return M("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&Q(e,function(e,n){var i=Pt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},Ne.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},Ne.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},Ne.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(_i)},Ne.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(_i)},Ne.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new Jr(this.stats_)),this.statsListener_.get()):this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);Q(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},Ne.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},Ne.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),M.apply(void 0,o([n],t))},Ne.prototype.callOnCompleteCallback=function(t,e,n){t&&G(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(Ne.prototype,"database",{get:function(){return this.__database||(this.__database=new Ri(this))},enumerable:!0,configurable:!0}),Ne),wi=(ke.prototype.getStartPost=function(){return this.startPost_},ke.prototype.getEndPost=function(){return this.endPost_},ke.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},ke.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Hn(e,n))||(n=ir.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},ke.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ir.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ir.EMPTY_NODE);var i=this;return e.forEachChild(zn,function(t,e){i.matches(new Hn(t,e))||(r=r.updateImmediateChild(t,ir.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},ke.prototype.updatePriority=function(t,e){return t},ke.prototype.filtersNodes=function(){return!0},ke.prototype.getIndexedFilter=function(){return this.indexedFilter_},ke.prototype.getIndex=function(){return this.index_},ke.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},ke.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},ke),Ei=(Pe.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Hn(e,n))||(n=ir.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Pe.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ir.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ir.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ir.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)a=i.getNext(),!l&&c(s,a)<=0&&(l=!0),l&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,ir.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Pe.prototype.updatePriority=function(t,e){return t},Pe.prototype.filtersNodes=function(){return!0},Pe.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Pe.prototype.getIndex=function(){return this.index_},Pe.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;qe(s.numChildren()===this.limit_,"");var u=new Hn(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var l=s.getImmediateChild(e),p=r.getChildAfterChild(this.index_,c,this.reverse_);null!=p&&(p.name===e||s.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var f=null==p?1:o(p,u);if(h&&!n.isEmpty()&&0<=f)return null!=i&&i.trackChildChange(xr.childChangedChange(e,n,l)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(xr.childRemovedChange(e,l));var d=s.updateImmediateChild(e,ir.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(xr.childAddedChange(p.name,p.node)),d.updateImmediateChild(p.name,p.node)):d}return n.isEmpty()?t:h&&0<=o(c,u)?(null!=i&&(i.trackChildChange(xr.childRemovedChange(c.name,c.node)),i.trackChildChange(xr.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,ir.EMPTY_NODE)):t},Pe),Ci=(Ae.prototype.hasStart=function(){return this.startSet_},Ae.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Ae.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Ae.prototype.getIndexStartValue=function(){return qe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Ae.prototype.getIndexStartName=function(){return qe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cn},Ae.prototype.hasEnd=function(){return this.endSet_},Ae.prototype.getIndexEndValue=function(){return qe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Ae.prototype.getIndexEndName=function(){return qe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:In},Ae.prototype.hasLimit=function(){return this.limitSet_},Ae.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Ae.prototype.getLimit=function(){return qe(this.limitSet_,"Only valid if limit has been set"),this.limit_},Ae.prototype.getIndex=function(){return this.index_},Ae.prototype.copy_=function(){var t=new Ae;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Ae.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Ae.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Ae.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Ae.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Ae.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Ae.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Ae.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Ae.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Ae.prototype.getQueryObject=function(){var t=Ae.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==zn&&(e[t.INDEX]=this.index_.toString()),e},Ae.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Ae.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===zn},Ae.prototype.getNodeFilter=function(){return this.loadsAllData()?new Lr(this.getIndex()):this.hasLimit()?new Ei(this):new wi(this)},Ae.prototype.toRestQueryStringParameters=function(){var t,e=Ae.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===zn?e.PRIORITY_INDEX:this.index_===pr?e.VALUE_INDEX:this.index_===Kn?e.KEY_INDEX:(qe(this.index_ instanceof fr,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=v(t),this.startSet_&&(n[e.START_AT]=v(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+v(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=v(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+v(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Ae.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Ae.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Ae.DEFAULT=new Ae,Ae),Ii=(e(Oe,pi=_r),Oe.prototype.getKey=function(){return E("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Oe.prototype.child=function(t){return E("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Pn||(null===this.path.getFront()?function(t,e,n,r){st("Reference.child",1,n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),!1)}(0,0,t):st("Reference.child",1,t,!1)),new Oe(this.repo,this.path.child(t))},Oe.prototype.getParent=function(){E("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Oe(this.repo,t)},Oe.prototype.getRoot=function(){E("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Oe.prototype.databaseProp=function(){return this.repo.database},Oe.prototype.set=function(t,e){E("Reference.set",1,2,arguments.length),ut("Reference.set",this.path),nt("Reference.set",1,t,this.path,!1),I("Reference.set",2,e,!0);var n=new Qe;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Oe.prototype.update=function(t,e){if(E("Reference.update",1,2,arguments.length),ut("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,V("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rt("Reference.update",1,t,this.path,!1),I("Reference.update",2,e,!0);var i=new Qe;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Oe.prototype.setWithPriority=function(t,e,n){if(E("Reference.setWithPriority",2,3,arguments.length),ut("Reference.setWithPriority",this.path),nt("Reference.setWithPriority",1,t,this.path,!1),it("Reference.setWithPriority",2,e,!1),I("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Qe;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Oe.prototype.remove=function(t){return E("Reference.remove",0,1,arguments.length),ut("Reference.remove",this.path),I("Reference.remove",1,t,!0),this.set(null,t)},Oe.prototype.transaction=function(t,e,n){if(E("Reference.transaction",1,3,arguments.length),ut("Reference.transaction",this.path),I("Reference.transaction",1,t,!1),I("Reference.transaction",2,e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(C("Reference.transaction",3,!0)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new Qe;return"function"==typeof e&&r.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,n,i){t?r.reject(t):r.resolve(new Wn(n,i)),"function"==typeof e&&e(t,n,i)},n),r.promise},Oe.prototype.setPriority=function(t,e){E("Reference.setPriority",1,2,arguments.length),ut("Reference.setPriority",this.path),it("Reference.setPriority",1,t,!1),I("Reference.setPriority",2,e,!0);var n=new Qe;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Oe.prototype.push=function(t,e){E("Reference.push",0,2,arguments.length),ut("Reference.push",this.path),nt("Reference.push",1,t,this.path,!0),I("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=qn(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},Oe.prototype.onDisconnect=function(){return ut("Reference.onDisconnect",this.path),new Vn(this.repo,this.path)},Object.defineProperty(Oe.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(Oe.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(Oe.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(Oe.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),Oe);_r.__referenceConstructor=Ii,Hr.__referenceConstructor=Ii;var Ti,Si,Ni=function(){this.children={},this.childCount=0,this.value=null},ki=(Re.prototype.subTree=function(t){for(var e=t instanceof Pn?t:new Pn(t),n=this,r=e.getFront();null!==r;)n=new Re(r,n,m(n.node_.children,r)||new Ni),r=(e=e.popFront()).getFront();return n},Re.prototype.getValue=function(){return this.node_.value},Re.prototype.setValue=function(t){qe(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Re.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Re.prototype.hasChildren=function(){return 0<this.node_.childCount},Re.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Re.prototype.forEachChild=function(t){var e=this;Q(this.node_.children,function(n,r){t(new Re(n,e,r))})},Re.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},Re.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Re.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},Re.prototype.path=function(){return new Pn(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Re.prototype.name=function(){return this.name_},Re.prototype.parent=function(){return this.parent_},Re.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Re.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=g(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Re);(Si=Ti=Ti||{})[Si.RUN=0]="RUN",Si[Si.SENT=1]="SENT",Si[Si.COMPLETED=2]="COMPLETED",Si[Si.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Si[Si.NEEDS_ABORT=4]="NEEDS_ABORT",bi.MAX_TRANSACTION_RETRIES_=25,bi.prototype.transactionsInit_=function(){this.transactionQueueTree_=new ki},bi.prototype.startTransaction=function(t,e,n,r){function i(){}this.log_("transaction on "+t);var o=new Ii(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:_n(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new dr(a.currentInputSnapshot,new Ii(this,a.path),zn);a.onComplete(null,!1,c)}}else{Un("transaction failed: Data returned ",u,a.path),a.status=Ti.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(a),h.setValue(l);var p=void 0;"object"==typeof u&&null!==u&&g(u,".priority")?(p=m(u,".priority"),qe(et(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||ir.EMPTY_NODE).getPriority().val(),p=p;var f=this.generateServerValues(),d=Pt(u,p),v=wr(d,f);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},bi.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ir.EMPTY_NODE},bi.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);qe(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return t.status===Ti.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},bi.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),o=i,a=i.hash(),s=0;s<e.length;s++){var u=e[s];qe(u.status===Ti.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Ti.SENT,u.retryCount++;var c=Pn.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=t;this.server_.put(l.toString(),h,function(r){n.log_("transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=Ti.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new Ii(n,e[a].path),c=new dr(s,u,zn);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),a=0;a<o.length;a++)G(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status===Ti.SENT_NEEDS_ABORT?e[a].status=Ti.NEEDS_ABORT:e[a].status=Ti.RUN;else for(V("transaction at "+l.toString()+" failed: "+r),a=0;a<e.length;a++)e[a].status=Ti.NEEDS_ABORT,e[a].abortReason=r;n.rerunTransactions_(t)}},a)},bi.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},bi.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===Ti.RUN}).map(function(t){return t.currentWriteId}),a=0;a<t.length;a++){var s=t[a],u=Pn.relativePath(e,s.path),c=!1,h=void 0;if(qe(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===Ti.NEEDS_ABORT)c=!0,h=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===Ti.RUN)if(s.retryCount>=bi.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var l=this.getLatestState_(s.path,o);s.currentInputSnapshot=l;var p=t[a].update(l.val());if(void 0!==p){Un("transaction failed: Data returned ",p,s.path);var f=Pt(p);"object"==typeof p&&null!=p&&g(p,".priority")||(f=f.updatePriority(l.getPriority()));var d=s.currentWriteId,v=this.generateServerValues(),y=wr(f,v);s.currentOutputSnapshotRaw=f,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[a].status=Ti.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===h){var m=new Ii(this,t[a].path),_=t[a].currentInputSnapshot,b=new dr(_,m,zn);r.push(t[a].onComplete.bind(null,null,!1,b))}else r.push(t[a].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<r.length;a++)G(r[a]);this.sendReadyTransactions_()}},bi.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},bi.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},bi.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},bi.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Ti.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},bi.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},bi.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===Ti.SENT_NEEDS_ABORT||(e[o].status===Ti.SENT?(qe(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Ti.SENT_NEEDS_ABORT,e[o].abortReason="set"):(qe(e[o].status===Ti.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)G(n[o])}};var Pi,Ai="databaseURL",Oi=(De.getInstance=function(){return Pi=Pi||new De},De.prototype.interrupt=function(){var t,e,n,i;try{for(var o=r(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,r(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next()){var h=c.value;this.repos_[s][h].interrupt()}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},De.prototype.resume=function(){var t,e,n,i;try{for(var o=r(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,r(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next()){var h=c.value;this.repos_[s][h].resume()}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},De.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[Ai];void 0===r&&U("Can't determine Firebase Database URL.  Be sure to include "+Ai+" option when calling firebase.initializeApp().");var i=J(r),o=i.repoInfo,a=void 0;return"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a&&(r="http://"+a+"?ns="+o.namespace,o=(i=J(r)).repoInfo),ct("Invalid Firebase Database URL",1,i),i.path.isEmpty()||U("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},De.prototype.deleteRepo=function(t){var e=m(this.repos_,t.app.name);e&&m(e,t.repoInfo_.toURLString())===t||U("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},De.prototype.createRepo=function(t,e,n){var r=m(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=m(r,t.toURLString());return i&&U("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new bi(t,this.useRestClient_,e,n),r[t.toURLString()]=i},De.prototype.forceRestClient=function(t){this.useRestClient_=t},De),Ri=(Object.defineProperty(xe.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),xe.prototype.ref=function(t){return this.checkDeleted_("ref"),E("database.ref",0,1,arguments.length),t instanceof Ii?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},xe.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),E(e,1,1,arguments.length);var n=J(t);ct(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&U(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},xe.prototype.checkDeleted_=function(t){null===this.repo_&&U("Cannot call "+t+" on a deleted database.")},xe.prototype.goOffline=function(){E("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},xe.prototype.goOnline=function(){E("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},xe.ServerValue={TIMESTAMP:{".sv":"timestamp"}},xe),Di=(Le.prototype.delete=function(){return function(t,e,n,r){return new(n=n||Promise)(function(e,i){function o(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(o,a)}s((r=r.apply(t,[])).next())})}(this,0,void 0,function(){return n(this,function(t){return this.database.checkDeleted_("delete"),Oi.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},Le),xi=Object.freeze({__proto__:null,forceLongPolling:function(){fi.forceDisallow(),ai.forceAllow()},forceWebSockets:function(){ai.forceDisallow()},isWebSocketsAvailable:function(){return fi.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Li=gi;gi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},gi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Mi,Fi,ji=vi,Ui=xn,Vi=Object.freeze({__proto__:null,DataConnection:Li,RealTimeConnection:ji,hijackHash:function(t){var e=gi.prototype.put;return gi.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){gi.prototype.put=e}},ConnectionTarget:Ui,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Oi.getInstance().forceRestClient(t)}}),Wi=Ri.ServerValue;Mi=(Fi=t).SDK_VERSION,ui=Mi,Fi.INTERNAL.registerComponent(new fn("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Oi.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:Ii,Query:_r,Database:Ri,DataSnapshot:dr,enableLogging:L,INTERNAL:xi,ServerValue:Wi,TEST_ACCESS:Vi}).setMultipleInstances(!0)),Fi.registerVersion("@firebase/database","0.5.21")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-database.js - be sure to load firebase-app.js first.")}});